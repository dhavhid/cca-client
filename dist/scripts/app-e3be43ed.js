/*! jQuery UI - v1.11.4 - 2016-04-13
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, sortable.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(t,o){var s,i,n,l=t.nodeName.toLowerCase();return"area"===l?(s=t.parentNode,i=s.name,t.href&&i&&"map"===s.nodeName.toLowerCase()?(n=e("img[usemap='#"+i+"']")[0],!!n&&a(n)):!1):(/^(input|select|textarea|button|object)$/.test(l)?!t.disabled:"a"===l?t.href||o:o)&&a(t)}function a(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var a=this.css("position"),o="absolute"===a,s=t?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter(function(){var t=e(this);return o&&"static"===t.css("position")?!1:s.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==a&&i.length?i:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(a){return!!e.data(a,t)}}):function(t,a,o){return!!e.data(t,o[3])},focusable:function(a){return t(a,!isNaN(e.attr(a,"tabindex")))},tabbable:function(a){var o=e.attr(a,"tabindex"),s=isNaN(o);return(s||o>=0)&&t(a,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,a){function o(t,a,o,i){return e.each(s,function(){a-=parseFloat(e.css(t,"padding"+this))||0,o&&(a-=parseFloat(e.css(t,"border"+this+"Width"))||0),i&&(a-=parseFloat(e.css(t,"margin"+this))||0)}),a}var s="Width"===a?["Left","Right"]:["Top","Bottom"],i=a.toLowerCase(),n={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+a]=function(t){return void 0===t?n["inner"+a].call(this):this.each(function(){e(this).css(i,o(this,t)+"px")})},e.fn["outer"+a]=function(t,s){return"number"!=typeof t?n["outer"+a].call(this,t):this.each(function(){e(this).css(i,o(this,t,!0,s)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(a){return arguments.length?t.call(this,e.camelCase(a)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(a,o){return"number"==typeof a?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),o&&o.call(t)},a)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var a,o,s=e(this[0]);s.length&&s[0]!==document;){if(a=s.css("position"),("absolute"===a||"relative"===a||"fixed"===a)&&(o=parseInt(s.css("zIndex"),10),!isNaN(o)&&0!==o))return o;s=s.parent()}return 0}}),e.ui.plugin={add:function(t,a,o){var s,i=e.ui[t].prototype;for(s in o)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([a,o[s]])},call:function(e,t,a,o){var s,i=e.plugins[t];if(i&&(o||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(s=0;i.length>s;s++)e.options[i[s][0]]&&i[s][1].apply(e.element,a)}};var o=0,s=Array.prototype.slice;e.cleanData=function(t){return function(a){var o,s,i;for(i=0;null!=(s=a[i]);i++)try{o=e._data(s,"events"),o&&o.remove&&e(s).triggerHandler("remove")}catch(n){}t(a)}}(e.cleanData),e.widget=function(t,a,o){var s,i,n,l,r={},c=t.split(".")[0];return t=t.split(".")[1],s=c+"-"+t,o||(o=a,a=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[c]=e[c]||{},i=e[c][t],n=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new n(e,t)},e.extend(n,i,{version:o.version,_proto:e.extend({},o),_childConstructors:[]}),l=new a,l.options=e.widget.extend({},l.options),e.each(o,function(t,o){return e.isFunction(o)?void(r[t]=function(){var e=function(){return a.prototype[t].apply(this,arguments)},s=function(e){return a.prototype[t].apply(this,e)};return function(){var t,a=this._super,i=this._superApply;return this._super=e,this._superApply=s,t=o.apply(this,arguments),this._super=a,this._superApply=i,t}}()):void(r[t]=o)}),n.prototype=e.widget.extend(l,{widgetEventPrefix:i?l.widgetEventPrefix||t:t},r,{constructor:n,namespace:c,widgetName:t,widgetFullName:s}),i?(e.each(i._childConstructors,function(t,a){var o=a.prototype;e.widget(o.namespace+"."+o.widgetName,n,a._proto)}),delete i._childConstructors):a._childConstructors.push(n),e.widget.bridge(t,n),n},e.widget.extend=function(t){for(var a,o,i=s.call(arguments,1),n=0,l=i.length;l>n;n++)for(a in i[n])o=i[n][a],i[n].hasOwnProperty(a)&&void 0!==o&&(t[a]=e.isPlainObject(o)?e.isPlainObject(t[a])?e.widget.extend({},t[a],o):e.widget.extend({},o):o);return t},e.widget.bridge=function(t,a){var o=a.prototype.widgetFullName||t;e.fn[t]=function(i){var n="string"==typeof i,l=s.call(arguments,1),r=this;return n?this.each(function(){var a,s=e.data(this,o);return"instance"===i?(r=s,!1):s?e.isFunction(s[i])&&"_"!==i.charAt(0)?(a=s[i].apply(s,l),a!==s&&void 0!==a?(r=a&&a.jquery?r.pushStack(a.get()):a,!1):void 0):e.error("no such method '"+i+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+i+"'")}):(l.length&&(i=e.widget.extend.apply(null,[i].concat(l))),this.each(function(){var t=e.data(this,o);t?(t.option(i||{}),t._init&&t._init()):e.data(this,o,new a(i,this))})),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,a){a=e(a||this.defaultElement||this)[0],this.element=e(a),this.uuid=o++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),a!==this&&(e.data(a,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===a&&this.destroy()}}),this.document=e(a.style?a.ownerDocument:a.document||a),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,a){var o,s,i,n=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(n={},o=t.split("."),t=o.shift(),o.length){for(s=n[t]=e.widget.extend({},this.options[t]),i=0;o.length-1>i;i++)s[o[i]]=s[o[i]]||{},s=s[o[i]];if(t=o.pop(),1===arguments.length)return void 0===s[t]?null:s[t];s[t]=a}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];n[t]=a}return this._setOptions(n),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,a,o){var s,i=this;"boolean"!=typeof t&&(o=a,a=t,t=!1),o?(a=s=e(a),this.bindings=this.bindings.add(a)):(o=a,a=this.element,s=this.widget()),e.each(o,function(o,n){function l(){return t||i.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof n?i[n]:n).apply(i,arguments):void 0}"string"!=typeof n&&(l.guid=n.guid=n.guid||l.guid||e.guid++);var r=o.match(/^([\w:-]*)\s*(.*)$/),c=r[1]+i.eventNamespace,d=r[2];d?s.delegate(d,c,l):a.bind(c,l)})},_off:function(t,a){a=(a||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(a).undelegate(a),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function a(){return("string"==typeof e?o[e]:e).apply(o,arguments)}var o=this;return setTimeout(a,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,a,o){var s,i,n=this.options[t];if(o=o||{},a=e.Event(a),a.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),a.target=this.element[0],i=a.originalEvent)for(s in i)s in a||(a[s]=i[s]);return this.element.trigger(a,o),!(e.isFunction(n)&&n.apply(this.element[0],[a].concat(o))===!1||a.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,a){e.Widget.prototype["_"+t]=function(o,s,i){"string"==typeof s&&(s={effect:s});var n,l=s?s===!0||"number"==typeof s?a:s.effect||a:t;s=s||{},"number"==typeof s&&(s={duration:s}),n=!e.isEmptyObject(s),s.complete=i,s.delay&&o.delay(s.delay),n&&e.effects&&e.effects.effect[l]?o[t](s):l!==t&&o[l]?o[l](s.duration,s.easing,i):o.queue(function(a){e(this)[t](),i&&i.call(o[0]),a()})}}),e.widget;var i=!1;e(document).mouseup(function(){i=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(a){return!0===e.data(a.target,t.widgetName+".preventClickEvent")?(e.removeData(a.target,t.widgetName+".preventClickEvent"),a.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var a=this,o=1===t.which,s="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return o&&!s&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return a._mouseMove(e)},this._mouseUpDelegate=function(e){return a._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),i=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,a){return e>=t&&t+a>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,a){var o=null,s=!1,i=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,i.widgetName+"-item")===i?(o=e(this),!1):void 0}),e.data(t.target,i.widgetName+"-item")===i&&(o=e(t.target)),o&&(!this.options.handle||a||(e(this.options.handle,o).find("*").addBack().each(function(){this===t.target&&(s=!0)}),s))?(this.currentItem=o,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,a,o){var s,i,n=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&"auto"!==n.cursor&&(i=this.document.find("body"),this.storedCursor=i.css("cursor"),i.css("cursor",n.cursor),this.storedStylesheet=e("<style>*{ cursor: "+n.cursor+" !important; }</style>").appendTo(i)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!o)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var a,o,s,i,n=this.options,l=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=l=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=l=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=l=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=l=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-this.document.scrollTop()<n.scrollSensitivity?l=this.document.scrollTop(this.document.scrollTop()-n.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<n.scrollSensitivity&&(l=this.document.scrollTop(this.document.scrollTop()+n.scrollSpeed)),t.pageX-this.document.scrollLeft()<n.scrollSensitivity?l=this.document.scrollLeft(this.document.scrollLeft()-n.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<n.scrollSensitivity&&(l=this.document.scrollLeft(this.document.scrollLeft()+n.scrollSpeed))),l!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a=this.items.length-1;a>=0;a--)if(o=this.items[a],s=o.item[0],i=this._intersectsWithPointer(o),i&&o.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===i?"next":"prev"]()[0]!==s&&!e.contains(this.placeholder[0],s)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],s):!0)){if(this.direction=1===i?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(t,o),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,a){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var o=this,s=this.placeholder.offset(),i=this.options.axis,n={};i&&"x"!==i||(n.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),i&&"y"!==i||(n.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(n,parseInt(this.options.revert,10)||500,function(){o._clear(t)})}else this._clear(t,a);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var a=this._getItemsAsjQuery(t&&t.connected),o=[];return t=t||{},e(a).each(function(){var a=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);a&&o.push((t.key||a[1]+"[]")+"="+(t.key&&t.expression?a[1]:a[2]))}),!o.length&&t.key&&o.push(t.key+"="),o.join("&")},toArray:function(t){var a=this._getItemsAsjQuery(t&&t.connected),o=[];return t=t||{},a.each(function(){o.push(e(t.item||this).attr(t.attribute||"id")||"")}),o},_intersectsWith:function(e){var t=this.positionAbs.left,a=t+this.helperProportions.width,o=this.positionAbs.top,s=o+this.helperProportions.height,i=e.left,n=i+e.width,l=e.top,r=l+e.height,c=this.offset.click.top,d=this.offset.click.left,p="x"===this.options.axis||o+c>l&&r>o+c,u="y"===this.options.axis||t+d>i&&n>t+d,m=p&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?m:t+this.helperProportions.width/2>i&&n>a-this.helperProportions.width/2&&o+this.helperProportions.height/2>l&&r>s-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),a="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),o=t&&a,s=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return o?this.floating?i&&"right"===i||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),a=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&a||"left"===s&&!a:o&&("down"===o&&t||"up"===o&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function a(){l.push(this)}var o,s,i,n,l=[],r=[],c=this._connectWith();if(c&&t)for(o=c.length-1;o>=0;o--)for(i=e(c[o],this.document[0]),s=i.length-1;s>=0;s--)n=e.data(i[s],this.widgetFullName),n&&n!==this&&!n.options.disabled&&r.push([e.isFunction(n.options.items)?n.options.items.call(n.element):e(n.options.items,n.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),n]);for(r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),o=r.length-1;o>=0;o--)r[o][0].each(a);return e(l)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var a=0;t.length>a;a++)if(t[a]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var a,o,s,i,n,l,r,c,d=this.items,p=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(a=u.length-1;a>=0;a--)for(s=e(u[a],this.document[0]),o=s.length-1;o>=0;o--)i=e.data(s[o],this.widgetFullName),i&&i!==this&&!i.options.disabled&&(p.push([e.isFunction(i.options.items)?i.options.items.call(i.element[0],t,{item:this.currentItem}):e(i.options.items,i.element),i]),this.containers.push(i));for(a=p.length-1;a>=0;a--)for(n=p[a][1],l=p[a][0],o=0,c=l.length;c>o;o++)r=e(l[o]),r.data(this.widgetName+"-item",n),d.push({item:r,instance:n,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var a,o,s,i;for(a=this.items.length-1;a>=0;a--)o=this.items[a],o.instance!==this.currentContainer&&this.currentContainer&&o.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?e(this.options.toleranceElement,o.item):o.item,t||(o.width=s.outerWidth(),o.height=s.outerHeight()),i=s.offset(),o.left=i.left,o.top=i.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(a=this.containers.length-1;a>=0;a--)i=this.containers[a].element.offset(),this.containers[a].containerCache.left=i.left,this.containers[a].containerCache.top=i.top,this.containers[a].containerCache.width=this.containers[a].element.outerWidth(),this.containers[a].containerCache.height=this.containers[a].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var a,o=t.options;o.placeholder&&o.placeholder.constructor!==String||(a=o.placeholder,o.placeholder={element:function(){var o=t.currentItem[0].nodeName.toLowerCase(),s=e("<"+o+">",t.document[0]).addClass(a||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===o?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(s)):"tr"===o?t._createTrPlaceholder(t.currentItem,s):"img"===o&&s.attr("src",t.currentItem.attr("src")),a||s.css("visibility","hidden"),s},update:function(e,s){(!a||o.forcePlaceholderSize)&&(s.height()||s.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(o.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),o.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,a){var o=this;t.children().each(function(){e("<td>&#160;</td>",o.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(a)})},_contactContainers:function(t){var a,o,s,i,n,l,r,c,d,p,u=null,m=null;for(a=this.containers.length-1;a>=0;a--)if(!e.contains(this.currentItem[0],this.containers[a].element[0]))if(this._intersectsWith(this.containers[a].containerCache)){if(u&&e.contains(this.containers[a].element[0],u.element[0]))continue;u=this.containers[a],m=a}else this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",t,this._uiHash(this)),this.containers[a].containerCache.over=0);if(u)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(s=1e4,i=null,d=u.floating||this._isFloating(this.currentItem),n=d?"left":"top",l=d?"width":"height",p=d?"clientX":"clientY",o=this.items.length-1;o>=0;o--)e.contains(this.containers[m].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(r=this.items[o].item.offset()[n],c=!1,t[p]-r>this.items[o][l]/2&&(c=!0),s>Math.abs(t[p]-r)&&(s=Math.abs(t[p]-r),i=this.items[o],this.direction=c?"up":"down"));if(!i&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return void(this.currentContainer.containerCache.over||(this.containers[m]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));i?this._rearrange(t,i,null,!0):this._rearrange(t,null,this.containers[m].element,!0),this._trigger("change",t,this._uiHash()),this.containers[m]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",t,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var a=this.options,o=e.isFunction(a.helper)?e(a.helper.apply(this.element[0],[t,this.currentItem])):"clone"===a.helper?this.currentItem.clone():this.currentItem;return o.parents("body").length||e("parent"!==a.appendTo?a.appendTo:this.currentItem[0].parentNode)[0].appendChild(o[0]),o[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!o[0].style.width||a.forceHelperSize)&&o.width(this.currentItem.width()),(!o[0].style.height||a.forceHelperSize)&&o.height(this.currentItem.height()),o},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,a,o,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===s.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===s.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(t=e(s.containment)[0],a=e(s.containment).offset(),o="hidden"!==e(t).css("overflow"),this.containment=[a.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,a.left+(o?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,a.top+(o?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])
},_convertPositionTo:function(t,a){a||(a=this.position);var o="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(s[0].tagName);return{top:a.top+this.offset.relative.top*o+this.offset.parent.top*o-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:s.scrollTop())*o,left:a.left+this.offset.relative.left*o+this.offset.parent.left*o-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:s.scrollLeft())*o}},_generatePosition:function(t){var a,o,s=this.options,i=t.pageX,n=t.pageY,l="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(l[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(i=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(i=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(n=this.containment[3]+this.offset.click.top)),s.grid&&(a=this.originalPageY+Math.round((n-this.originalPageY)/s.grid[1])*s.grid[1],n=this.containment?a-this.offset.click.top>=this.containment[1]&&a-this.offset.click.top<=this.containment[3]?a:a-this.offset.click.top>=this.containment[1]?a-s.grid[1]:a+s.grid[1]:a,o=this.originalPageX+Math.round((i-this.originalPageX)/s.grid[0])*s.grid[0],i=this.containment?o-this.offset.click.left>=this.containment[0]&&o-this.offset.click.left<=this.containment[2]?o:o-this.offset.click.left>=this.containment[0]?o-s.grid[0]:o+s.grid[0]:o)),{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:l.scrollTop()),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:l.scrollLeft())}},_rearrange:function(e,t,a,o){a?a[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!o)})},_clear:function(e,t){function a(e,t,a){return function(o){a._trigger(e,o,t._uiHash(t))}}this.reverting=!1;var o,s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(o in this._storedCSS)("auto"===this._storedCSS[o]||"static"===this._storedCSS[o])&&(this._storedCSS[o]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&s.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||s.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(s.push(function(e){this._trigger("remove",e,this._uiHash())}),s.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),o=this.containers.length-1;o>=0;o--)t||s.push(a("deactivate",this,this.containers[o])),this.containers[o].containerCache.over&&(s.push(a("out",this,this.containers[o])),this.containers[o].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(o=0;s.length>o;o++)s[o].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var a=t||this;return{helper:a.helper,placeholder:a.placeholder||e([]),position:a.position,originalPosition:a.originalPosition,offset:a.positionAbs,item:a.currentItem,sender:t?t.element:null}}})}),!function(e){e.fn.datepicker.dates.es={days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],daysShort:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy",monthsTitle:"Meses",clear:"Borrar",weekStart:1,format:"dd/mm/yyyy"}}(jQuery);var PER_PAGE=15,DEPTOS=["Ahuachapan","Santa Ana","Sonsonate","Chalatenango","La Libertad","San Salvador","Cuscatlan","Cabañas","La Paz","Usulutan","San Vicente","San Miguel","Morazan","La Union"],STUDENT=5,PARENT=1,app=angular.module("cca-client",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","ui.bootstrap","ui.bootstrap.showErrors","angularUtils.directives.dirPagination","LocalStorageModule","ui.sortable","slugifier","localytics.directives","ngImgCrop","summernote","ngCsvImport"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","localStorageServiceProvider",function(e,t,a,o){e.state("index",{url:"/index",templateUrl:"components/templates/index.html",middleware:["Auth"],module:0}).state("login",{url:"/session/login",templateUrl:"components/templates/session/login.html",controller:"LoginCtrl",module:0}).state("logout",{url:"/session/logout",templateUrl:"components/templates/session/login.html",controller:"LogoutCtrl",module:0}).state("catalogs",{"abstract":!0,templateUrl:"components/templates/gn_container.html",module:0}).state("catalogs.schoolyear",{url:"/catalogs/schoolyear",templateUrl:"components/templates/enrollment_years/index.html",controller:"SchoolYearCtrl as sy",middleware:["Auth"],module:4}).state("catalogs.schoolyearnew",{url:"/catalogs/schoolyear/new",templateUrl:"components/templates/enrollment_years/form.html",controller:"SchoolYearNewCtrl as synew",middleware:["Auth"],module:4}).state("catalogs.schoolyearupdate",{url:"/catalogs/schoolyear/update/:id",templateUrl:"components/templates/enrollment_years/form.html",controller:"SchoolYearUpdateCtrl as syupdate",middleware:["Auth"],module:4}).state("catalogs.year",{url:"/catalogs/year",templateUrl:"components/templates/years/index.html",controller:"YearCtrl",middleware:["Auth"],module:5}).state("catalogs.yearnew",{url:"/catalogs/year/new",templateUrl:"components/templates/years/form.html",controller:"YearNewCtrl",middleware:["Auth"],module:5}).state("catalogs.yearupdate",{url:"/catalogs/year/update/:id",templateUrl:"components/templates/years/form.html",controller:"YearUpdateCtrl",middleware:["Auth"],module:5}).state("catalogs.module",{url:"/catalogs/module",templateUrl:"components/templates/modules/index.html",controller:"ModuleCtrl",middleware:["Auth"],module:12}).state("catalogs.modulenew",{url:"/catalogs/module/new",templateUrl:"components/templates/modules/form.html",controller:"ModuleNewCtrl",middleware:["Auth"],module:12}).state("catalogs.moduleupdate",{url:"/catalogs/module/update/:id",templateUrl:"components/templates/modules/form.html",controller:"ModuleUpdateCtrl",middleware:["Auth"],module:12}).state("catalogs.paymenttype",{url:"/catalogs/paymenttype",templateUrl:"components/templates/paymenttypes/index.html",controller:"PaymentTypeCtrl",middleware:["Auth"],module:9}).state("catalogs.paymenttypenew",{url:"/catalogs/paymenttype/new",templateUrl:"components/templates/paymenttypes/form.html",controller:"PaymentTypeNewCtrl",middleware:["Auth"],module:9}).state("catalogs.paymenttypeupdate",{url:"/catalogs/paymenttype/update/:id",templateUrl:"components/templates/paymenttypes/form.html",controller:"PaymentTypeUpdateCtrl",middleware:["Auth"],module:9}).state("catalogs.rol",{url:"/catalogs/rol",templateUrl:"components/templates/roles/index.html",controller:"RolCtrl",middleware:["Auth"],module:13}).state("catalogs.rolnew",{url:"/catalogs/rol/new",templateUrl:"components/templates/roles/form.html",controller:"RolNewCtrl",middleware:["Auth"],module:13}).state("catalogs.rolupdate",{url:"/catalogs/rol/update/:id",templateUrl:"components/templates/roles/form.html",controller:"RolUpdateCtrl",middleware:["Auth"],module:13}).state("catalogs.plan",{url:"/catalogs/plan",templateUrl:"components/templates/plans/index.html",controller:"PlanCtrl",middleware:["Auth"],module:8}).state("catalogs.plannew",{url:"/catalogs/plan/new",templateUrl:"components/templates/plans/form.html",controller:"PlanNewCtrl",middleware:["Auth"],module:8}).state("catalogs.planupdate",{url:"/catalogs/plan/update/:id",templateUrl:"components/templates/plans/form.html",controller:"PlanUpdateCtrl",middleware:["Auth"],module:8}).state("catalogs.fee",{url:"/catalogs/plan/:id/fees",templateUrl:"components/templates/fees/index.html",controller:"FeeCtrl",middleware:["Auth"],module:8}).state("catalogs.feenew",{url:"/catalogs/plan/:id/fees/new",templateUrl:"components/templates/fees/form.html",controller:"FeeNewCtrl",middleware:["Auth"],module:8}).state("catalogs.feeupdate",{url:"/catalogs/plan/:id/fees/:feeid/update",templateUrl:"components/templates/fees/form.html",controller:"FeeUpdateCtrl",middleware:["Auth"],module:8}).state("catalogs.relationshiptype",{url:"/catalogs/relationshiptype",templateUrl:"components/templates/relationshiptypes/index.html",controller:"RelationshipTypeCtrl",middleware:["Auth"],module:10}).state("catalogs.relationshiptypenew",{url:"/catalogs/relationshiptype/new",templateUrl:"components/templates/relationshiptypes/form.html",controller:"RelationshipTypeNewCtrl",middleware:["Auth"],module:10}).state("catalogs.relationshiptypeupdate",{url:"/catalogs/relationshiptype/update/:id",templateUrl:"components/templates/relationshiptypes/form.html",controller:"RelationshipTypeUpdateCtrl",middleware:["Auth"],module:10}).state("catalogs.persontype",{url:"/catalogs/persontype",templateUrl:"components/templates/persontypes/index.html",controller:"PersonTypeCtrl",middleware:["Auth"],module:15}).state("catalogs.persontypenew",{url:"/catalogs/persontype/new",templateUrl:"components/templates/persontypes/form.html",controller:"PersonTypeNewCtrl",middleware:["Auth"],module:15}).state("catalogs.persontypeupdate",{url:"/catalogs/persontype/update/:id",templateUrl:"components/templates/persontypes/form.html",controller:"PersonTypeUpdateCtrl",middleware:["Auth"],module:15}).state("catalogs.section",{url:"/catalogs/section",templateUrl:"components/templates/sections/index.html",controller:"SectionCtrl",middleware:["Auth"],module:6}).state("catalogs.sectionnew",{url:"/catalogs/section/new",templateUrl:"components/templates/sections/form.html",controller:"SectionNewCtrl",middleware:["Auth"],module:6}).state("catalogs.sectionupdate",{url:"/catalogs/section/update/:id",templateUrl:"components/templates/sections/form.html",controller:"SectionUpdateCtrl",middleware:["Auth"],module:6}).state("catalogs.subject",{url:"/catalogs/subject",templateUrl:"components/templates/subjects/index.html",controller:"SubjectCtrl",middleware:["Auth"],module:7}).state("catalogs.subjectnew",{url:"/catalogs/subject/new",templateUrl:"components/templates/subjects/form.html",controller:"SubjectNewCtrl",middleware:["Auth"],module:7}).state("catalogs.subjectupdate",{url:"/catalogs/subject/update/:id",templateUrl:"components/templates/subjects/form.html",controller:"SubjectUpdateCtrl",middleware:["Auth"],module:7}).state("catalogs.customfields",{url:"/catalogs/customfields",templateUrl:"components/templates/customfields/index.html",controller:"CustomfieldCtrl",middleware:["Auth"],module:11}).state("catalogs.customfieldsnew",{url:"/catalogs/customfields/new",templateUrl:"components/templates/customfields/form.html",controller:"CustomfieldNewCtrl",middleware:["Auth"],module:11}).state("catalogs.customfieldsupdate",{url:"/catalogs/customfields/update/:id",templateUrl:"components/templates/customfields/form.html",controller:"CustomfieldUpdateCtrl",middleware:["Auth"],module:11}).state("people",{"abstract":!0,templateUrl:"components/templates/gn_container.html",module:0}).state("people.students",{url:"/people/students",templateUrl:"components/templates/students/index.html",controller:"StudentCtrl",middleware:["Auth"],module:2}).state("people.studentsnew",{url:"/people/students/new",templateUrl:"components/templates/people/form.html",controller:"StudentNewCtrl",middleware:["Auth"],module:2}).state("people.studentsupdate",{url:"/people/students/:id/update",templateUrl:"components/templates/people/form.html",controller:"StudentUpdateCtrl",middleware:["Auth"],module:2}).state("people.studentsrelatives",{url:"/people/students/:id/relatives",templateUrl:"components/templates/people/relativesindex.html",controller:"StudentRelativeCtrl",middleware:["Auth"],module:2}).state("people.studentsrelativesnew",{url:"/people/students/:id/relatives/new",templateUrl:"components/templates/people/relativesform.html",controller:"StudentRelativeNewCtrl",middleware:["Auth"],module:2}).state("people.studentsrelativesupdate",{url:"/people/students/:id/relatives/update/:referral_id",templateUrl:"components/templates/people/relativesform.html",controller:"StudentRelativeUpdateCtrl",middleware:["Auth"],module:2}).state("people.studentsenrollment",{url:"/people/students/:id/enrollment",templateUrl:"components/templates/people/enrollment.html",controller:"StudentEnrollmentCtrl",middleware:["Auth"],module:2}).state("people.studentspayment",{url:"/people/students/:id/payments",templateUrl:"components/templates/people/payments.html",controller:"PaymentCtrl",middleware:["Auth"],module:1}).state("people.paymentscontrol",{url:"/people/paymentscontrol",templateUrl:"components/templates/people/paymentscontrol.html",controller:"PaymentControlCtrl",middleware:["Auth"],module:1}).state("people.users",{url:"/people/users",templateUrl:"components/templates/users/index.html",controller:"UserCtrl",middleware:["Auth"],module:14}).state("people.usersnew",{url:"/people/users/new",templateUrl:"components/templates/users/form.html",controller:"UserNewCtrl",middleware:["Auth"],module:14}).state("people.usersupdate",{url:"/people/users/:id/update",templateUrl:"components/templates/users/form.html",controller:"UserUpdateCtrl",middleware:["Auth"],module:14}).state("people.settings",{url:"/settings",templateUrl:"components/templates/settings/form.html",controller:"SettingCtrl",middleware:["Auth"],module:15}).state("people.expedient",{url:"/people/:id/expedient",templateUrl:"components/templates/people/expedient.html",controller:"PeopleExpedientCtrl",middleware:["Auth"],module:2}).state("people.expedientnew",{url:"/people/:id/expedient/new",templateUrl:"components/templates/people/expedientform.html",controller:"PeopleExpedientNewCtrl",middleware:["Auth"],module:2}).state("people.expedientupdate",{url:"/people/:personId/expedient/:id/update",templateUrl:"components/templates/people/expedientform.html",controller:"PeopleExpedientUpdateCtrl",middleware:["Auth"],module:2}).state("people.tools",{url:"/tools",templateUrl:"components/templates/tools/form.html",controller:"ToolsCtrl",middleware:["Auth"]}).state("reports",{"abstract":!0,templateUrl:"components/templates/gn_container.html",module:0}).state("reports.list",{url:"/reports/list",templateUrl:"components/templates/reports/index.html",controller:"ReportsListCtrl",middleware:["Auth"],module:3}).state("reports.listparams",{url:"/reports/list/:year_id/:report_id",templateUrl:"components/templates/reports/index.html",controller:"ReportsListCtrl",middleware:["Auth"],module:3}).state("reports.new",{url:"/reports/new",templateUrl:"components/templates/reports/form.html",controller:"ReportsNewCtrl",middleware:["Auth"],module:3}).state("reports.update",{url:"/reports/update/:id",templateUrl:"components/templates/reports/form.html",controller:"ReportsUpdateCtrl",middleware:["Auth"],module:3}).state("reports.profile",{url:"/reports/profile/:id/:type",templateUrl:"components/templates/reports/profile.html",controller:"ReportsProfileCtrl",middleware:["Auth"],module:3}).state("reports.jslist",{url:"/reports/jslist",templateUrl:"components/templates/reports/jslist.html",controller:"ReportsJSListCtrl",middleware:["Auth"],module:3}),t.otherwise("/people/paymentscontrol"),a.interceptors.push("ApiInterceptor"),o.setPrefix("CCA")}]);app.run(["localStorageService","$location","$injector","$rootScope","$timeout",function(e,t,a,o,s){e.set("client_id","898dbf1c5fae058fb3475c4d2becfb69"),e.set("client_secret","f8faf35fee4f162889821eb84c6a4181");var i=t.protocol()+"://"+t.host(),n=t.port();"80"!=n&&(i=i+":"+n),i=i.replace("localhost:3000","cca.local"),e.set("baseurl",i),o.$on("$stateChangeStart",function(e,t){function o(e,t){return t&&t.hasOwnProperty("middleware")&&"object"==typeof i.middleware?void angular.forEach(t.middleware,function(a){s(a,t,e)}):void 0}function s(e,t,o){try{a.get(e).run(t,o)}catch(s){console.error("the factory : "+e+" does not exist")}}var i=t;o(e,i)}),o.$on("$stateChangeSuccess",function(){$("#myModal").modal("hide"),s(function(){$("div.modal-backdrop").remove(),$("body").removeClass("modal-open"),$("html, body").animate({scrollTop:0},600)},1e3)})}]),angular.module("cca-client").controller("MainCtrl",["$scope","$state",function(){this.userName="Juan Pérez",this.helloText="Welcome in INSPINIA Gulp SeedProject",this.descriptionText="It is an application skeleton for a typical AngularJS web app. You can use it to quickly bootstrap your angular webapp projects."}]),angular.module("cca-client").controller("YearCtrl",["$scope","$state","Api","Messages","localStorageService","CatalogsAll",function(e,t,a,o,s,i){e.y_data=[],e.pagination={},e.per_page=PER_PAGE,e.sortableOptions={handle:".fa-reorder",stop:function(){var e=$("input.chk").map(function(){return this.value}).get();a.put("catalogs/year/order",{ids:e.join(",")})}},e.get=function(t){var o=angular.element('input[name="keywords"]').val();o=void 0!=o?o.trim():"";var s={page:t,per_page:5e3,keywords:o};a.get("catalogs/year",s).then(function(t){e.y_data=t.data.data,e.pagination=t.data.meta.pagination},function(){}),i.get()},e.addNew=function(){t.go("catalogs.yearnew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=o.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&a.delete("catalogs/year/",{id:t.join(","),per_page:5e3}).then(function(t){e.y_data=t.data.data,e.pagination=t.data.meta.pagination,s.set("year",e.y_data),o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.search=function(){e.get(1)},e.get(1)}]),angular.module("cca-client").controller("YearNewCtrl",["$scope","$state","Api","Flash",function(e,t,a,o){e.Year={},e.activeTitle="Nuevo",e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmYear.$invalid||a.post("catalogs",{Catalog:{catalog:"year",Year:e.Year}}).then(function(){o.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.year")},function(){})}}]),angular.module("cca-client").controller("YearUpdateCtrl",["$scope","$state","$stateParams","Api","Flash",function(e,t,a,o,s){e.Year={},e.activeTitle="Actualizar",e.get=function(){var s=a.id;isNaN(s)?t.go("catalogs.year"):o.get("catalogs/year/"+s).then(function(t){var a=t.data.data;e.Year={id:a.id,name:a.name,description:a.description,order:a.order}},function(){t.go("catalogs.year")})},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmYear.$invalid||o.put("catalogs",{Catalog:{catalog:"year",Year:e.Year}}).then(function(){s.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.year")},function(){})},e.get()}]),angular.module("cca-client").controller("UserCtrl",["$scope","$state","$stateParams","Api","Messages",function(e,t,a,o,s){e.data={},e.pagination={},e.per_page=PER_PAGE,e.get=function(t){var a={page:t,keywords:$("#keywords").val().trim()};o.get("users",a).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination},function(){})},e.search=function(){e.get(1)},e.addNew=function(){t.go("people.usersnew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),a=s.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(a,function(a){if(a&&t.length>0){var i={id:t.join(","),keywords:$("#keywords").val().trim()};o.delete("users/",i).then(function(t){200==t.status&&null==t.data.data.message?(e.data=t.data.data,e.pagination=t.data.meta.pagination,s.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")):(s.error("Error!",t.data.data.message),e.get(1))},function(){})}})},e.get(1)}]),angular.module("cca-client").controller("UserNewCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService","ValidateCF","$timeout",function(e,t,a,o,s,i,n,l){e.activeTitle="Nuevo",e.departamentos=DEPTOS,e.Person={},e.User={},e.CustomFields={},e.createuser=0,e.invalid_rol=0,e.invalid_pass=0,e.Picture={profilePicture:"",profileCroppedPicture:"",pictureSet:!1},e.profilePicturePlaceholder="http://placehold.it/450x450/f1f1f1f1/55555?text=FOTO",e.photoLabel="Agregar foto de perfil",e.roles=i.get("rol"),e.persontypes=i.get("persontype"),_.remove(e.persontypes,function(e){return 5==e.id||1==e.id}),e.getCustomFields=function(){var t=e.Person.person_type_id;o.get("catalogs/customfield/persontype",{persontype:t}).then(function(t){e.customfields=t.data.data,_.forEach(e.customfields,function(t){("select"==t.type||"checkbox"==t.type||"radio"==t.type)&&(t.values=t.values.split(",")),e.CustomFields[t.name]=""})},function(){})},e.save=function(a){if(e.$broadcast("show-errors-check-validity"),!e.frmPerson.date_of_birth.$error.date&&n.validate()&&!e.frmPerson.$invalid&&0!=e.validateUser()){e.Person.country="El Salvador",e.Person.zipcode="503";var i=[];_.forEach(e.customfields,function(t){""!=e.CustomFields[t.name]&&i.push({value:e.CustomFields[t.name],custom_field_id:t.id})});var l={Person:e.Person,CustomFields:i};if($('input[name="date_of_birth"]').val().length>0){var r=$('input[name="date_of_birth"]').val();if(r=moment(r,"DD/MM/YYYY").valueOf(),isNaN(r))return $(".date_of_birth-error-message").parent().addClass("has-error").removeClass("has-success"),void $(".date_of_birth-error-message").show();r=$('input[name="date_of_birth"]').val(),e.Person.date_of_birth=moment(r,"DD/MM/YYYY").format("DD/MM/YYYY"),$(".date_of_birth-error-message").parent().addClass("has-success").removeClass("has-error"),$(".date_of_birth-error-message").hide()}a&&(l.ignore=1),$("#myModal").modal("hide"),$(".modal-backdrop").remove(),$(".btn-save").prop("disabled",!0),o.post("people",l).then(function(a){if($("#myModal").modal("hide"),$(".modal-backdrop").remove(),200!=a.status||null!=a.data.hasDuplicates&&void 0!=a.data.hasDuplicates)200==a.status&&a.data.hasDuplicates?(e.duplicates=a.data.data,$("#myModal").modal("show"),$(".btn-save").prop("disabled",!1)):(s.error("Error!","El nuevo usuario no pudo ser guardado. Por favor aseg&uacute;rese de haber ingresado todos los datos correctamente."),e.frmPerson.date_of_birth.$valid=!0,$(".date_of_birth-error-message").hide(),$(".btn-save").prop("disabled",!1));else{var i=a.data.data;e.createuser?o.post("users",{User:e.User,Person:i}).then(function(){s.success("&Eacute;xito!","El nuevo usuario ha sido registrado."),t.go("people.users")},function(){}):(s.success("&Eacute;xito!","El nuevo usuario ha sido registrado."),t.go("people.users"))}},function(){})}},e.validateUser=function(){if(1==e.createuser){if(0==$('input[name="email"]').val().length)return s.error("Error!","El campo de correo electrónico es obligatorio para crear un usuario con acceso al sistema."),!1;var t=!1;if(void 0==e.User.rol_id&&($('select[name="rol_id"]').parent().addClass("has-error"),e.invalid_rol=1,t=!0),void 0!=e.User.password&&void 0!=e.User.password2?e.User.password!=e.User.password2&&($('input[name="password"]').parent().addClass("has-error"),$('input[name="password2"]').parent().addClass("has-error"),e.invalid_pass=1,t=!0):($('input[name="password"]').parent().addClass("has-error"),$('input[name="password2"]').parent().addClass("has-error"),e.invalid_pass=1,t=!0),t)return!1}},e.validateRol=function(){1==e.createuser&&(void 0==e.User.rol_id&&($('select[name="rol_id"]').parent().addClass("has-error").removeClass("has-success"),e.invalid_rol=1),void 0!=e.User.rol_id&&($('select[name="rol_id"]').parent().removeClass("has-error").addClass("has-success"),e.invalid_rol=0))},e.validatePass=function(){1==e.createuser&&(void 0!=e.User.password&&void 0!=e.User.password2?e.User.password!=e.User.password2?($('input[name="password"]').parent().addClass("has-error").removeClass("has-success"),$('input[name="password2"]').parent().addClass("has-error").removeClass("has-success"),e.invalid_pass=1):($('input[name="password"]').parent().addClass("has-success").removeClass("has-error"),$('input[name="password2"]').parent().addClass("has-success").removeClass("has-error"),e.invalid_pass=0):($('input[name="password"]').parent().addClass("has-error").removeClass("has-success"),$('input[name="password2"]').parent().addClass("has-error").removeClass("has-success"),e.invalid_pass=1))},e.selectPicture=function(){$("#myModalPicture").modal("show")},e.setPicture=function(){e.Picture.profileCroppedPicture.length>0&&(e.Picture.setPicture=!0,$("#selectedImg").attr("src",e.Picture.profileCroppedPicture),e.Person.profile_picture=e.Picture.profileCroppedPicture),$("#myModalPicture").modal("hide"),l(function(){$("div.modal-backdrop").remove()},1e3)};var r=function(t){var a=t.currentTarget.files[0],o=new FileReader;o.onload=function(t){e.$apply(function(e){e.Picture.profilePicture=t.target.result})},o.readAsDataURL(a),e.Picture.pictureSet=!1};angular.element(document.querySelector("#fileInput")).on("change",r),Inputmask("99/99/9999").mask('input[name="date_of_birth"]')}]),angular.module("cca-client").controller("UserUpdateCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService","ValidateCF","$timeout",function(e,t,a,o,s,i,n,l){e.activeTitle="Actualizar",e.departamentos=DEPTOS,e.Person={},e.User={},e.CustomFields={},e.createuser=0,e.invalid_rol=0,e.invalid_pass=0,e.cf_values={},e.Picture={profilePicture:"",profileCroppedPicture:"",pictureSet:!1},e.profilePicturePlaceholder="http://placehold.it/450x450/f1f1f1f1/55555?text=FOTO",e.photoLabel="Cambiar foto de perfil",e.getCustomFields=function(){var t=e.Person.person_type_id;o.get("catalogs/customfield/persontype",{persontype:t}).then(function(t){e.customfields=t.data.data,_.forEach(e.customfields,function(t){("select"==t.type||"checkbox"==t.type||"radio"==t.type)&&(t.values=t.values.split(",")),e.CustomFields[t.name]=""}),e.setCfValues()},function(){})},e.validateUser=function(){if(1==e.createuser){if(0==$('input[name="email"]').val().length)return s.error("Error!","El campo de correo electrónico es obligatorio para crear un usuario con acceso al sistema."),!1;var t=!1;if(void 0==e.User.rol_id&&($('select[name="rol_id"]').parent().addClass("has-error"),e.invalid_rol=1,t=!0),void 0!=e.User.password&&void 0!=e.User.password2?e.User.password!=e.User.password2&&($('input[name="password"]').parent().addClass("has-error"),$('input[name="password2"]').parent().addClass("has-error"),e.invalid_pass=1,t=!0):($('input[name="password"]').parent().addClass("has-error"),$('input[name="password2"]').parent().addClass("has-error"),e.invalid_pass=1,t=!0),t)return!1}},e.validateRol=function(){1==e.createuser&&(void 0==e.User.rol_id&&($('select[name="rol_id"]').parent().addClass("has-error").removeClass("has-success"),e.invalid_rol=1),void 0!=e.User.rol_id&&($('select[name="rol_id"]').parent().removeClass("has-error").addClass("has-success"),e.invalid_rol=0))},e.validatePass=function(){1==e.createuser&&(void 0!=e.User.password&&void 0!=e.User.password2?e.User.password!=e.User.password2?($('input[name="password"]').parent().addClass("has-error").removeClass("has-success"),$('input[name="password2"]').parent().addClass("has-error").removeClass("has-success"),e.invalid_pass=1):($('input[name="password"]').parent().addClass("has-success").removeClass("has-error"),$('input[name="password2"]').parent().addClass("has-success").removeClass("has-error"),e.invalid_pass=0):($('input[name="password"]').parent().addClass("has-error").removeClass("has-success"),$('input[name="password2"]').parent().addClass("has-error").removeClass("has-success"),e.invalid_pass=1))},e.save=function(){if(e.$broadcast("show-errors-check-validity"),n.validate()&&!e.frmPerson.$invalid&&0!=e.validateUser()){e.Person.country="El Salvador",e.Person.zipcode="503";var a=[];_.forEach(e.customfields,function(t){""!=e.CustomFields[t.name]&&a.push({value:e.CustomFields[t.name],custom_field_id:t.id})});var i={Person:e.Person,CustomFields:a};if($('input[name="date_of_birth"]').val().length>0){var l=$('input[name="date_of_birth"]').val();if(l=moment(l,"DD/MM/YYYY").valueOf(),isNaN(l))return $(".date_of_birth-error-message").parent().addClass("has-error").removeClass("has-success"),void $(".date_of_birth-error-message").show();l=$('input[name="date_of_birth"]').val(),e.Person.date_of_birth=moment(l,"DD/MM/YYYY").format("DD/MM/YYYY"),$(".date_of_birth-error-message").parent().addClass("has-success").removeClass("has-error"),$(".date_of_birth-error-message").hide()}$(".btn-save").prop("disabled",!0),o.put("people",i).then(function(a){if(200==a.status){var i=a.data.data;e.createuser?o.post("users",{User:e.User,Person:i}).then(function(){s.success("&Eacute;xito!","El usuario ha sido actualizado."),t.go("people.users"),$(".btn-save").prop("disabled",!1)},function(){}):(s.success("&Eacute;xito!","El usuario ha sido actualizado."),t.go("people.users"))}},function(){$(".btn-save").prop("disabled",!1)})}},e.get=function(){Inputmask("99/99/9999").mask('input[name="date_of_birth"]');var t=a.id;o.get("users/"+t).then(function(t){var a=t.data.data;e.Person={id:a.id,firstname:a.firstname,lastname:a.lastname,middlename:a.middlename,date_of_birth:moment(a.dateOfBirth).format("DD-MM-YYYY"),gender:a.gender,country:a.country,zipcode:a.zipcode,state:a.state,city:a.city,address1:a.address1,address2:a.address2,phone:a.phone,email:a.email,person_type_id:a.personTypeId},a.profilePicture&&(e.profilePicturePlaceholder=a.profilePicture),isNaN(a.dateOfBirth)||!isNaN(a.dateOfBirth)&&parseInt(a.dateOfBirth)>0&&(e.Person.date_of_birth=moment(a.dateOfBirth).format("DD/MM/YYYY"),$('input[name="date_of_birth"]').val(e.Person.date_of_birth)),e.getCustomFields(),e.cf_values=a.customfields,a.rolId&&(e.User.rol_id=a.rolId),e.roles=i.get("rol"),e.persontypes=i.get("persontype"),_.remove(e.persontypes,function(e){return 5==e.id||1==e.id}),l(function(){Inputmask("99/99/9999").mask("input[input-type='date']")},1500)},function(){})},e.setCfValues=function(){_.forEach(e.cf_values,function(t){e.CustomFields[t.name]="number"==t.type?Number(t.value):t.value,"date"==t.type&&Inputmask(t.pattern).mask('input[name="'+t.name+'"]')})},e.selectPicture=function(){$("#myModalPicture").modal("show")
},e.setPicture=function(){e.Picture.profileCroppedPicture.length>0&&(e.Picture.setPicture=!0,$("#selectedImg").attr("src",e.Picture.profileCroppedPicture),e.Person.profile_picture=e.Picture.profileCroppedPicture),$("#myModalPicture").modal("hide"),l(function(){$("div.modal-backdrop").remove()},1e3)};var r=function(t){var a=t.currentTarget.files[0],o=new FileReader;o.onload=function(t){e.$apply(function(e){e.Picture.profilePicture=t.target.result})},o.readAsDataURL(a),e.Picture.pictureSet=!1};angular.element(document.querySelector("#fileInput")).on("change",r),e.get()}]),angular.module("cca-client").controller("ToolsCtrl",["$scope","$cookies","$state","Api","Messages","localStorageService",function(e,t,a,o,s,i){e.frmPromotion={},e.Promotion={},e.frmTalonarios={},e.Talonarios={},e.initPoint=function(){e.enrollmentyears=i.get("enrollmentyear");var t=-1;_.forEach(e.enrollmentyears,function(e,a){e.isActive&&(t=a)}),e.enrollmentyears.splice(t,1)},e.save=function(){if((e.Promotion.students||e.Promotion.paymentplans)&&e.Promotion.enrollment_year_id){if(e.$broadcast("show-errors-check-validity"),e.frmPromotion.$invalid)return;e.Promotion.students?o.post("tools/promoteStudents",{nextEnrollmentYear:e.Promotion.enrollment_year_id,selectedYears:"All"}).then(function(){e.Promotion.paymentplans?e.paymentplan():s.success("&Eacute;xito!","La promoci&oacute;n se realiz&oacute; correctamente.")},function(){s.error("Error!","La promoci&oacute;n no pudo realizarse correctamente. Por favor intente de nuevo m&aacute;s tarde.")}):e.Promotion.paymentplans&&e.paymentplan()}},e.paymentplan=function(){o.post("tools/promotePaymentPlans",{nextEnrollmentYear:e.Promotion.enrollment_year_id}).then(function(){s.success("&Eacute;xito!","La promoci&oacute;n se realiz&oacute; correctamente.")},function(){s.error("Error!","La promoci&oacute;n no pudo realizarse correctamente. Por favor intente de nuevo m&aacute;s tarde.")})},e.generarTalonarios=function(){e.$broadcast("show-errors-check-validity"),e.frmTalonarios.$invalid||e.Talonarios.enrollment_year_id&&o.post("tools/generateTalonarios",{nextEnrollmentYear:e.Talonarios.enrollment_year_id}).then(function(){s.success("&Eacute;xito!","Los talonarios se generaron correctamente.")},function(){s.error("Error!","No se pudo generar los talonarios correctamente. Por favor intente de nuevo m&aacute;s tarde.")})},e.getExcel=function(){if(e.Talonarios.enrollment_year_id){var t=jQuery("#exportframe");t.prop("src",i.get("baseurl")+"/api/v1/tools/createTalonariosReport?nextEnrollmentYear="+e.Talonarios.enrollment_year_id+"&access_token="+i.get("access_token"))}},e.initPoint()}]),angular.module("cca-client").controller("SubjectCtrl",["$scope","$state","Api","Messages","localStorageService","CatalogsAll",function(e,t,a,o,s,i){e.data=[],e.pagination={},e.per_page=PER_PAGE,e.get=function(t){var o=angular.element('input[name="keywords"]').val();o=void 0!=o?o.trim():"";var s={page:t,keywords:o};a.get("catalogs/subject",s).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination},function(){}),i.get()},e.addNew=function(){t.go("catalogs.subjectnew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=o.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&a.delete("catalogs/subject/",{id:t.join(","),per_page:5e3}).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination,s.set("subject",e.data),o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.search=function(){e.get(1)},e.get(1)}]),angular.module("cca-client").controller("SubjectNewCtrl",["$scope","$state","Api","Flash",function(e,t,a,o){e.Subject={},e.activeTitle="Nueva",e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmSubject.$invalid||a.post("catalogs",{Catalog:{catalog:"subject",Subject:e.Subject}}).then(function(){o.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.subject")},function(){})}}]),angular.module("cca-client").controller("SubjectUpdateCtrl",["$scope","$state","$stateParams","Api","Flash",function(e,t,a,o,s){e.Subject={},e.activeTitle="Actualizar",e.get=function(){var s=a.id;isNaN(s)?t.go("catalogs.subject"):o.get("catalogs/subject/"+s).then(function(t){var a=t.data.data;e.Subject={id:a.id,name:a.name,description:a.description}},function(){t.go("catalogs.subject")})},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmSubject.$invalid||o.put("catalogs",{Catalog:{catalog:"subject",Subject:e.Subject}}).then(function(){s.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.subject")},function(){})},e.get()}]),angular.module("cca-client").controller("SettingCtrl",["$scope","$state","Api","Messages",function(e,t,a,o){e.Setting={},e.frmSetting={},e.Customfields={},e.get=function(){a.get("catalogs/settings/1",{}).then(function(t){if(parseInt(t.status)>=200){var a=t.data.data;e.Setting={id:parseInt(a.id),per_page:parseInt(a.per_page),overdue_percentage:parseFloat(a.overdue_percentage),search_fields:a.search_fields},e.Setting.search_fields=a.search_fields.length?e.Setting.search_fields.split(","):[]}},function(){}),a.get("catalogs/customfield/persontype",{persontype:5}).then(function(t){parseInt(t.status)>=200&&(e.Customfields=t.data.data)},function(){})},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmSetting.$invalid||(e.Setting.search_fields=e.Setting.search_fields.length>0?e.Setting.search_fields.join(","):null,a.put("catalogs",{Catalog:{catalog:"settings",Setting:e.Setting}}).then(function(){o.success("&Eacute;xito!","La configuraci&oacute;n se guard&oacute; correctamente."),e.get()},function(){}))},e.get()}]),angular.module("cca-client").controller("SectionCtrl",["$scope","$state","Api","Messages","localStorageService","CatalogsAll",function(e,t,a,o,s,i){e.data=[],e.pagination={},e.per_page=PER_PAGE,e.get=function(t){var o=angular.element('input[name="keywords"]').val();o=void 0!=o?o.trim():"";var s={page:t,keywords:o};a.get("catalogs/section",s).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination},function(){}),i.get()},e.addNew=function(){t.go("catalogs.sectionnew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=o.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&a.delete("catalogs/section/",{id:t.join(","),per_page:5e3}).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination,s.set("section",e.data),o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.search=function(){e.get(1)},e.get(1)}]),angular.module("cca-client").controller("SectionNewCtrl",["$scope","$state","Api","Flash",function(e,t,a,o){e.Section={},e.activeTitle="Nueva",e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmSection.$invalid||a.post("catalogs",{Catalog:{catalog:"section",Section:e.Section}}).then(function(){o.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.section")},function(){})}}]),angular.module("cca-client").controller("SectionUpdateCtrl",["$scope","$state","$stateParams","Api","Flash",function(e,t,a,o,s){e.Section={},e.activeTitle="Actualizar",e.get=function(){var s=a.id;isNaN(s)?t.go("catalogs.section"):o.get("catalogs/section/"+s).then(function(t){var a=t.data.data;e.Section={id:a.id,name:a.name,description:a.description}},function(){t.go("catalogs.section")})},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmSection.$invalid||o.put("catalogs",{Catalog:{catalog:"section",Section:e.Section}}).then(function(){s.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.section")},function(){})},e.get()}]),angular.module("cca-client").controller("SchoolYearCtrl",["$scope","$state","Api","Messages","localStorageService","CatalogsAll",function(e,t,a,o,s,i){e.sy_data=[],e.pagination={},e.per_page=PER_PAGE,e.get=function(t){var o=angular.element('input[name="keywords"]').val();o=void 0!=o?o.trim():"";var s={page:t,keywords:o};a.get("catalogs/enrollmentyear",s).then(function(t){e.sy_data=t.data.data,e.pagination=t.data.meta.pagination},function(){}),i.get()},e.addNew=function(){t.go("catalogs.schoolyearnew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=o.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&a.delete("catalogs/enrollmentyear/",{id:t.join(","),per_page:5e3}).then(function(t){e.sy_data=t.data.data,s.set("enrollmentyear",e.sy_data),e.pagination=t.data.meta.pagination,o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.search=function(){e.get(1)},e.get(1)}]),angular.module("cca-client").controller("SchoolYearNewCtrl",["$scope","$state","Api","Flash","localStorageService",function(e,t,a,o){e.EnrollmentYear={},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmEnrollmentYear.$invalid||a.post("catalogs",{Catalog:{catalog:"enrollmentyear",EnrollmentYear:e.EnrollmentYear}}).then(function(){o.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.schoolyear")},function(){})}}]),angular.module("cca-client").controller("SchoolYearUpdateCtrl",["$scope","$state","$stateParams","Api","Flash",function(e,t,a,o,s){e.EnrollmentYear={},e.get=function(){var s=a.id;isNaN(s)?t.go("catalogs.schoolyear"):o.get("catalogs/enrollmentyear/"+s).then(function(t){var a=t.data.data;e.EnrollmentYear={id:a.id,name:a.name,description:a.description,is_active:a.isActive}},function(){t.go("catalogs.schoolyear")})},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmEnrollmentYear.$invalid||o.put("catalogs",{Catalog:{catalog:"enrollmentyear",EnrollmentYear:e.EnrollmentYear}}).then(function(){s.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.schoolyear")},function(){})},e.get()}]),angular.module("cca-client").controller("RolCtrl",["$scope","$state","Api","Messages","localStorageService","CatalogsAll",function(e,t,a,o,s,i){e.data=[],e.pagination={},e.per_page=PER_PAGE,e.get=function(t){var o=angular.element('input[name="keywords"]').val();o=void 0!=o?o.trim():"";var s={page:t,keywords:o};a.get("catalogs/rol",s).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination},function(){}),i.get()},e.addNew=function(){t.go("catalogs.rolnew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=o.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&a.delete("catalogs/rol/",{id:t.join(","),per_page:5e3}).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination,s.set("rol",e.data),o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.search=function(){e.get(1)},e.get(1)}]),angular.module("cca-client").controller("RolNewCtrl",["$scope","$state","Api","Flash","localStorageService",function(e,t,a,o,s){e.Rol={},e.Modules=s.get("module"),e.activeTitle="Nuevo",e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmRol.$invalid||a.post("catalogs",{Catalog:{catalog:"rol",Rol:e.Rol}}).then(function(s){var i=s.data.data;e.ModulesRol={rol_id:i.id,data:[]},_.forEach(e.ModuleRol,function(t){e.ModulesRol.data.push({module_id:t,rol_id:i.id,writable:1})}),a.post("catalogs/permissions",e.ModulesRol),o.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.rol")},function(){})}}]),angular.module("cca-client").controller("RolUpdateCtrl",["$scope","$state","$stateParams","Api","Flash","localStorageService",function(e,t,a,o,s,i){e.Rol={},e.Modules=i.get("module"),e.activeTitle="Actualizar",e.get=function(){var s=a.id;isNaN(s)?t.go("catalogs.rol"):(o.get("catalogs/rol/"+s).then(function(t){var a=t.data.data;e.Rol={id:a.id,name:a.name,description:a.description}},function(){t.go("catalogs.rol")}),o.get("catalogs/permissions/list/"+s).then(function(t){var a=t.data.data;e.ModuleRol=[],_.forEach(a,function(t){e.ModuleRol.push(t.module_id)})},function(){}))},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmRol.$invalid||o.put("catalogs",{Catalog:{catalog:"rol",Rol:e.Rol}}).then(function(){e.ModulesRol={rol_id:a.id,data:[]},_.forEach(e.ModuleRol,function(t){e.ModulesRol.data.push({module_id:t,rol_id:a.id,writable:1})}),o.post("catalogs/permissions",e.ModulesRol),s.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.rol")},function(){})},e.get()}]);var TABLE={id:{text:"ID",type:"int",width:10,sort:!1},code:{text:"Código",type:"string",width:20,sort:!1},lastname:{text:"Apellidos",type:"string",width:35,sort:!0},firstname:{text:"Nombres",type:"string",width:35,sort:!0},gender:{text:"Sexo",type:"string",width:10,sort:!0},date_of_birth:{text:"Fecha de Nacimiento",type:"date",format:"d-m-Y",width:20,sort:!0},state:{text:"Departamento",type:"string",width:25,sort:!0},city:{text:"Ciudad",type:"string",width:25,sort:!0},enrollment_id:{text:"ID de Matrícula",type:"int",width:20,sort:!1},year_id:{text:"ID de Grado",type:"int",width:15,sort:!0},year_name:{text:"Grado",type:"string",width:20,sort:!0},section_id:{text:"ID de Sección",type:"int",width:20,sort:!1},section_name:{text:"Sección",type:"string",width:20,sort:!0},talonario:{text:"Talonario",type:"string",width:25,sort:!1},enrollment_year_id:{text:"ID de Año Escolar",type:"int",width:15,sort:!0},payment_id:{text:"ID de Pago",type:"int",width:15,sort:!1},payment_base:{text:"Valor de la Colegiatura (USD)",type:"currency",width:25,sort:!1},payment_payed:{text:"Colegiatura Pagada (USD)",type:"currency",width:25,sort:!1},payment_penalty:{text:"Multa Pagada (%)",type:"string",width:25,sort:!1},date_of_payment:{text:"Fecha de Pago",type:"date",format:"d-m-Y",width:20,sort:!0},paymenttype_id:{text:"ID de Forma de Pago",type:"int",width:15,sort:!1},paymenttype_name:{text:"Forma de Pago",type:"string",width:25,sort:!0},paymenttype_discount:{text:"Descuento (USD)",type:"currency",width:25,sort:!1},fee_name:{text:"Concepto",type:"string",width:35,sort:!1},fee_date:{text:"Fecha Última de Pago",type:"date",format:"d-m-Y",width:20,sort:!1},is_mandatory:{text:"Pago Obligatorio",type:"bool",width:15,sort:!1},year_order:{text:"Orden del Grado",type:"int",width:15,sort:!0},fee_order:{text:"Orden de Pago",type:"int",width:15,sort:!0}},COLUMNS=[{value:"code",text:"Código",profile:!0,"default":!0},{value:"lastname",text:"Apellidos",profile:!0,"default":!0},{value:"firstname",text:"Nombre",profile:!0,"default":!0},{value:"gender",text:"Género",profile:!0},{value:"date_of_birth",text:"Fecha de Nacimiento",profile:!0},{value:"address",text:"Dirección",profile:!0},{value:"city",text:"Ciudad",profile:!0,"default":!0},{value:"state",text:"Departamento",profile:!0},{value:"enrollment_year_name",text:"Año Escolar",profile:!1},{value:"talonario",text:"Talonario",profile:!1},{value:"year_name",text:"Grado",profile:!0,"default":!0},{value:"section_name",text:"Sección",profile:!0},{value:"fee_name",text:"Mes de Colegiatura",profile:!1,"default":!0},{value:"payment_payed",text:"Total Pagado (USD)",profile:!1,"default":!0},{value:"payment_penalty",text:"Mora (%)",profile:!1},{value:"paymenttype_discount",text:"Descuento (USD)",profile:!1},{value:"date_of_payment",text:"Fecha de Pago",profile:!1,"default":!0},{value:"paymenttype_name",text:"Forma de Pago",profile:!1}],CATEGORIES=[{value:"payments",text:"Control de Pagos"},{value:"profile",text:"Registro Académico"}],TYPES=[{value:"grid",text:"Detallado"},{value:"chart",text:"Gerencial"}],LAYOUT=[{value:"portrait",text:"Vertical"},{value:"landscape",text:"Horizontal"}],FILTERTYPES=[{value:"and",text:"Todos los filtros deben cumplirse"},{value:"or",text:"Por lo menos un filtro debe cumplirse"}],FILTERS=[{value:"fee_date",text:"Mes de Colegiatura"},{value:"paymenttype_id",text:"Forma de Pago"},{value:"payment_penalty",text:"Pago Puntual (Pago con/sin multa)"},{value:"payment_ontime",text:"Pago al día"},{value:"year_id",text:"Grado"},{value:"section_id",text:"Sección"},{selector:"year_id",value:"student_id",text:"Alumno"},{value:"gender",text:"Género"},{value:"date_of_birth",text:"Año de Nacimiento"},{value:"city",text:"Ciudad"},{value:"state",text:"Departamento"}];angular.module("cca-client").controller("ReportsNewCtrl",["$scope","$state","Api","Messages","localStorageService",function(e,t,a,o,s){e.title="Nuevo Reporte",e.frmReport={},e.formType="new",e.jsonReport={},e.Report={},e.Report.filters=[],e.Report.sorting=[],e.Report.groupby=[],e.availableColumns=[],e.Report.selectedColumns=[],e.Report.type="payments",e.Report.layout="portrait",e.sortableOptions={placeholder:"app",connectWith:".apps-container"},e.columns=_.cloneDeep(COLUMNS),e.categories=_.cloneDeep(CATEGORIES),e.types=_.cloneDeep(TYPES),e.filtertypes=_.cloneDeep(FILTERTYPES),e.filters=_.cloneDeep(FILTERS),e.layout=_.cloneDeep(LAYOUT),e.filtervalues={fee_date:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:[{id:0,name:"Reserva"},{id:1,name:"Matricula+Enero"},{id:2,name:"Febrero"},{id:3,name:"Marzo"},{id:4,name:"Abril"},{id:5,name:"Mayo"},{id:6,name:"Junio"},{id:7,name:"Julio"},{id:8,name:"Agosto"},{id:9,name:"Septiembre"},{id:10,name:"Octubre"},{id:11,name:"Noviembre"},{id:12,name:"Diciembre"}]},paymenttype_id:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:s.get("paymenttype")},payment_penalty:{conditions:[{value:"is",text:"Igual a"}],value:[{value:"0",text:"Pago Puntual"},{value:"1",text:"Pago con Mora"}]},payment_ontime:{conditions:[{value:"is",text:"Igual a"}],value:[{value:"-1",text:"Mostrar todos los alumnos"},{value:"0",text:"Alumnos al día"},{value:"1",text:"Alumnos en mora"}]},year_id:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:s.get("year")},section_id:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:s.get("section")},student_id:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:s.get("year")},gender:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:[{value:"M",text:"Masculino"},{value:"F",text:"Femenino"}]},date_of_birth:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"},{value:">=",text:"Mayor ó igual a"},{value:"<=",text:"Menor ó igual a"}]},city:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:s.get("cities")},state:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:DEPTOS}},e.sorting=[{value:"asc",text:"Ascendente"},{value:"desc",text:"Descendente"}],e.schoolyears=s.get("enrollmentyear"),e.Report.schoolyear=_.find(e.schoolyears,function(e){return e.isActive}),e.Report.schoolyear=e.Report.schoolyear.id,e.years=s.get("year"),e.addFilter=function(){e.Report.filters.push({filter:"",condition:"",value:""})},e.removeFilter=function(t){e.Report.filters.splice(t,1)},e.addSorting=function(){e.Report.sorting.push({sortBy:"",sortOrder:""})},e.removeSorting=function(t){e.Report.sorting.splice(t,1)},e.getStudents=function(t){var o={page:1,per_page:1e3,keywords:"",year:t,section_id:"%",schoolyear:e.Report.schoolyear};a.get("student",o).then(function(t){e.data=t.data.data,e.students=_.flatMap(e.data,function(e){return{id:e.id,name:e.lastname+", "+e.firstname}}),e.students=_.sortBy(e.students,["name"]),e.pagination=t.data.meta.pagination},function(){})},e.setUpColumns=function(){var t=e.Report.type;e.Report.selectedColumns=[],e.availableColumns=_.cloneDeep(e.columns),"profile"==t&&(e.availableColumns=_.filter(e.columns,function(e){return e.profile})),e.Report.selectedColumns=_.remove(e.availableColumns,function(e){return e.default})},e.buildOptions=function(){e.jsonReport={enrollment_year_id:e.Report.schoolyear,name:e.Report.name,description:e.Report.description,type:e.Report.type,format:e.Report.display,layout:e.Report.layout},e.jsonReport.columns=[],_.forEach(e.Report.selectedColumns,function(t){e.jsonReport.columns.push(t.value)})},e.buildFiltering=function(){e.jsonReport.filtertype=e.Report.filtertype,e.jsonReport.filtering=[],_.forEach(e.Report.filters,function(t){e.jsonReport.filtering.push({condition:t.condition,field:t.filter,value:t.value})})},e.buildSorting=function(){e.jsonReport.sorting=[],_.forEach(e.Report.sorting,function(t){e.jsonReport.sorting.push({sortOrder:t.sortOrder,field:t.sortBy})})},e.buildGrouping=function(){e.jsonReport.grouping=[],_.forEach(e.Report.groupby,function(t){e.jsonReport.grouping.push(t)})},e.buildJsonReport=function(){e.buildOptions(),e.buildFiltering(),e.buildSorting(),e.buildGrouping()},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmReport.$invalid||(e.buildJsonReport(),a.post("report",{Report:e.jsonReport}).then(function(){o.success("&Eacute;xito!","El reporte se guard&oacute; correctamente."),t.go("reports.list")},function(){}))},e.init=function(){e.setUpColumns()},e.init()}]),angular.module("cca-client").controller("ReportsUpdateCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService",function(e,t,a,o,s,i){e.title="Actualizar Reporte",e.formType="update",e.frmReport={},e.jsonReport={},e.Report={},e.availableColumns=[],e.Report.type="payments",e.sortableOptions={placeholder:"app",connectWith:".apps-container"},e.columns=_.cloneDeep(COLUMNS),e.categories=_.cloneDeep(CATEGORIES),e.types=_.cloneDeep(TYPES),e.filtertypes=_.cloneDeep(FILTERTYPES),e.filters=_.cloneDeep(FILTERS),e.layout=_.cloneDeep(LAYOUT),e.filtervalues={fee_date:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:[{id:0,name:"Reserva"},{id:1,name:"Matricula+Enero"},{id:2,name:"Febrero"},{id:3,name:"Marzo"},{id:4,name:"Abril"},{id:5,name:"Mayo"},{id:6,name:"Junio"},{id:7,name:"Julio"},{id:8,name:"Agosto"},{id:9,name:"Septiembre"},{id:10,name:"Octubre"},{id:11,name:"Noviembre"},{id:12,name:"Diciembre"}]},paymenttype_id:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:i.get("paymenttype")},payment_penalty:{conditions:[{value:"is",text:"Igual a"}],value:[{value:0,text:"Pago Puntual"},{value:1,text:"Pago con Mora"}]},payment_ontime:{conditions:[{value:"is",text:"Igual a"}],value:[{value:"-1",text:"Mostrar todos los alumnos"},{value:"0",text:"Alumnos al día"},{value:"1",text:"Alumnos en mora"}]},year_id:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:i.get("year")},section_id:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:i.get("section")},student_id:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:i.get("year")},gender:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:[{value:"M",text:"Masculino"},{value:"F",text:"Femenino"}]},date_of_birth:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"},{value:">=",text:"Mayor ó igual a"},{value:"<=",text:"Menor ó igual a"}]},city:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:i.get("cities")},state:{conditions:[{value:"=",text:"Igual a"},{value:"!=",text:"No es igual a"}],value:DEPTOS}},e.sorting=[{value:"asc",text:"Ascendente"},{value:"desc",text:"Descendente"}],e.schoolyears=i.get("enrollmentyear"),e.Report.schoolyear=_.find(e.schoolyears,function(e){return e.isActive}),e.Report.schoolyear=e.Report.schoolyear.id,e.years=i.get("year"),e.addFilter=function(){e.Report.filters.push({filter:"",condition:"",value:""})},e.removeFilter=function(t){e.Report.filters.splice(t,1)},e.addSorting=function(){e.Report.sorting.push({sortBy:"",sortOrder:""})},e.removeSorting=function(t){e.Report.sorting.splice(t,1)},e.getStudents=function(t){var a={page:1,per_page:1e3,keywords:"",year:t,section_id:"%",schoolyear:e.Report.schoolyear};o.get("student",a).then(function(t){e.data=t.data.data,e.students=_.flatMap(e.data,function(e){return{id:e.id,name:e.lastname+", "+e.firstname}}),e.students=_.sortBy(e.students,["name"]),e.pagination=t.data.meta.pagination},function(){})},e.setUpColumns=function(){var t=e.Report.type;e.Report.selectedColumns=[],e.availableColumns=_.cloneDeep(e.columns),"profile"==t&&(e.availableColumns=_.cloneDeep(_.filter(e.columns,function(e){return e.profile}))),e.Report.selectedColumns=_.remove(e.availableColumns,function(e){return e.default})},e.buildOptions=function(){e.jsonReport={enrollment_year_id:e.Report.schoolyear,name:e.Report.name,description:e.Report.description,type:e.Report.type,format:e.Report.display,layout:e.Report.layout},e.jsonReport.columns=[],_.forEach(e.Report.selectedColumns,function(t){e.jsonReport.columns.push(t.value)})},e.buildFiltering=function(){e.jsonReport.filtertype=e.Report.filtertype,e.jsonReport.filtering=[],_.forEach(e.Report.filters,function(t){e.jsonReport.filtering.push({condition:t.condition,field:t.filter,value:t.value})})},e.buildSorting=function(){e.jsonReport.sorting=[],_.forEach(e.Report.sorting,function(t){e.jsonReport.sorting.push({sortOrder:t.sortOrder,field:t.sortBy})})},e.buildGrouping=function(){e.jsonReport.grouping=[],_.forEach(e.Report.groupby,function(t){e.jsonReport.grouping.push(t)})},e.buildJsonReport=function(){e.buildOptions(),e.buildFiltering(),e.buildSorting(),e.buildGrouping()},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmReport.$invalid||(e.buildJsonReport(),o.put("report/"+a.id,{Report:e.jsonReport}).then(function(){s.success("&Eacute;xito!","El reporte se guard&oacute; correctamente.")},function(){}))},e.getReport=function(){var t=a.id;o.get("report/"+t,{}).then(function(t){var a=t.data.data.report;e.Report={schoolyear:a.enrollment_year_id,name:a.name,description:void 0!=a.description?a.description:"",type:a.type,display:a.format,filtertype:a.filtertype,layout:void 0!=a.layout?a.layout:""},e.setUpColumns(),e.Report.selectedColumns=[],_.forEach(a.columns,function(t){var a=_.find(COLUMNS,function(e){return e.value==t});e.Report.selectedColumns.push(a)}),_.forEach(e.Report.selectedColumns,function(t){_.remove(e.availableColumns,function(e){return e.value==t.value})}),e.Report.filters=[],_.forEach(a.filtering,function(t){e.Report.filters.push({filter:t.field,condition:t.condition,value:t.value})}),e.Report.sorting=[],_.forEach(a.sorting,function(t){e.Report.sorting.push({sortBy:t.field,sortOrder:t.sortOrder})}),e.Report.groupby=[],_.forEach(a.grouping,function(t){e.Report.groupby.push(t)})},function(){})},e.init=function(){e.getReport()},e.reportId=a.id,e.init()}]),angular.module("cca-client").controller("ReportsListCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService","CatalogsAll",function(e,t,a,o,s,i){e.Report={},e.table=TABLE,e.columns=COLUMNS,e.grouped=!1,e.colspan=0,e.schoolyears=i.get("enrollmentyear"),e.schoolyear=_.find(e.schoolyears,function(e){return e.isActive}),e.schoolyear=e.schoolyear.id,e.init=function(){void 0!=a.year_id&&null!=a.year_id&&(e.schoolyear=parseInt(a.year_id)),o.get("report",{per_page:5e3,enrollment_year_id:e.schoolyear}).then(function(t){e.reports=t.data.data;t.data.pagination;void 0!=a.report_id&&null!=a.report_id&&(e.selectedReport=parseInt(a.report_id),e.display())},function(){})},e.createReport=function(){t.go("reports.new")},e.display=function(){_.isNumber(e.selectedReport)&&($(".table-content").hide(),$(".progress").show(),o.get("report/display/"+e.selectedReport,{format:"json"}).then(function(t){e.Report=t.data.data,e.data=_.cloneDeep(t.data.data.data),e.colspan=e.Report.report.columns.length,e.grouped=e.Report.report.groupingFields.length>0?!0:!1,$(".progress").hide(),$(".table-content").show()},function(){}))},e.getExcel=function(){if(_.isNumber(e.selectedReport)){var t=jQuery("#exportframe");t.prop("src",i.get("baseurl")+"/api/v1/report/display/"+e.selectedReport+"?format=spreadsheet&access_token="+i.get("access_token"))}},e.listReports=function(){e.init()},e.editReport=function(){_.isNumber(e.selectedReport)&&t.go("reports.update",{id:e.selectedReport})},$(".progress").hide(),e.init()}]),angular.module("cca-client").controller("ReportsProfileCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService",function(e,t,a,o,s,i){e.schoolyears=i.get("enrollmentyear"),e.schoolyear=_.find(e.schoolyears,function(e){return e.isActive}),e.schoolyear=e.schoolyear.id,e.title="",e.init=function(){o.get("report/profile/"+a.id,{person_type:a.type,enrollment_year_id:e.schoolyear}).then(function(t){e.data=t.data.data,e.person=e.data.person,e.enrollment=e.data.enrollment,e.parents=e.data.parents,e.payments=e.data.payments,e.siblings=e.data.siblings,e.title=e.data.person.firstname+" "+e.data.person.lastname},function(){})},e.init()}]),angular.module("cca-client").controller("ReportsJSListCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService","CatalogsAll",function(e,t,a,o,s,i){e.schoolyears=i.get("enrollmentyear"),e.schoolyear=_.find(e.schoolyears,function(e){return e.isActive}),e.schoolyear=e.schoolyear.id,e.extensions=[{id:"html",name:"Vista Previa"},{id:"pdf",name:"PDF"},{id:"xlsx",name:"Microsoft Excel"},{id:"docx",name:"Microsoft Word"},{id:"csv",name:"CSV"},{id:"rtf",name:"RTF"}],e.filters={YEAR_ID:i.get("year"),YEAR_NAME:"",SECTION_ID:i.get("section"),SECTION_NAME:"",FEE_ID:0,FEE_NAME:"",FEE_DATE:"",ENROLLMENT_YEAR_ID:i.get("enrollmentyear"),START_DATE:moment().format("01-MM-YYYY"),END_DATE:moment().format("DD-MM-YYYY"),FECHA_DE_PAGO:moment().format("DD-MM-YYYY"),TODAY:"",PAYMENT_TYPE_ID:i.get("paymenttype"),PAYMENT_TYPE_NAME:""},e.reportList=[],e.JSReports={reportUri:"",extension:"html",YEAR_ID:0,YEAR_NAME:"",SECTION_ID:0,SECTION_NAME:"",FEE_ID:0,FEE_NAME:"",FEE_DATE:"",ENROLLMENT_YEAR_ID:e.schoolyear,START_DATE:moment().format("YYYY-MM-01"),END_DATE:moment().format("YYYY-MM-DD"),FECHA_DE_PAGO:moment().format("YYYY-MM-DD"),TODAY:"",PAYMENT_TYPE_ID:0,PAYMENT_TYPE_NAME:""},e.$watch("JSReports.ENROLLMENT_YEAR_ID",function(){e.JSReports.hasOwnProperty("FEE_DATE")&&e.getFeeDates()}),e.emptyFilters=function(){for(var t in e.JSReports)"reportUri"!=t&&"extension"!=t&&"ENROLLMENT_YEAR_ID"!=t&&delete e.JSReports[t]},e.addFilters=function(t){for(var a in t)"ENROLLMENT_YEAR_ID"!=t[a]&&(e.JSReports[t[a]]="");setTimeout(function(){$('input[name="START_DATE"]')&&$('input[name="END_DATE"]')&&(Inputmask("99/99/9999").mask('input[name="START_DATE"]'),Inputmask("99/99/9999").mask('input[name="END_DATE"]'),Inputmask("99/99/9999").mask('input[name="FECHA_DE_PAGO"]'))},1e3)},e.getList=function(){o.get("report/list",{folderUri:"/Reports/Production",type:"reportUnit"}).then(function(t){if(Array.isArray(t.data.data)){var a=t.data.data;a.length>0&&(e.reportList=a,e.emptyFilters())}},function(){})},e.getReportParams=function(){o.get("report/getreportparams",{reportUri:e.JSReports.reportUri}).then(function(t){var a=t.data.data;e.emptyFilters(),Array.isArray(a)&&a.length>0&&e.addFilters(a)},function(){})},e.getFees=function(){e.JSReports.YEAR_ID>0&&e.JSReports.ENROLLMENT_YEAR_ID>0&&o.get("feebyyear",{year_id:e.JSReports.YEAR_ID,enrollment_year_id:e.JSReports.ENROLLMENT_YEAR_ID}).then(function(t){var a=t.data.data;e.filters.FEE_ID=a},function(){})},e.getFeeDates=function(){e.JSReports.ENROLLMENT_YEAR_ID>0&&o.get("tools/getfees",{enrollment_year_id:e.JSReports.ENROLLMENT_YEAR_ID}).then(function(t){var a=t.data.data;e.filters.FEE_DATE=a},function(){})},e.askForReport=function(){if(e.$broadcast("show-errors-check-validity"),!(e.frmReport.hasOwnProperty("START_DATE")&&e.frmReport.START_DATE.$error.required||e.frmReport.hasOwnProperty("END_DATE")&&e.frmReport.END_DATE.$error.required||e.frmReport.hasOwnProperty("FECHA_DE_PAGO")&&e.frmReport.FECHA_DE_PAGO.$error.required||e.frmReport.$invalid)){var t=[];for(var a in e.JSReports)if("YEAR_ID"==a){var o=_.find(e.filters.YEAR_ID,{id:e.JSReports.YEAR_ID});
t.push("YEAR_ID="+e.JSReports.YEAR_ID),t.push("YEAR_NAME="+o.name.toUpperCase())}else if("SECTION_ID"==a){var s=_.find(e.filters.SECTION_ID,{id:e.JSReports.SECTION_ID});t.push("SECTION_ID="+e.JSReports.SECTION_ID),t.push("SECTION_NAME="+s.name)}else if("FEE_NAME"==a&&e.JSReports.hasOwnProperty("FEE_ID")){var n=_.find(e.filters.FEE_ID,{id:e.JSReports.FEE_ID});t.push("FEE_ID="+e.JSReports.FEE_ID),t.push("FEE_NAME="+n.name)}else if("FEE_NAME"==a&&e.JSReports.hasOwnProperty("FEE_DATE")){var n=_.find(e.filters.FEE_DATE,{fee_date:e.JSReports.FEE_DATE});t.push("FEE_DATE="+e.JSReports.FEE_DATE),t.push("FEE_NAME="+n.name)}else if("FECHA_DE_PAGO"==a)moment.locale("es"),t.push("FECHA_DE_PAGO="+moment(e.JSReports.FECHA_DE_PAGO,"DD/MM/YYYY").format("YYYY-MM-DD")),t.push("TODAY="+moment(e.JSReports.FECHA_DE_PAGO,"DD/MM/YYYY").format("DD/MM/YYYY"));else if("PAYMENT_TYPE_ID"==a){t.push("PAYMENT_TYPE_ID=("+e.JSReports.PAYMENT_TYPE_ID.join(",")+")");var l=[];for(var r in e.JSReports.PAYMENT_TYPE_ID){var c=_.find(e.filters.PAYMENT_TYPE_ID,{id:e.JSReports.PAYMENT_TYPE_ID[r]});l.push(c.name)}t.push("PAYMENT_TYPE_NAME="+l.join(", "))}else"START_DATE"==a?t.push("START_DATE="+moment(e.JSReports.START_DATE,"DD/MM/YYYY").format("YYYY-MM-DD")):"END_DATE"==a?t.push("END_DATE="+moment(e.JSReports.END_DATE,"DD/MM/YYYY").format("YYYY-MM-DD")):"YEAR_NAME"!=a&&"SECTION_NAME"!=a&&"PAYMENT_TYPE_NAME"!=a&&"FEE_NAME"!=a&&"TODAY"!=a&&t.push(a+"="+e.JSReports[a]);t=t.join("&");var d=jQuery("#exportframe");"pdf"!=e.JSReports.extension&&"html"!=e.JSReports.extension?d.prop("src",i.get("baseurl")+"/api/v1/report/run?"+t+"&access_token="+i.get("access_token")):window.open(i.get("baseurl")+"/api/v1/report/run?"+t+"&access_token="+i.get("access_token"),"CCA","resizable=yes,scrollbars=yes,status=yes")}},e.getList()}]),angular.module("cca-client").controller("RelationshipTypeCtrl",["$scope","$state","Api","Messages","localStorageService","CatalogsAll",function(e,t,a,o,s,i){e.data=[],e.pagination={},e.per_page=PER_PAGE,e.get=function(t){var o=angular.element('input[name="keywords"]').val();o=void 0!=o?o.trim():"";var s={page:t,keywords:o};a.get("catalogs/relationshiptype",s).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination},function(){}),i.get()},e.addNew=function(){t.go("catalogs.relationshiptypenew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=o.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&a.delete("catalogs/relationshiptype/",{id:t.join(","),per_page:5e3}).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination,s.set("relationshiptype",e.data),o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.search=function(){e.get(1)},e.get(1)}]),angular.module("cca-client").controller("RelationshipTypeNewCtrl",["$scope","$state","Api","Flash",function(e,t,a,o){e.RelationshipType={},e.activeTitle="Nuevo",e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmRelationshipType.$invalid||a.post("catalogs",{Catalog:{catalog:"relationshiptype",RelationshipType:e.RelationshipType}}).then(function(){o.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.relationshiptype")},function(){})}}]),angular.module("cca-client").controller("RelationshipTypeUpdateCtrl",["$scope","$state","$stateParams","Api","Flash",function(e,t,a,o,s){e.RelationshipType={},e.activeTitle="Actualizar",e.get=function(){var s=a.id;isNaN(s)?t.go("catalogs.relationshiptype"):o.get("catalogs/relationshiptype/"+s).then(function(t){var a=t.data.data;e.RelationshipType={id:a.id,name:a.name,description:a.description}},function(){t.go("catalogs.relationshiptype")})},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmRelationshipType.$invalid||o.put("catalogs",{Catalog:{catalog:"relationshiptype",RelationshipType:e.RelationshipType}}).then(function(){s.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.relationshiptype")},function(){})},e.get()}]),angular.module("cca-client").controller("PlanCtrl",["$scope","$state","Api","Messages","localStorageService",function(e,t,a,o,s){e.activeTitle="Planes de Pago",e.per_page=PER_PAGE,e.schoolyears=s.get("enrollmentyear"),e.schoolyear=_.find(e.schoolyears,function(e){return e.isActive}),e.schoolyear=e.schoolyear.id,e.get=function(t){var o={per_page:PER_PAGE,page:t,keywords:$("#keywords").val().trim(),enrollment_year_id:e.schoolyear};a.get("plan",o).then(function(t){e.plans=t.data.data,e.pagination=t.data.meta.pagination},function(){})},e.search=function(){e.get(1)},e.addNew=function(){t.go("catalogs.plannew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),s=o.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(s,function(s){s&&t.length>0&&a.delete("plan",{id:t.join(","),per_page:5e3}).then(function(t){e.plans=t.data.data,e.pagination=t.data.meta.pagination,o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.get(1)}]),angular.module("cca-client").controller("PlanNewCtrl",["$scope","$state","Api","Messages","localStorageService","ValidateCF",function(e,t,a,o,s){e.activeTitle="Nuevo",e.PaymentPlan={},e.frmPaymentPlan={},e.syears=s.get("year"),e.schoolyears=s.get("enrollmentyear"),e.schoolyear=_.find(e.schoolyears,function(e){return e.isActive}),e.PaymentPlan.enrollment_year_id=e.schoolyear.id,e.save=function(){if(e.$broadcast("show-errors-check-validity"),!e.frmPaymentPlan.$invalid){var s=e.PaymentPlan.years;if(Array.isArray(s)){var i={code:e.PaymentPlan.code,name:e.PaymentPlan.name,description:e.PaymentPlan.description,enrollment_fee:e.PaymentPlan.enrollment_fee,cover:e.PaymentPlan.cover,enrollment_year_id:e.PaymentPlan.enrollment_year_id};a.post("plan",{Plan:i,Years:s}).then(function(e){200==e.status&&(o.success("&Eacute;xito!","El nuevo plan ha sido guardado."),t.go("catalogs.plan"))},function(){})}}}}]),angular.module("cca-client").controller("PlanUpdateCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService","ValidateCF",function(e,t,a,o,s,i){e.activeTitle="Actualizar",e.PaymentPlan={},e.frmPaymentPlan={},e.syears=i.get("year"),e.schoolyears=i.get("enrollmentyear"),e.schoolyear=_.find(e.schoolyears,function(e){return e.isActive}),e.PaymentPlan.enrollment_year_id=e.schoolyear.id,e.get=function(){var t=a.id;o.get("plan/"+t).then(function(t){var a=t.data.data;e.PaymentPlan={id:a.id,code:a.code,name:a.name,description:a.description,enrollment_fee:a.enrollment_fee,cover:a.cover,enrollment_year_id:a.enrollment_year_id,years:_.map(a.years,"id")}},function(){})},e.save=function(){if(e.$broadcast("show-errors-check-validity"),!e.frmPaymentPlan.$invalid){var a=e.PaymentPlan.years;if(Array.isArray(a)){var i={id:e.PaymentPlan.id,code:e.PaymentPlan.code,name:e.PaymentPlan.name,description:e.PaymentPlan.description,enrollment_fee:e.PaymentPlan.enrollment_fee,cover:e.PaymentPlan.cover,enrollment_year_id:e.PaymentPlan.enrollment_year_id};o.put("plan",{Plan:i,Years:a}).then(function(e){200==e.status&&(s.success("&Eacute;xito!","El nuevo plan ha sido guardado."),t.go("catalogs.plan"))},function(){})}}},e.get()}]),angular.module("cca-client").controller("FeeCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService",function(e,t,a,o,s){e.per_page=PER_PAGE,e.get=function(t){var s={per_page:PER_PAGE,page:t,keywords:$("#keywords").val().trim(),payment_plan_id:a.id};o.get("fee",s).then(function(t){e.fees=t.data.data,e.pagination=t.data.meta.pagination},function(){}),o.get("plan/"+a.id,{}).then(function(t){e.plan=t.data.data},function(){})},e.sortableOptions={handle:".fa-reorder",stop:function(){var e=$("input.chk").map(function(){return this.value}).get();o.put("fee/order",{id:e.join(",")})}},e.search=function(){e.get(1)},e.addNew=function(){t.go("catalogs.feenew",{id:e.plan.id})},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=s.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&o.delete("fee",{id:t.join(","),payment_plan_id:a.id}).then(function(t){e.fees=t.data.data,e.pagination=t.data.meta.pagination,s.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.get(1)}]),angular.module("cca-client").controller("FeeNewCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService",function(e,t,a,o,s){e.activeTitle="Nueva",e.Fee={},e.Fee.payment_plan_id=a.id,e.Fee.is_mandatory=1,e.get=function(){o.get("plan/"+a.id,{}).then(function(t){e.plan=t.data.data},function(){})},e.save=function(){if(e.$broadcast("show-errors-check-validity"),$('input[name="fee_date"]').val().length>0){var a=$('input[name="fee_date"]').val();e.Fee.fee_date=moment(a,"DD-MM-YYYY").format("YYYY-MM-DD")}e.frmFee.$invalid||o.post("fee",{Fee:e.Fee}).then(function(a){200==a.status&&(s.success("&Eacute;xito!","La nueva colegiatura ha sido guardada."),t.go("catalogs.fee",{id:e.plan.id}))},function(){})},e.get()}]),angular.module("cca-client").controller("FeeUpdateCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService",function(e,t,a,o,s){e.activeTitle="Actualizar",e.Fee={},e.get=function(){o.get("plan/"+a.id,{}).then(function(t){e.plan=t.data.data},function(){}),o.get("fee/"+a.feeid,{}).then(function(t){if(200==t.status){var a=t.data.data;e.Fee={id:a.id,name:a.name,description:a.description,value:a.value,fee_date:moment(a.feeDate).format("DD-MM-YYYY"),is_mandatory:a.isMandatory,is_enrollment_fee:a.isEnrollmentFee,is_cover:a.isCover,order:a.order,payment_plan_id:a.payment_plan_id},$('input[name="fee_date"]').datepicker("update",new Date(a.feeDate))}},function(){})},e.save=function(){if(e.$broadcast("show-errors-check-validity"),$('input[name="fee_date"]').val().length>0){var a=$('input[name="fee_date"]').val();e.Fee.fee_date=moment(a,"DD-MM-YYYY").format("YYYY-MM-DD")}e.frmFee.$invalid||o.put("fee",{Fee:e.Fee}).then(function(a){200==a.status&&(s.success("&Eacute;xito!","El registro de la colegiatura ha sido guardado."),t.go("catalogs.fee",{id:e.plan.id}))},function(){})},e.get()}]),angular.module("cca-client").controller("PersonTypeCtrl",["$scope","$state","Api","Messages","localStorageService","CatalogsAll",function(e,t,a,o,s,i){e.data=[],e.pagination={},e.per_page=PER_PAGE,e.get=function(t){var o=angular.element('input[name="keywords"]').val();o=void 0!=o?o.trim():"";var s={page:t,keywords:o};a.get("catalogs/persontype",s).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination},function(){}),i.get()},e.addNew=function(){t.go("catalogs.persontypenew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=o.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&a.delete("catalogs/persontype/",{id:t.join(","),per_page:5e3}).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination,s.set("persontype",e.data),o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.search=function(){e.get(1)},e.get(1)}]),angular.module("cca-client").controller("PersonTypeNewCtrl",["$scope","$state","Api","Flash",function(e,t,a,o){e.PersonType={},e.activeTitle="Nuevo",e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmPersonType.$invalid||a.post("catalogs",{Catalog:{catalog:"persontype",PersonType:e.PersonType}}).then(function(){o.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.persontype")},function(){})}}]),angular.module("cca-client").controller("PersonTypeUpdateCtrl",["$scope","$state","$stateParams","Api","Flash",function(e,t,a,o,s){e.PersonType={},e.activeTitle="Actualizar",e.get=function(){var s=a.id;isNaN(s)?t.go("catalogs.persontype"):o.get("catalogs/persontype/"+s).then(function(t){var a=t.data.data;e.PersonType={id:a.id,name:a.name,description:a.description}},function(){t.go("catalogs.persontype")})},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmPersonType.$invalid||o.put("catalogs",{Catalog:{catalog:"persontype",PersonType:e.PersonType}}).then(function(){s.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.persontype")},function(){})},e.get()}]),angular.module("cca-client").controller("StudentCtrl",["$scope","$state","Api","Messages","localStorageService",function(e,t,a,o,s){e.years=s.get("year"),e.years=_.orderBy(e.years,["order"],["asc"]),e.year="",e.schoolyears=s.get("enrollmentyear"),e.schoolyear=_.find(e.schoolyears,function(e){return e.isActive}),e.schoolyear=e.schoolyear.id,e.sections=s.get("section"),e.section_id="%",e.data={},e.pagination={},e.per_page=PER_PAGE,e.profilePicturePlaceholder="http://placehold.it/50x50/f1f1f1f1/55555?text=NOFOTO",e.get=function(t){var o={page:t,keywords:$("#keywords").val().trim(),year:e.year,section_id:e.section_id,schoolyear:e.schoolyear};a.get("student",o).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination},function(){})},e.search=function(){e.get(1)},e.addNew=function(){t.go("people.studentsnew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),s=o.confirm("&iquest;Est&aacute; seguro?","Si existen pagos asociados al registro del alumno la matrícula no podrá ser eliminada. Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(s,function(s){if(s&&t.length>0){var i={id:t.join(","),keywords:$("#keywords").val().trim(),year:e.year,schoolyear:e.schoolyear};a.delete("enrollment/",i).then(function(t){200==t.status&&null==t.data.data.message?(e.data=t.data.data,e.pagination=t.data.meta.pagination,o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")):(o.error("Error!",t.data.data.message),e.get(1))},function(){})}})},e.get(1)}]),angular.module("cca-client").controller("StudentNewCtrl",["$scope","$state","Api","Messages","ValidateCF","$timeout",function(e,t,a,o,s,i){e.activeTitle="Nuevo",e.departamentos=DEPTOS,e.Person={},e.CustomFields={},e.Picture={profilePicture:"",profileCroppedPicture:"",pictureSet:!1},e.profilePicturePlaceholder="http://placehold.it/450x450/f1f1f1f1/55555?text=FOTO",e.photoLabel="Agregar foto de perfil",e.save=function(n){if(e.$broadcast("show-errors-check-validity"),!e.frmPerson.date_of_birth.$error.date&&s.validate()&&!e.frmPerson.$invalid){if($('input[name="date_of_birth"]').val().length>0){var l=$('input[name="date_of_birth"]').val();if(l=moment(l,"DD/MM/YYYY").valueOf(),isNaN(l)||0>=l)return $(".date_of_birth-error-message").parent().addClass("has-error").removeClass("has-success"),void $(".date_of_birth-error-message").show();$(".date_of_birth-error-message").parent().addClass("has-success").removeClass("has-error"),$(".date_of_birth-error-message").hide()}e.Person.person_type_id=STUDENT,e.Person.country="El Salvador",e.Person.zipcode="503";var r=[];_.forEach(e.customfields,function(t){""!=e.CustomFields[t.name]&&r.push({value:e.CustomFields[t.name],custom_field_id:t.id})});var c={Person:e.Person,CustomFields:r};n&&(c.ignore=1),$(".btn-save").prop("disabled",!0),a.post("people",c).then(function(a){n&&($("#myModal").modal("hide"),i(function(){$("div.modal-backdrop").remove()},1e3)),200!=a.status||null!=a.data.hasDuplicates&&void 0!=a.data.hasDuplicates?200==a.status&&a.data.hasDuplicates?(e.duplicates=a.data.data,$("#myModal").modal("show")):(o.error("Error!","El registro del alumno no pudo ser guardado. Por favor aseg&uacute;rese de haber ingresado todos los datos correctamente."),$(".btn-save").prop("disabled",!1)):(o.success("&Eacute;xito!","El alumno ha sido registrado."),t.go("people.studentsenrollment",{id:a.data.data.id}))},function(){})}},e.getCustomFields=function(t){a.get("catalogs/customfield/persontype",{persontype:t}).then(function(t){e.customfields=t.data.data,_.forEach(e.customfields,function(t){("select"==t.type||"checkbox"==t.type||"radio"==t.type)&&(t.values=t.values.split(",")),e.CustomFields[t.name]=""})},function(){})},e.selectPicture=function(){$("#myModalPicture").modal("show")},e.setPicture=function(){e.Picture.profileCroppedPicture.length>0&&(e.Picture.setPicture=!0,$("#selectedImg").attr("src",e.Picture.profileCroppedPicture),e.Person.profile_picture=e.Picture.profileCroppedPicture),$("#myModalPicture").modal("hide"),i(function(){$("div.modal-backdrop").remove()},1e3)};var n=function(t){var a=t.currentTarget.files[0],o=new FileReader;o.onload=function(t){e.$apply(function(e){e.Picture.profilePicture=t.target.result})},o.readAsDataURL(a),e.Picture.pictureSet=!1};angular.element(document.querySelector("#fileInput")).on("change",n),Inputmask("99/99/9999").mask('input[name="date_of_birth"]'),e.getCustomFields(5)}]),angular.module("cca-client").controller("StudentUpdateCtrl",["$scope","$state","$stateParams","Api","Messages","ValidateCF","$timeout",function(e,t,a,o,s,i,n){e.activeTitle="Actualizar",e.departamentos=DEPTOS,e.Person={},e.CustomFields={},e.Picture={profilePicture:"",profileCroppedPicture:"",pictureSet:!1},e.profilePicturePlaceholder="http://placehold.it/450x450/f1f1f1f1/55555?text=FOTO",e.photoLabel="Cambiar foto de perfil",e.get=function(){Inputmask("99/99/9999").mask('input[name="date_of_birth"]');var t=a.id;o.get("people/"+t).then(function(t){if(200==t.status){var a=t.data.data;e.getCustomFields(a.personTypeId),e.Person={id:a.id,firstname:a.firstname,lastname:a.lastname,middlename:a.middlename,gender:a.gender.trim(),country:a.country,zipcode:a.zipcode,state:a.state,city:a.city,address1:a.address1,address2:a.address2,phone:a.phone,email:a.email},a.profilePicture&&(e.profilePicturePlaceholder=a.profilePicture),isNaN(a.dateOfBirth)||!isNaN(a.dateOfBirth)&&parseInt(a.dateOfBirth)>0&&(e.Person.date_of_birth=moment(a.dateOfBirth).format("DD/MM/YYYY"),$('input[name="date_of_birth"]').val(e.Person.date_of_birth)),_.forEach(a.customfields,function(t){e.CustomFields[t.name]=t.value,"date"==t.type&&$('input[name="'+t.name+'"]').datepicker("update",new Date(t.value))}),e.activeTitle=e.Person.firstname+" "+e.Person.lastname}},function(){}),e.getCustomFields=function(t){o.get("catalogs/customfield/persontype",{persontype:t}).then(function(t){e.customfields=t.data.data,_.forEach(e.customfields,function(t){("select"==t.type||"checkbox"==t.type||"radio"==t.type)&&(t.values=t.values.split(",")),e.CustomFields.hasOwnProperty(t.name)||(e.CustomFields[t.name]="")})},function(){})}},e.save=function(){if(e.$broadcast("show-errors-check-validity"),i.validate()&&!e.frmPerson.$invalid){if($('input[name="date_of_birth"]').val().length>0){var t=$('input[name="date_of_birth"]').val();if(t=moment(t,"DD/MM/YYYY").valueOf(),isNaN(t)||0>=t)return $(".date_of_birth-error-message").parent().addClass("has-error").removeClass("has-success"),void $(".date_of_birth-error-message").show();$(".date_of_birth-error-message").parent().addClass("has-success").removeClass("has-error"),$(".date_of_birth-error-message").hide()}e.Person.person_type_id=STUDENT,e.Person.country="El Salvador",e.Person.zipcode="503";var a=[];_.forEach(e.customfields,function(t){""!=e.CustomFields[t.name]&&a.push({value:e.CustomFields[t.name],custom_field_id:t.id})}),$(".btn-save").prop("disabled",!0),o.put("people",{Person:e.Person,CustomFields:a}).then(function(e){200==e.status&&s.success("&Eacute;xito!","El registro del alumno ha sido guardado."),$(".btn-save").prop("disabled",!1)},function(){$(".btn-save").prop("disabled",!1)})}},e.selectPicture=function(){$("#myModalPicture").modal("show")},e.setPicture=function(){e.Picture.profileCroppedPicture.length>0&&(e.Picture.setPicture=!0,$("#selectedImg").attr("src",e.Picture.profileCroppedPicture),e.Person.profile_picture=e.Picture.profileCroppedPicture),$("#myModalPicture").modal("hide"),n(function(){$("div.modal-backdrop").remove()},1e3)};var l=function(t){var a=t.currentTarget.files[0],o=new FileReader;o.onload=function(t){e.$apply(function(e){e.Picture.profilePicture=t.target.result})},o.readAsDataURL(a),e.Picture.pictureSet=!1};angular.element(document.querySelector("#fileInput")).on("change",l),e.get()}]),angular.module("cca-client").controller("StudentRelativeCtrl",["$scope","$state","$stateParams","Api","Messages","ValidateCF",function(e,t,a,o,s){e.activeTitle="",e.per_page=PER_PAGE,e.addNew=function(){t.go("people.studentsrelativesnew",{id:a.id})},e.get=function(){var t=a.id;o.get("people/"+t).then(function(t){if(200==t.status){var a=t.data.data;e.Person=a,e.activeTitle=a.firstname+" "+a.lastname}},function(){}),o.get("people/"+t+"/relatives").then(function(t){if(200==t.status){var a=t.data.data;e.Relatives=a,e.pagination={}}},function(){}),o.get("people/"+t+"/siblings").then(function(t){if(200==t.status){var a=t.data.data;e.Siblings=a}},function(){})},e.openModal=function(){$("#myModal").modal("show")},e.searchStudent=function(){var t={page:1,per_page:5e3,keywords:$('input[name="kw"]').val().trim()};o.get("student",t).then(function(t){e.siblings=t.data.data,e.pagination=t.data.meta.pagination},function(){})},e.getRelativesByStudent=function(t){$("#myModal").modal("hide"),$(".modal-backdrop").removeClass("in");var i=a.id;o.post("people/setrelativesbystudent",{id:t,linkto_id:i}).then(function(t){if(200==t.status){s.success("&Eacute;xito!","Los familiares han sido agregados.");var i=t.data.data;e.Relatives=i,e.pagination={},o.get("people/"+a.id+"/siblings").then(function(t){if(200==t.status){var a=t.data.data;e.Siblings=a}},function(){})}},function(){})},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=s.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&o.delete("people/relatives/",{relationship_id:t.join(","),id:a.id,per_page:5e3}).then(function(t){e.Relatives=t.data.data,s.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.get()}]),angular.module("cca-client").controller("StudentRelativeNewCtrl",["$scope","$state","$stateParams","Api","Messages","ValidateCF",function(e,t,a,o,s,i){e.types=[],e.departamentos=DEPTOS,e.CustomFields={},e.title="Nuevo",e.get=function(){var t=a.id;o.get("people/"+t).then(function(t){if(200==t.status){var a=t.data.data;e.Linkto=a,e.activeTitle=a.firstname+" "+a.lastname}},function(){}),o.get("catalogs/relationshiptype",{page:1}).then(function(t){_.forEach(t.data.data,function(t){e.types.push({id:t.id,name:t.name})})},function(){}),o.get("catalogs/customfield/persontype",{persontype:PARENT}).then(function(t){e.customfields=t.data.data,_.forEach(e.customfields,function(t){("select"==t.type||"checkbox"==t.type||"radio"==t.type)&&(t.values=t.values.split(",")),e.CustomFields[t.name]=""})},function(){})},e.save=function(n){if(e.$broadcast("show-errors-check-validity"),i.validate()&&!e.frmPerson.$invalid){if(e.Person.person_type_id=PARENT,$('input[name="date_of_birth"]').val().length>0){var l=$('input[name="date_of_birth"]').val();if(l=moment(l,"DD/MM/YYYY").valueOf(),isNaN(l)||0>=l)return $(".date_of_birth-error-message").parent().addClass("has-error").removeClass("has-success"),void $(".date_of_birth-error-message").show();$(".date_of_birth-error-message").parent().addClass("has-success").removeClass("has-error"),$(".date_of_birth-error-message").hide()}e.Person.country="El Salvador",e.Person.zipcode="503";var r=[];_.forEach(e.customfields,function(t){""!=e.CustomFields[t.name]&&r.push({value:e.CustomFields[t.name],custom_field_id:t.id})});var c={Person:e.Person,CustomFields:r,Relationship:{relationship_type_id:e.relationship_type_id,linkto_id:e.Linkto.id}};n&&(c.ignore=1),o.post("people",c).then(function(o){200!=o.status||null!=o.data.hasDuplicates&&void 0!=o.data.hasDuplicates?200==o.status&&o.data.hasDuplicates?(e.duplicates=o.data.data,$("#myModal").modal("show")):s.error("Error!","El registro del pariente no pudo ser guardado. Por favor aseg&uacute;rese de haber ingresado todos los datos correctamente."):(s.success("&Eacute;xito!","El pariente ha sido registrado."),t.go("people.studentsrelatives",{id:a.id}))},function(){})}},e.addRelative=function(i){o.post("people/addrelative",{Person:{id:i},Student:{id:e.Linkto.id}}).then(function(e){200==e.status&&(s.success("&Eacute;xito!","El pariente ha sido registrado."),t.go("people.studentsrelatives",{id:a.id}))},function(){})},Inputmask("99/99/9999").mask('input[name="date_of_birth"]'),e.get()}]),angular.module("cca-client").controller("StudentRelativeUpdateCtrl",["$scope","$state","$stateParams","Api","Messages","ValidateCF",function(e,t,a,o,s,i){e.types=[],e.departamentos=DEPTOS,e.CustomFields={},e.title="Actualizar",e.get=function(){Inputmask("99/99/9999").mask('input[name="date_of_birth"]');var t=a.id,s=a.referral_id;o.get("people/"+s).then(function(t){if(200==t.status){var a=t.data.data;e.getCustomFields(a.personTypeId),e.Person={id:a.id,firstname:a.firstname,lastname:a.lastname,middlename:a.middlename,gender:a.gender,country:a.country,zipcode:a.zipcode,state:a.state,city:a.city,address1:a.address1,address2:a.address2,phone:a.phone,email:a.email,code:a.code},isNaN(a.dateOfBirth)||!isNaN(a.dateOfBirth)&&parseInt(a.dateOfBirth)>0&&(e.Person.date_of_birth=moment(a.dateOfBirth).format("DD/MM/YYYY"),$('input[name="date_of_birth"]').val(e.Person.date_of_birth)),_.forEach(a.customfields,function(t){e.CustomFields[t.name]=t.value,"date"==t.type&&$('input[name="'+t.name+'"]').datepicker("update",new Date(t.value))}),e.activeTitle=e.Person.firstname+" "+e.Person.lastname}},function(){}),o.get("people/"+t).then(function(t){if(200==t.status){var a=t.data.data;e.Linkto=a,e.activeTitle=a.firstname+" "+a.lastname}},function(){}),o.get("catalogs/relationshiptype",{page:1}).then(function(t){_.forEach(t.data.data,function(t){e.types.push({id:t.id,name:t.name})})},function(){}),o.get("people/getrelationship/"+a.id+"/"+a.referral_id).then(function(t){200==t.status&&(e.relationship_type_id=t.data.data.relationship_id)},function(){})},e.save=function(){if(e.$broadcast("show-errors-check-validity"),i.validate()&&!e.frmPerson.$invalid){if(e.Person.person_type_id=1,$('input[name="date_of_birth"]').val().length>0){var n=$('input[name="date_of_birth"]').val();if(n=moment(n,"DD/MM/YYYY").valueOf(),isNaN(n)||0>=n)return $(".date_of_birth-error-message").parent().addClass("has-error").removeClass("has-success"),void $(".date_of_birth-error-message").show();$(".date_of_birth-error-message").parent().addClass("has-success").removeClass("has-error"),$(".date_of_birth-error-message").hide()}e.Person.country="El Salvador",e.Person.zipcode="503";var l=[];_.forEach(e.customfields,function(t){""!=e.CustomFields[t.name]&&l.push({value:e.CustomFields[t.name],custom_field_id:t.id})}),o.put("people",{Person:e.Person,CustomFields:l,Relationship:{relationship_type_id:e.relationship_type_id,linkto_id:e.Linkto.id}}).then(function(e){200==e.status&&(s.success("&Eacute;xito!","El registro del pariente ha sido actualizado."),t.go("people.studentsrelatives",{id:a.id}))},function(){})}},e.getCustomFields=function(t){o.get("catalogs/customfield/persontype",{persontype:t}).then(function(t){e.customfields=t.data.data,_.forEach(e.customfields,function(t){("select"==t.type||"checkbox"==t.type||"radio"==t.type)&&(t.values=t.values.split(",")),e.CustomFields.hasOwnProperty(t.name)||(e.CustomFields[t.name]="")})},function(){})},e.get()}]),angular.module("cca-client").controller("StudentEnrollmentCtrl",["$scope","$state","$stateParams","Api","Messages","ValidateCF","localStorageService",function(e,t,a,o,s,i,n){e.activeTitle="Matrícula",e.payment_title="",e.parent_type_id=PARENT,e.Enrollment={},e.get=function(){var t=a.id;o.get("people/"+t).then(function(t){if(200==t.status){var a=t.data.data;e.Person=a}},function(){}),n.get("enrollmentyear")&&(e.enrollmentyears=n.get("enrollmentyear"),_.forEach(e.enrollmentyears,function(t){t.isActive&&(e.enrollment_year_id=t.id)}),e.Enrollment.enrollment_year_id=e.enrollment_year_id,e.loadEnrollment()),n.get("section")?e.sections=n.get("section"):o.get("catalogs/section",{per_page:5e3}).then(function(t){e.sections=t.data.data},function(){}),n.get("year")?e.years=n.get("year"):o.get("catalogs/year",{per_page:5e3}).then(function(t){e.years=t.data.data},function(){}),n.get("enrollmnetyear")?e.enrollmentyears=n.get("enrollmentyear"):o.get("catalogs/enrollmentyear",{per_page:5e3}).then(function(t){e.enrollmentyears=t.data.data},function(){}),o.get("people/"+t+"/relatives").then(function(t){200==t.status&&(e.relatives=[],_.forEach(t.data.data,function(t){t.personTypeId==PARENT&&e.relatives.push({id:t.id,name:t.firstname+" "+t.lastname+" ("+t.relationship_name+")"})}))},function(){})},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmEnrollment.$invalid||(e.Enrollment.student_id=parseInt(a.id),e.Enrollment.date_of_enrollment=moment(e.Enrollment.date_of_enrollment,"DD-MM-YYYY").format("YYYY-MM-DD"),e.Enrollment.parent_id=parseInt(e.Enrollment.parent_id),isNaN(e.Enrollment.id)?o.post("enrollment",{Enrollment:e.Enrollment}).then(function(e){200==e.status&&(s.success("&Eacute;xito!","La matr&iacute;cula ha sido registrada."),t.go("people.studentspayment",{id:a.id}))},function(){}):o.put("enrollment",{Enrollment:e.Enrollment}).then(function(t){e.Enrollment.date_of_enrollment=moment(e.Enrollment.date_of_enrollment,"YYYY-MM-DD").format("DD-MM-YYYY"),200==t.status&&s.success("&Eacute;xito!","El registro de la matr&iacute;cula ha sido guardado.")},function(){}))},e.loadEnrollment=function(){var t=a.id,s=e.Enrollment.enrollment_year_id;isNaN(s)||o.get("enrollment/"+s+"/"+t).then(function(t){if(200==t.status){var a=t.data.data;e.Enrollment.id=a.id,e.Enrollment.talonario=a.talonario,e.Enrollment.date_of_enrollment=moment(a.date_of_enrollment).format("DD-MM-YYYY"),e.Enrollment.student_id=a.student_id,e.Enrollment.parent_id=a.parent_id,e.Enrollment.enrollment_year_id=a.enrollment_year_id,e.Enrollment.section_id=a.section_id,e.Enrollment.year_id=a.year_id}else e.Enrollment={},e.Enrollment.enrollment_year_id=s;(null==e.Enrollment.date_of_enrollment||""==e.Enrollment.date_of_enrollment)&&(e.Enrollment.date_of_enrollment=moment().format("DD-MM-YYYY"),$('input[name="date_of_enrollment"]').val(e.Enrollment.date_of_enrollment))},function(){})},e.get()}]),angular.module("cca-client").controller("PaymentControlCtrl",["$scope","$state","$stateParams","$filter","Api","Messages","ValidateCF","localStorageService",function(e,t,a,o,s,i,n,l){e.Payment={},e.frmPayment={},e.dateofpayment=moment().format("DD-MM-YYYY"),e.lastpaymentdate=moment().format("DD-MM-YYYY"),e.paymenttypes=l.get("paymenttype"),e.studentcode=null,e.penalty=null,e.csv={content:null,header:!0,separator:",",encoding:"utf-8",result:null,accept:".csv,.txt",callback:function(){s.post("payments/csv",{csv:e.csv.result}).then(function(t){if(200==t.status){var a=t.data.data;e.renderResults(a),$('input[name="kw"]').val("")}},function(){})}},e.enterSearch=function(t){13==t.keyCode&&e.search()},e.cgSearch=function(){var t=$('input[name="kw"]').val().trim();(58==t.length||34==t.length)&&e.search()},e.search=function(){var a=$('input[name="kw"]').val().trim();if(58!=a.length||isNaN(a)||(e.studentcode=a.substring(44,54),e.lastpaymentdate=a.substring(32,40),e.penalty=a.substring(56,58),e.npe=!0),34!=a.length||isNaN(a)||(e.studentcode=a.substring(19,29),e.lastpaymentdate=a.substring(10,18),e.penalty=a.substring(31,33),e.npe=!0),e.npe){e.penalty=parseFloat(e.penalty.substring(0,1)+"."+e.penalty.substring(1,2));var o=e.lastpaymentdate.substring(0,4)+"-"+e.lastpaymentdate.substring(4,6)+"-"+e.lastpaymentdate.substring(6,8);e.dateofpayment=e.lastpaymentdate.substring(6,8)+"-"+e.lastpaymentdate.substring(4,6)+"-"+e.lastpaymentdate.substring(0,4),e.lastpaymentdate=o,$(".datepicker").datepicker("update",e.dateofpayment)
}var i={keywords:$('input[name="kw"]').val().trim()};$(".panel").hide(),e.npe?$("#dateOfPaymentModal").modal("show"):s.get("people/getforpayment",i).then(function(e){var a=e.data.data;1==a.length?t.go("people.studentspayment",{id:a[0].id}):($(".panel, .panel h3").show(),$(".panel table").hide())},function(){})},e.processPayment=function(){if(e.$broadcast("show-errors-check-validity"),!e.frmPayment.$invalid){$("#dateOfPaymentModal").modal("hide");var t=$(".datepicker").val().split("-");t=t[2]+"-"+t[1]+"-"+t[0];var a={dateofpayment:t,lastpaymentdate:e.lastpaymentdate,penalty:e.penalty,studentcode:e.studentcode,payment_type_id:e.Payment.payment_type_id};s.post("payments/npe",a).then(function(t){if(200==t.status){var a=t.data.data;e.renderResults(a),$('input[name="kw"]').val("")}},function(){})}},e.renderResults=function(e){if(e.length>0){var t=$("table tbody");$("table tbody").empty(),_.forEach(e,function(e){var a="<td>"+e.yearName+"</td>",s='<td><a href="/#/people/students/'+e.id+'/payments" title="Verificar pagos">'+e.lastname+", "+e.firstname+"</a></td>",i="<td>"+e.concepto+"</td>",n='<td align="right">'+o("currency")(e.payed,"$ ",2)+"</td>",l='<td align="right">'+o("currency")(e.penalty,"$ ",2)+"</td>",r='<td align="center">'+e.payment_date+"</td>";t.append("<tr>"+a+s+i+n+l+r+"</tr>")}),$(".panel h3").hide(),$(".panel, .panel table").show()}else $(".panel, .panel h3").show(),$(".panel table").hide()}}]),angular.module("cca-client").controller("PaymentTypeCtrl",["$scope","$state","Api","Messages","localStorageService","CatalogsAll",function(e,t,a,o,s,i){e.data=[],e.pagination={},e.per_page=PER_PAGE,e.get=function(t){var o=angular.element('input[name="keywords"]').val();o=void 0!=o?o.trim():"";var s={page:t,keywords:o};a.get("catalogs/paymenttype",s).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination},function(){}),i.get()},e.addNew=function(){t.go("catalogs.paymenttypenew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=o.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&a.delete("catalogs/paymenttype/",{id:t.join(","),per_page:5e3}).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination,s.set("module",e.data),o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.search=function(){e.get(1)},e.get(1)}]),angular.module("cca-client").controller("PaymentTypeNewCtrl",["$scope","$state","Api","Flash",function(e,t,a,o){e.PaymentType={},e.PaymentType.discount=0,e.activeTitle="Nueva",e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmPaymentType.$invalid||a.post("catalogs",{Catalog:{catalog:"paymenttype",PaymentType:e.PaymentType}}).then(function(){o.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.paymenttype")},function(){})}}]),angular.module("cca-client").controller("PaymentTypeUpdateCtrl",["$scope","$state","$stateParams","Api","Flash",function(e,t,a,o,s){e.PaymentType={},e.activeTitle="Actualizar",e.get=function(){var s=a.id;isNaN(s)?t.go("catalogs.paymenttype"):o.get("catalogs/paymenttype/"+s).then(function(t){var a=t.data.data;e.PaymentType={id:a.id,name:a.name,discount:a.discount,description:a.description,is_default:a.isDefault}},function(){t.go("catalogs.paymenttype")})},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmPaymentType.$invalid||o.put("catalogs",{Catalog:{catalog:"paymenttype",PaymentType:e.PaymentType}}).then(function(){s.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.paymenttype")},function(){})},e.get()}]),angular.module("cca-client").controller("PaymentCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService","$timeout",function(e,t,a,o,s,i,n){e.PaymentStudent={},e.get=function(){var t=a.id;i.get("enrollmentyear")?(e.enrollmentyears=i.get("enrollmentyear"),_.forEach(e.enrollmentyears,function(t){t.isActive&&(e.enrollment_year_id=t.id)}),e.loadEnrollment()):o.get("catalogs/enrollmentyear/",{per_page:5e3}).then(function(t){e.enrollmentyears=t.data.data,_.forEach(e.enrollmentyears,function(t){t.isActive&&(e.enrollment_year_id=t.id)}),e.loadEnrollment()},function(){}),o.get("people/"+t).then(function(t){if(200==t.status){var a=t.data.data;e.Person=a}},function(){});var s=i.get("enrollmentyear"),n=_.find(s,function(e){return e.isActive});n=n.id;var l={enrollment_year_id:n};o.get("payments/fees/"+t,l).then(function(t){if(200==t.status){e.payments=t.data.data,e.pending=[],e.payed=[];var a=!0;if(_.forEach(e.payments,function(t){t.isPayed?(t.showDeleteOpt=!1,e.payed.unshift(t)):(t.isMandatory?a?(t.showPaymentOpt=!0,a=!1):t.showPaymentOpt=!1:(t.showPaymentOpt=!0,t.showDeleteOpt=!0),e.pending.push(t))}),e.payed.length>0){var o=!0;_.forEach(e.payed,function(e){e.isMandatory&&o&&(e.showDeleteOpt=!0,o=!1),e.isMandatory||(e.showDeleteOpt=!0)})}}},function(){}),o.get("payments/paymenttypes").then(function(t){e.paymenttypes=t.data.data;var a=_.find(e.paymenttypes,function(e){return e.isDefault});e.PaymentStudent.payment_type_id=a.id},function(){})},e.loadEnrollment=function(){var t=a.id;o.get("enrollment/"+e.enrollment_year_id+"/"+t).then(function(t){e.enrollment_id=t.data.data.id,e.PaymentStudent.enrollment_id=e.enrollment_id},function(){})},e.pay=function(t){e.PaymentStudent.date_of_payment="",$("#myModal").modal("show"),e.PaymentStudent.fee_id=t},e.save=function(a){if(e.$broadcast("show-errors-check-validity"),!e.frmPaymentStudent.$invalid){{_.find(e.paymenttypes,function(t){return t.id==e.PaymentStudent.payment_type_id}),_.find(e.pending,function(t){return t.id==e.PaymentStudent.fee_id})}e.PaymentStudent.date_of_payment=moment(e.PaymentStudent.date_of_payment,"DD-MM-YYYY").format("YYYY-MM-DD"),o.post("payments",{PaymentStudent:e.PaymentStudent}).then(function(o){if(200==o.status){e.payments=o.data.data,e.pending=[],e.payed=[];var s=!0;_.forEach(e.payments,function(t){t.isPayed?(t.showDeleteOpt=!1,e.payed.unshift(t)):(t.isMandatory?s?(t.showPaymentOpt=!0,s=!1):t.showPaymentOpt=!1:(t.showPaymentOpt=!0,t.showDeleteOpt=!0),e.pending.push(t))}),$("#myModal").modal("hide"),n(function(){$("div.modal-backdrop").remove()},1e3),1==a?t.go("people.paymentscontrol"):e.get()}},function(){})}},e.deletePayment=function(t){var a=s.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");swal(a,function(a){a&&o.delete("payments/"+t).then(function(t){if(200==t.status){e.payments=t.data.data,e.pending=[],e.payed=[];var a=!0;_.forEach(e.payments,function(t){t.isPayed?(t.showDeleteOpt=!1,e.payed.unshift(t)):(t.isMandatory?a?(t.showPaymentOpt=!0,a=!1):t.showPaymentOpt=!1:(t.showPaymentOpt=!0,t.showDeleteOpt=!0),e.pending.push(t))}),s.success("&Eacute;xito!","El registro han sido borrado"),e.get()}},function(){})})},e.get()}]),angular.module("cca-client").controller("ModuleCtrl",["$scope","$state","Api","Messages","localStorageService","CatalogsAll",function(e,t,a,o,s,i){e.data=[],e.pagination={},e.per_page=PER_PAGE,e.get=function(t){var o=angular.element('input[name="keywords"]').val();o=void 0!=o?o.trim():"";var s={page:t,keywords:o};a.get("catalogs/module",s).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination},function(){}),i.get()},e.addNew=function(){t.go("catalogs.modulenew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=o.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&a.delete("catalogs/module/",{id:t.join(","),per_page:5e3}).then(function(t){e.data=t.data.data,e.pagination=t.data.meta.pagination,s.set("module",e.data),o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.search=function(){e.get(1)},e.get(1)}]),angular.module("cca-client").controller("ModuleNewCtrl",["$scope","$state","Api","Flash",function(e,t,a,o){e.Module={},e.activeTitle="Nuevo",e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmModule.$invalid||a.post("catalogs",{Catalog:{catalog:"module",Module:e.Module}}).then(function(){o.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.module")},function(){})}}]),angular.module("cca-client").controller("ModuleUpdateCtrl",["$scope","$state","$stateParams","Api","Flash",function(e,t,a,o,s){e.Module={},e.activeTitle="Actualizar",e.get=function(){var s=a.id;isNaN(s)?t.go("catalogs.module"):o.get("catalogs/module/"+s).then(function(t){var a=t.data.data;e.Module={id:a.id,name:a.name,description:a.description}},function(){t.go("catalogs.module")})},e.save=function(){e.$broadcast("show-errors-check-validity"),e.frmModule.$invalid||o.put("catalogs",{Catalog:{catalog:"module",Module:e.Module}}).then(function(){s.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.module")},function(){})},e.get()}]),angular.module("cca-client").controller("LoginCtrl",["$scope","$state","localStorageService","Api","$timeout",function(e,t,a,o,s){e.Login={},e.login=function(){e.$broadcast("show-errors-check-validity"),e.frmLogin.$invalid||o.login(e.Login.username,e.Login.password).then(function(e){200==e.status&&void 0!=a.get("access_token")&&(o.get("catalogs/all").then(function(e){var t=e.data.data;a.set("module",t.module.data),a.set("rol",t.rol.data),a.set("relationshiptype",t.relationshiptype.data),a.set("persontype",t.persontype.data),a.set("customfields",t.customfields.data),a.set("year",t.year.data),a.set("section",t.section.data),a.set("subject",t.subject.data),a.set("enrollmentyear",t.enrollmentyear.data),a.set("settings",t.settings.data),a.set("paymenttype",t.paymenttype.data),a.set("cities",t.cities.data)},function(){}),o.get("users/current",{}).then(function(e){a.set("currentuser",e.data.data)},function(){}),s(function(){t.go("people.students")},2e3))},function(){})},e.keypressLogin=function(t){(13==t.which||13==t.keyCode)&&e.login()},e.init=function(){var e=(a.get("access_token"),a.get("access_token_expires"));null!=e&&e>moment().unix()&&t.go("people.students")},e.init()}]),angular.module("cca-client").controller("LogoutCtrl",["$scope","$state","localStorageService",function(e,t,a){a.remove("access_token","access_token_expires","module","rol","relationshiptype","persontype","customfields","year","section","subject","enrollmentyear","settings","currentuser","paymenttype","cities"),t.go("login")}]),angular.module("cca-client").controller("PeopleExpedientCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService",function(e,t,a,o,s){e.isStudent=!1,e.activeTitle="",e.expedients=[],e.getPerson=function(){var t=a.id;o.get("people/"+t).then(function(t){if(200==t.status){var a=t.data.data;e.Person=a,e.activeTitle=e.Person.firstname+" "+e.Person.lastname,5==e.Person.personTypeId&&(e.isStudent=!0)}},function(){})},e.get=function(t){var s=a.id,i=angular.element('input[name="keywords"]').val();i=void 0!=i?i.trim():"";var n={page:t,keywords:i};o.get("people/"+s+"/expedients",n).then(function(t){t.status>=200&&(e.expedients=t.data.data,e.pagination=t.data.meta.pagination)},function(){})},e.addNew=function(){t.go("people.expedientnew",{id:a.id})},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),i=s.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(i,function(i){i&&t.length>0&&o.delete("people/"+a.id+"/expedient",{id:t.join(","),page:1}).then(function(t){e.expedients=t.data.data,e.pagination=t.data.meta.pagination,s.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.search=function(){e.get(1)},e.getPerson(),e.get(1)}]),angular.module("cca-client").controller("PeopleExpedientNewCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService",function(e,t,a,o,s){e.isStudent=!1,e.activeTitle="Nuevo Expediente",e.Expedient={},e.nombrePersona="",e.summernoteoptions={height:300,focus:!0,airMode:!1,toolbar:[["edit",["undo","redo"]],["headline",["style"]],["style",["bold","italic","underline","superscript","subscript","strikethrough","clear"]],["fontface",["fontname"]],["textsize",["fontsize"]],["fontclr",["color"]],["alignment",["ul","ol","paragraph","lineheight"]],["height",["height"]],["table",["table"]],["insert",["link","hr"]]]},e.get=function(){var t=a.id;o.get("people/"+t).then(function(t){if(200==t.status){var a=t.data.data;e.Person=a,e.nombrePersona=e.Person.firstname+" "+e.Person.lastname,5==e.Person.personTypeId&&(e.isStudent=!0)}},function(){})},e.save=function(){if(e.$broadcast("show-errors-check-validity"),!e.frmExpedient.$invalid){if($('input[name="date_of_event"]').val().length>0){var i=$('input[name="date_of_event"]').val();if(i=moment(i,"DD/MM/YYYY").valueOf(),isNaN(i)||0>=i)return $(".date_of_event-error-message").parent().addClass("has-error").removeClass("has-success"),void $(".date_of_event-error-message").show();i=$('input[name="date_of_event"]').val(),e.Expedient.date_of_event=moment(i,"DD/MM/YYYY").format("YYYY-MM-DD"),$(".date_of_event-error-message").parent().addClass("has-success").removeClass("has-error"),$(".date_of_event-error-message").hide()}o.post("people/"+a.id+"/expedient",{Expedient:e.Expedient}).then(function(){s.success("&Eacute;xito!","El registro se guard&oacute; correctamente."),t.go("people.expedient",{id:a.id})},function(){})}},Inputmask("99/99/9999").mask('input[name="date_of_event"]'),e.Expedient.person_id=a.id,e.personId=a.id,e.get()}]),angular.module("cca-client").controller("PeopleExpedientUpdateCtrl",["$scope","$state","$stateParams","Api","Messages","localStorageService",function(e,t,a,o,s){e.isStudent=!1,e.activeTitle="Actualizar Expediente",e.Expedient={},e.nombrePersona="",e.summernoteoptions={height:300,focus:!0,airMode:!1,toolbar:[["edit",["undo","redo"]],["headline",["style"]],["style",["bold","italic","underline","superscript","subscript","strikethrough","clear"]],["fontface",["fontname"]],["textsize",["fontsize"]],["fontclr",["color"]],["alignment",["ul","ol","paragraph","lineheight"]],["height",["height"]],["table",["table"]],["insert",["link","hr"]]]},e.get=function(){var t=a.personId;o.get("people/"+t).then(function(t){if(200==t.status){var a=t.data.data;e.Person=a,e.nombrePersona=e.Person.firstname+" "+e.Person.lastname,5==e.Person.personTypeId&&(e.isStudent=!0)}},function(){}),o.get("people/"+a.personId+"/expedient/"+a.id+"/").then(function(t){if(t.status>=200){var a=t.data.data;e.Expedient={id:a.id,subject:a.subject,location:a.location,description:a.description,event_result:a.eventResult,date_of_event:moment(a.dateOfEvent).format("DD/MM/YYYY")}}},function(){})},e.save=function(){if(e.$broadcast("show-errors-check-validity"),!e.frmExpedient.$invalid){if($('input[name="date_of_event"]').val().length>0){var i=$('input[name="date_of_event"]').val();if(i=moment(i,"DD/MM/YYYY").valueOf(),isNaN(i)||0>=i)return $(".date_of_event-error-message").parent().addClass("has-error").removeClass("has-success"),void $(".date_of_event-error-message").show();i=$('input[name="date_of_event"]').val(),e.Expedient.date_of_event=moment(i,"DD/MM/YYYY").format("YYYY-MM-DD"),$(".date_of_event-error-message").parent().addClass("has-success").removeClass("has-error"),$(".date_of_event-error-message").hide()}o.put("people/"+a.personId+"/expedient/"+a.id,{Expedient:e.Expedient}).then(function(){s.success("&Eacute;xito!","El registro se guard&oacute; correctamente."),t.go("people.expedient",{id:a.personId})},function(){})}},Inputmask("99/99/9999").mask('input[name="date_of_event"]'),e.personId=a.personId,e.get()}]),angular.module("cca-client").controller("EnrollmentSwitcherCtrl",["$scope","$state","Messages","localStorageService","$timeout",function(e,t,a,o,s){e.activeEnrollmentYear=null,e.switch=function(){e.schoolyears=o.get("enrollmentyear");var a=[];_.forEach(e.schoolyears,function(o){o.isActive=!1,o.id==e.activeEnrollmentYear&&(o.isActive=!0),a.push(o),t.reload()}),o.set("enrollmentyear",a)},s(function(){e.schoolyears=o.get("enrollmentyear"),e.activeEnrollmentYear=_.find(e.schoolyears,function(e){return e.isActive}),e.activeEnrollmentYear=e.activeEnrollmentYear.id},3e3)}]),angular.module("cca-client").controller("CustomfieldCtrl",["$scope","$state","Api","Messages",function(e,t,a,o){e.data=[],e.pagination={},e.per_page=5e3,e.sortableOptions={handle:".fa-reorder",stop:function(){var e=$("input.chk").map(function(){return this.value}).get();a.put("catalogs/customfield/order",{ids:e.join(",")})}},e.get=function(t){var o=angular.element('input[name="keywords"]').val();o=void 0!=o?o.trim():"";var s={page:t,per_page:5e3,keywords:o};a.get("catalogs/customfields",s).then(function(t){e.data=t.data.data,_.forEach(t.data.data,function(t,a){var o=[];_.forEach(t.persontype,function(e){o.push(e.name)}),e.data[a].persontype=o.join(", ")}),e.pagination=t.data.meta.pagination},function(){})},e.addNew=function(){t.go("catalogs.customfieldsnew")},e.toTrash=function(){var t=$("input.chk:checked").map(function(){return this.value}).get(),s=o.confirm("&iquest;Est&aacute; seguro?","Los registros borrados no pueden ser recuperados.");Array.isArray(t)&&t.length>0&&swal(s,function(s){s&&t.length>0&&a.delete("catalogs/customfields/",{id:t.join(","),per_page:5e3}).then(function(t){e.data=t.data.data,_.forEach(t.data.data,function(t,a){var o=[];_.forEach(t.persontype,function(e){o.push(e.name)}),e.data[a].persontype=o.join(", ")}),e.pagination=t.data.meta.pagination,o.success("&Eacute;xito!","Los regitro(s) han sido borrado(s)")},function(){})})},e.search=function(){e.get(1)},e.get(1)}]),angular.module("cca-client").controller("CustomfieldNewCtrl",["$scope","$state","Api","Flash","Slug",function(e,t,a,o,s){e.Customfield={},e.types=[],e.persontypeid=[],e.activeTitle="Nuevo",e.getPersonType=function(){a.get("catalogs/persontype",{page:1}).then(function(t){_.forEach(t.data.data,function(t){e.types.push({id:t.id,name:t.name})})},function(){})},e.save=function(){if(e.$broadcast("show-errors-check-validity"),!e.frmCustomfield.$invalid){var i=[];$(".person-type").map(function(){this.checked&&i.push(this.value)}),0!=i.length&&(e.Customfield.required=e.Customfield.required?1:0,e.Customfield.name=s.slugify(e.Customfield.label)+"-"+moment().unix(),a.post("catalogs",{Catalog:{catalog:"customfields",Customfield:e.Customfield,persontype:i}}).then(function(){o.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.customfields")},function(){}))}},e.getPersonType()}]),angular.module("cca-client").controller("CustomfieldUpdateCtrl",["$scope","$state","$stateParams","Api","Flash",function(e,t,a,o,s){e.Customfield={},e.persontypeid=[],e.types=[],e.activeTitle="Actualizar",e.get=function(){var s=a.id;isNaN(s)?t.go("catalogs.customfields"):(o.get("catalogs/customfields/"+s).then(function(t){var a=t.data.data;e.Customfield={id:a.id,name:a.name,label:a.label,type:a.type,required:a.required,values:a.values,pattern:a.pattern,order:a.order},_.forEach(a.persontype,function(t){e.persontypeid.push(t.id)})},function(){t.go("catalogs.customfields")}),o.get("catalogs/persontype",{page:1}).then(function(t){_.forEach(t.data.data,function(t){e.types.push({id:t.id,name:t.name})})},function(){}))},e.save=function(){if(e.$broadcast("show-errors-check-validity"),!e.frmCustomfield.$invalid){var a=[];$(".person-type").map(function(){this.checked&&a.push(this.value)}),0!=a.length&&(e.Customfield.required=e.Customfield.required?1:0,o.put("catalogs",{Catalog:{catalog:"customfields",Customfield:e.Customfield,persontype:a}}).then(function(){s.setMessage("El registro se guard&oacute; correctamente."),t.go("catalogs.customfields")},function(){}))}},e.get()}]),angular.module("cca-client").controller("CurrentUserCtrl",["$scope","localStorageService","$timeout",function(e,t,a){e.user=null,a(function(){e.user=t.get("currentuser"),null!=e.user&&(e.user.hasProfilePicture=!1,null!=e.user.profilePictureThumb&&void 0!=e.user.profilePictureThumb&&(e.user.hasProfilePicture=!0,e.profilePicture=e.user.profilePictureThumb))},1e3)}]),app.service("ApiInterceptor",["$window",function(){var e=this;e.responseError=function(e){if(401===e.status){var t=$("#appMessage");t&&t.empty().append('<div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong><i class="fa fa-warning"></i></strong> Su identidad no pudo ser verificada.</div>')}if(400===e.status){var t=$("#appMessage");t&&t.empty().append('<div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong><i class="fa fa-warning"></i></strong> '+e.data.data.message+"</div>")}return e}}]).service("Messages",function(){var e=this;e.success=function(e,t){swal({title:e,text:t,type:"success",html:!0})},e.error=function(e,t){swal({title:e,text:t,type:"error",html:!0})},e.info=function(e,t){swal({title:e,text:t,type:"info",html:!0})},e.confirm=function(e,t){return{title:e,text:t,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si",cancelButtonText:"No",closeOnConfirm:!1,closeOnCancel:!0,html:!0}}}).factory("Flash",["$rootScope",function(e){var t=[],a="";return e.$on("$viewContentLoaded",function(){if(a=t.shift()||""){var e=$("#appMessage");e&&e.empty().append('<div class="alert alert-success" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><strong>&Eacute;xito! </strong> '+a+"</div>")}}),{setMessage:function(e){t.push(e)},getMessage:function(){return a}}}]).factory("ValidateCF",function(){return{validate:function(){var e=!0,t=$(".customfield-group input, .customfield-group select, .customfield-group textarea");return $.each(t,function(t,a){var a=$(a);a.parent().parent(),a.prop("required")&&(("text"==a.prop("type")||"number"==a.prop("type")||"tel"==a.prop("type"))&&(0==a.val().trim().length?(a.parent().parent().addClass("has-error"),e=!1):a.parent().parent().removeClass("has-error").addClass("has-success")),"email"==a.prop("type")&&(validator.isEmail(a.val())?(a.parent().parent().addClass("has-error"),e=!1):a.parent().parent().removeClass("has-error").addClass("has-success")),"url"==a.prop("type")&&(validator.isURL(a.val())?(a.parent().parent().addClass("has-error"),e=!1):a.parent().parent().removeClass("has-error").addClass("has-success")))}),e}}}).factory("Auth",["localStorageService","$state",function(e,t){return{run:function(a,o){var s=e.get("access_token"),i=e.get("access_token_expires"),n=e.get("currentuser").access;(null==s||null==i)&&(o.preventDefault(),t.go("login")),null!=i&&i<=moment().unix()&&(o.preventDefault(),t.go("login"));var l=parseInt(a.module);l>0&&void 0==_.find(n,{id:l})&&o.preventDefault()},check:function(){var a=e.get("access_token"),o=e.get("access_token_expires");(null==a||null==o)&&t.go("login"),o<=moment().unix()&&(e.remove("access_token","access_token_expires"),t.go("login"))}}}]).factory("CatalogsAll",["Api","localStorageService",function(e,t){return{get:function(){e.get("catalogs/all").then(function(e){var a=e.data.data;t.set("module",a.module.data),t.set("rol",a.rol.data),t.set("relationshiptype",a.relationshiptype.data),t.set("persontype",a.persontype.data),t.set("customfields",a.customfields.data),t.set("year",a.year.data),t.set("section",a.section.data),t.set("subject",a.subject.data),t.set("enrollmentyear",a.enrollmentyear.data)},function(){})}}}]),$(document).ready(function(){function e(){var e=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",e+"px");var t=$("nav.navbar-default").height(),a=$("#page-wrapper").height();t>a&&$("#page-wrapper").css("min-height",t+"px"),a>t&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&(t>a?$("#page-wrapper").css("min-height",t-60+"px"):$("#page-wrapper").css("min-height",$(window).height()-60+"px"))}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||e()}),setTimeout(function(){e()})}),$(function(){$(window).bind("load resize",function(){$(this).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})}),app.directive("sideNavigation",["$timeout",function(e){return{restrict:"A",link:function(t,a){t.$watch("authentication.user",function(){e(function(){a.metisMenu()})})}}}]).directive("minimalizaSidebar",["$timeout",function(e){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:["$scope","$element",function(t){t.minimalize=function(){angular.element("body").toggleClass("mini-navbar"),!angular.element("body").hasClass("mini-navbar")||angular.element("body").hasClass("body-small")?(angular.element("#side-menu").hide(),e(function(){angular.element("#side-menu").fadeIn(400)},200)):angular.element("#side-menu").removeAttr("style")}}]}}]).directive("actionButtons",function(){return{restrict:"AE",template:'<div class="row"> <div class="col-lg-6 col-md-6 col-sm-6 col-xs-4 visible-xs"> <div class="btn-group" role="group"> <button type="button" class="btn btn-primary" ng-click="addNew();"><i class="fa fa-plus"></i></button> <button type="button" class="btn btn-default" ng-click="toPrint();"><i class="fa fa-print"></i></button> <button type="button" class="btn btn-default" ng-click="toTrash();"><i class="fa fa-trash"></i></button> </div></div><div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 hidden-xs"> <div class="btn-group" role="group"> <button type="button" class="btn btn-primary" ng-click="addNew();"><i class="fa fa-plus"></i> Nuevo</button> <button type="button" class="btn btn-default" ng-click="toPrint();"><i class="fa fa-print"></i> Imprimir</button> <button type="button" class="btn btn-default" ng-click="toTrash();"><i class="fa fa-trash"></i> Eliminar</button> </div></div><div class="col-lg-6 col-md-6 col-sm-6 col-xs-8"> <form> <div class="input-group"> <input type="text" name="keywords" id="keywords" class="form-control" value="" placeholder="buscar..."> <div class="input-group-btn"> <button class="btn btn-default hidden-xs" ng-click="search();">Buscar</button> <button class="btn btn-default visible-xs" ng-click="search();"><i class="fa fa-search"></i></button> </div></div></form> </div></div><br/>'}}).directive("appMessage",function(){return{restrict:"A",template:'<div class="row"><div class="col-md-12" id="appMessage"></div></div>'}}).directive("appForminfo",function(){return{restrict:"A",template:'<div class="row"><div class="col-md-12"><div class="alert alert-info"><strong>Instrucciones: </strong> Por favor complete el siguiente formulario. Todos los campos marcados con <font color="red">*</font> son obligatorios.</div></div></div>'}}).directive("checkAll",function(){return{restrict:"AE",template:'<input type="checkbox" id="check-all" value="1">',link:function(){angular.element("#check-all").on("click",function(){$("input.chk").map(this.checked?function(){this.checked=!0}:function(){this.checked=!1})})}}}).directive("transformCustomFieldType",function(){return{restrict:"E",template:"<div> <span ng-if=\"value=='textarea'\">Texto Largo</span> <span ng-if=\"value=='text'\">Texto</span> <span ng-if=\"value=='wysiwyg'\">Editor HTML</span> <span ng-if=\"value=='number'\">N&uacute;mero</span> <span ng-if=\"value=='tel'\">Tel&eacute;fono</span> <span ng-if=\"value=='date'\">Fecha</span> <span ng-if=\"value=='time'\">Hora</span> <span ng-if=\"value=='datetime'\">Fecha y Hora</span> <span ng-if=\"value=='email'\">E-Mail</span> <span ng-if=\"value=='url'\">Url</span> <span ng-if=\"value=='select'\">Lista</span> <span ng-if=\"value=='checkbox'\">M&uacute;ltiple Selecci&oacute;n</span> <span ng-if=\"value=='radio'\">Selecci&oacute;n Simple</span></div>",replace:!0,scope:{value:"@"}}}).directive("multiplePersonType",function(){return{restrict:"E",template:'<div class="form-group"> <div class="col-sm-3 control-label"> <label> Por favor seleccione los tipos de personas a los que desea agregar el campo personalizado <span>*</span><br/> <small class="text-navy">Por favor seleccione por lo menos 1 opci&oacute;n</small> </label> </div><div class="col-sm-9"> <div class="checkbox" ng-repeat="person in personType"> <label> <input type="checkbox" class="person-type" name="{{name}}" value="{{person.id}}" ng-checked="value.indexOf(person.id) > -1">{{person.name}}</label> </div></div></div>',replace:!0,scope:{name:"@",value:"=ngModel",personType:"="}}}).directive("singlePersonType",function(){return{restrict:"E",template:'<div class="form-group"> <div class="col-sm-3 control-label"> <label> Por favor seleccione los tipos de personas a los que desea agregar el campo personalizado <span>*</span><br/> <small class="text-navy">Por favor seleccione por lo menos 1 opci&oacute;n</small> </label> </div><div class="col-sm-9"> <div class="radio" ng-repeat="person in personType"> <label> <input type="radio" class="person-type" name="{{name}}" value="{{person.id}}" ng-checked="value.indexOf(person.id) > -1">{{person.name}}</label> </div></div></div>',replace:!0,scope:{name:"@",value:"=ngModel",personType:"="}}}).directive("inputText",function(){return{restrict:"E",template:'<input type="text" name="{{ name }}" value="{{ value }}" class="form-control">',replace:!0,scope:{name:"@",value:"=ngModel",required:"@",format:"@"},link:function(e,t){void 0!=e.format&&e.format.length>0&&Inputmask(e.format).mask($(t))}}}).directive("inputTextLong",function(){return{restrict:"E",template:'<textarea type="text" name="{{ name }}" class="form-control" rows="6">{{ value }}</textarea>',replace:!0,scope:{name:"@",value:"=ngModel",required:"@"}}}).directive("inputNumber",function(){return{restrict:"E",template:'<input type="number" min="{{ min }}" max="{{ max }}" name="{{ name }}" value="{{ value }}" class="form-control">',replace:!0,scope:{name:"@",min:"@",max:"@",value:"=ngModel",required:"@"},link:function(e,t){t.on("keydown",function(e){return e.ctrlKey||e.altKey||47<e.keyCode&&e.keyCode<58&&0==e.shiftKey||95<e.keyCode&&e.keyCode<106||8==e.keyCode||9==e.keyCode||e.keyCode>34&&e.keyCode<40||46==e.keyCode})}}}).directive("inputFloat",function(){return{restrict:"E",template:'<input type="number" min="{{ min }}" max="{{ max }}" name="{{ name }}" value="{{ value }}" class="form-control">',replace:!0,scope:{name:"@",min:"@",max:"@",value:"=ngModel",required:"@"},link:function(e,t){t.on("keydown",function(e){return e.ctrlKey||e.altKey||190==e.keyCode&&-1==t.val().indexOf(".")||47<e.keyCode&&e.keyCode<58&&0==e.shiftKey||95<e.keyCode&&e.keyCode<106||8==e.keyCode||9==e.keyCode||e.keyCode>34&&e.keyCode<40||46==e.keyCode})}}}).directive("inputPhone",function(){return{restrict:"E",template:'<input type="tel" name="{{ name }}" value="{{ value }}" class="form-control">',replace:!0,scope:{name:"@",value:"=ngModel",required:"@"},link:function(){Inputmask("9999-9999").mask('input[type="tel"]')}}}).directive("inputDate",function(){return{restrict:"E",template:'<div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span><input type="text" name="{{ name }}" value="{{ value }}" class="form-control datepicker" readonly></div>',replace:!0,scope:{name:"@",value:"=ngModel",required:"@"},link:function(){$(".datepicker").datepicker({format:"dd-mm-yyyy",autoclose:!0,language:"es"})}}}).directive("inputDateText",function(){return{restrict:"E",template:'<div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span><input type="datetext" name="{{ name }}" value="{{ value }}" class="form-control" placeholder="dd/mm/aaaa"></div>',replace:!0,scope:{name:"@",value:"=ngModel",required:"@"},link:function(){Inputmask("99/99/9999").mask('input[type="datetext"]')}}}).directive("inputEmail",function(){return{restrict:"E",template:'<input type="email" name="{{ name }}" value="{{ value }}" class="form-control">',replace:!0,scope:{name:"@",value:"=ngModel",required:"@"}}
}).directive("inputUrl",function(){return{restrict:"E",template:'<input type="url" name="{{ name }}" value="{{ value }}" class="form-control">',replace:!0,scope:{name:"@",value:"=ngModel",required:"@"}}}).directive("inputList",function(){return{restrict:"E",template:'<select name="{{ name }}" class="form-control"><option ng-repeat="option in options" value="{{ option }}">{{ option }}</option></select>',replace:!0,scope:{name:"@",value:"=ngModel",required:"@",options:"="}}}).directive("inputMultipleOptions",function(){return{restrict:"E",template:'<div class="checkbox" ng-repeat="option in options"> <label> <input type="checkbox" value="{{option}}" ng-checked="value.indexOf(option) > -1">{{option}}</label></div>',replace:!0,scope:{name:"@",value:"=ngModel",options:"="}}}).directive("inputSingleOption",function(){return{restrict:"E",template:'<div class="radio" ng-repeat="option in options"> <label> <input type="radio" value="{{option}}" ng-checked="value.indexOf(option) > -1">{{option}}</label></div>',replace:!0,scope:{name:"@",value:"=ngModel",options:"="}}}).directive("inputSlug",function(){return{restrict:"E",template:'<input type="text" value="{{ value }}" class="form-control">',replace:!0,scope:{name:"@",value:"=ngModel",required:"@"},link:function(e,t){t.on("keydown",function(e){return e.keyCode>=65&&e.keyCode<=90&&0==e.shiftKey||e.keyCode>=48&&e.keyCode<=57&&0==e.shiftKey||e.keyCode>=96&&e.keyCode<=105&&0==e.shiftKey||37==e.keyCode||39==e.keyCode||8==e.keyCode||109==e.keyCode||45==e.keyCode||173==e.keyCode||9==e.keyCode}),t.on("keyup",function(){t.val(t.val().toLowerCase())})}}}).directive("datePicker",function(){return{restrict:"A",template:"",replace:!1,link:function(){$(".datepicker").datepicker({format:"dd-mm-yyyy",autoclose:!0,language:"es"})}}}).directive("yearPicker",function(){return{restrict:"AE",template:"",replace:!1,link:function(){$(".yearpicker").datepicker({format:"yyyy",autoclose:!0,language:"es"})}}}).directive("includeReplace",function(){return{require:"ngInclude",restrict:"A",link:function(e,t){t.replaceWith(t.children())}}}),app.factory("Api",["$http","$httpParamSerializer","$q","$cookies","localStorageService","$state","Auth",function(e,t,a,o,s,i){return{_baseurl:s.get("baseurl"),_apipath:"/api/v1/",_params:"",_client_id:s.get("client_id"),_client_secret:s.get("client_secret"),_access_token:s.get("access_token"),_expires:s.get("access_token_expires"),config:function(e){var t=this._baseurl+this._apipath;this._access_token=s.get("access_token"),this._expires=s.get("access_token_expires"),-1!=e.indexOf(t)&&(t="");var a={url:t+e};return this._access_token&&(a.headers={Authorization:"Bearer "+this._access_token}),a},login:function(t,o){var i=this._baseurl+this._apipath+"oauth/access_token",n=a.defer(),l={method:"POST",url:i,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"client_id="+this._client_id+"&client_secret="+this._client_secret+"&username="+encodeURI(t)+"&password="+encodeURI(o)+"&grant_type=password"};return e(l).then(function(e){200==e.status&&(s.set("access_token",e.data.access_token),s.set("access_token_expires",moment().unix()+parseInt(e.data.expires_in))),n.resolve(e)},function(e){n.reject(e)}),n.promise},get:function(t,o){var n=this.config(t);n.params=o;var l=a.defer();return e.get(n.url,n).then(function(e){401===e.status&&(s.remove("access_token","access_token_expires"),i.go("logout")),l.resolve(e)},function(e){l.reject(e)}),l.promise},post:function(t,o){var n=this.config(t),l=a.defer();return e.post(n.url,o,n).then(function(e){401===e.status&&(s.remove("access_token","access_token_expires"),i.go("logout")),l.resolve(e)},function(e){l.reject(e)}),l.promise},put:function(t,o){var n=this.config(t),l=a.defer();return e.put(n.url,o,n).then(function(e){401===e.status&&(s.remove("access_token","access_token_expires"),i.go("logout")),l.resolve(e)},function(e){l.reject(e)}),l.promise},"delete":function(t,o){var n=this.config(t);n.params=o;var l=a.defer();return e.delete(n.url,n).then(function(e){401===e.status&&(s.remove("access_token","access_token_expires"),i.go("logout")),l.resolve(e)},function(e){l.reject(e)}),l.promise}}}]),angular.module("cca-client").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="text-center m-t-lg"><h1>{{main.helloText}}</h1><small>{{main.descriptionText}} <i class="glyphicon glyphicon-pencil"></i></small></div></div></div></div>'),e.put("app/minor/minor.html",'<div class="wrapper wrapper-content animated fadeInRight"><div class="row"><div class="col-lg-12"><div class="text-center m-t-lg"><h1>Simple example of second view</h1><small>Configure in app.js as index.minor state.</small></div></div></div></div>'),e.put("components/common/content.html",'<div id="wrapper"><div ng-include="\'components/common/navigation.html\'"></div><div id="page-wrapper" class="gray-bg {{$state.current.name}}"><div ng-include="\'components/common/topnavbar.html\'"></div><div ui-view=""></div><div ng-include="\'components/common/footer.html\'"></div></div></div>'),e.put("components/common/footer.html",'<div class="footer"><div class="pull-right">10GB of <strong>250GB</strong> Free.</div><div><strong>Copyright</strong> R&M Publicidad &copy; 2015-2016</div></div>'),e.put("components/common/ibox_tools.html",'<div class="ibox-tools dropdown" dropdown=""><a ng-click="showhide()"><i class="fa fa-chevron-up"></i></a> <a class="dropdown-toggle" href="" dropdown-toggle=""><i class="fa fa-wrench"></i></a><ul class="dropdown-menu dropdown-user"><li><a href="">Config option 1</a></li><li><a href="">Config option 2</a></li></ul><a ng-click="closebox()"><i class="fa fa-times"></i></a></div>'),e.put("components/common/navigation.html",'<nav class="navbar-default navbar-static-side" role="navigation"><div class="sidebar-collapse"><ul side-navigation="" class="nav metismenu" id="side-menu"><li class="nav-header" ng-controller="CurrentUserCtrl"><div class="dropdown profile-element" dropdown=""><span><img ng-if="!user.hasProfilePicture" src="assets/images/logocca.png" width="47px" class="img-circle" alt="image"> <img ng-if="user.hasProfilePicture" ng-src="{{ profilePicture }}" width="47px" class="img-circle" alt="image"></span> <a class="dropdown-toggle" dropdown-toggle="" href=""><span class="clear"><span class="block m-t-xs"><strong class="font-bold">{{user.firstname}} {{ user.lastname }}</strong></span> <span class="text-muted text-xs block">Colegio CA<b class="caret"></b></span></span></a><ul class="dropdown-menu animated fadeInRight m-t-xs"><li><a ui-sref="people.usersupdate({id: user.id})">Mi Perfil</a></li><li><a ui-sref="logout">Logout</a></li></ul></div><div class="logo-element"><img src="/assets/images/logocca.png" width="47" align="center"></div></li><li ui-sref-active="active"><a ui-sref="people.paymentscontrol"><i class="fa fa-money"></i> <span class="nav-label">Control de Pagos</span></a></li><li ui-sref-active="active"><a ui-sref="people.students"><i class="fa fa-users"></i> <span class="nav-label">Alumnos</span></a></li><li ui-sref-active="active"><a ui-sref="reports.jslist"><i class="fa fa-file-pdf-o"></i> <span class="nav-label">Reportes</span></a></li><li ui-sref-active="active"><a href="index.html"><i class="fa fa-table"></i> <span class="nav-label">Cat&aacute;logos</span> <span class="fa arrow"></span></a><ul class="nav nav-second-level collapse"><li><a ui-sref="catalogs.schoolyear">A&ntilde;o Escolar</a></li><li><a ui-sref="catalogs.year">Grados</a></li><li><a ui-sref="catalogs.section">Secciones</a></li><li><a ui-sref="catalogs.subject">Materias</a></li><li><a ui-sref="catalogs.plan">Planes de Pago</a></li><li><a ui-sref="catalogs.paymenttype">Formas de Pago</a></li><li><a ui-sref="catalogs.relationshiptype">Tipos de Relaci&oacute;n Familiar</a></li><li role="separator" class="divider"></li><li><a ui-sref="catalogs.customfields">Campos Personalizados</a></li><li role="separator" class="divider"></li><li><a ui-sref="catalogs.module">M&oacute;dulos</a></li><li><a ui-sref="catalogs.rol">Roles</a></li><li><a ui-sref="people.users">Usuarios</a></li></ul></li><li ui-sref-active="active"><a ui-sref="people.settings"><i class="fa fa-cogs"></i> <span class="nav-label">Configuraci&oacute;n</span></a></li></ul></div></nav>'),e.put("components/common/topnavbar.html",'<div class="row border-bottom"><nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0"><div class="navbar-header"><span minimaliza-sidebar=""></span></div><ul class="nav navbar-top-links navbar-right"><li><button type="button" class="btn btn-success navbar-btn" onclick="window.location.href= \'/#/people/students/new\';"><i class="fa fa-user-plus"></i> Nuevo Alumno</button></li><li ng-controller="EnrollmentSwitcherCtrl"><select chosen="" name="activeEnrollmentYear" ng-model="activeEnrollmentYear" ng-change="switch()" ng-options="option.id as option.name for option in schoolyears"></select></li><li><a ui-sref="logout"><i class="fa fa-sign-out"></i> Salir</a></li></ul></nav></div>'),e.put("components/templates/gn_container.html",'<div id="wrapper"><div ng-include="\'components/common/navigation.html\'"></div><div id="page-wrapper" class="gray-bg"><div ng-include="\'components/common/topnavbar.html\'"></div><div ui-view=""></div><iframe frameborder="0" width="1px" height="1px" id="exportframe"></iframe><div ng-include="\'components/common/footer.html\'" include-replace=""></div></div></div>'),e.put("components/templates/index.html",'<div id="wrapper"><div ng-include="\'components/common/navigation.html\'"></div><div id="page-wrapper" class="gray-bg"><div ng-include="\'components/common/topnavbar.html\'"></div><div class="row"><div class="col-md-12 col-sm-12 col-xs-12"></div></div><div ng-include="\'components/common/footer.html\'"></div></div></div>'),e.put("components/templates/customfields/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Campos Personalizados</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.customfields">Campos Personalizados</a></li><li class="active">{{ activeTitle }}</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{ activeTitle }} Campo Personalizado</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmCustomfield" ng-model="Customfield" class="form-horizontal" novalidate=""><input type="hidden" name="name" ng-model="Customfield.name"><multiple-person-type name="persontypeid" person-type="types" ng-model="persontypeid"></multiple-person-type><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Etiqueta <span>*</span></label><div class="col-sm-9"><input type="text" name="label" ng-model="Customfield.label" class="form-control" required=""> <small class="text-navy">Este texto aparecer&aacute; al lado del campo cuando sea desplegado.</small><p class="help-block" ng-if="frmCustomfield.label.$error.required">La etiqueta es obligatoria</p></div></div><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Tipo de Campo <span>*</span></label><div class="col-sm-9"><select name="type" ng-model="Customfield.type" class="form-control" required=""><option value=""></option><option value="text">Texto</option><option value="textarea">Texto Largo</option><option value="number">N&uacute;mero</option><option value="tel">Tel&eacute;fono</option><option value="date">Fecha</option><option value="email">E-Mail</option><option value="url">Url</option><option value="select">Lista</option><option value="checkbox">M&uacute;ltiple Selecci&oacute;n</option><option value="radio">Selecci&oacute;n Simple</option></select><p class="help-block" ng-if="frmCustomfield.type.$error.required">El tipo de campo es obligatorio</p></div></div><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Orden Correlativo <span>*</span></label><div class="col-sm-9"><input-number ng-model="Customfield.order" name="order" required=""></input-number><small class="text-navy">Es un n&uacute;mero mayor que 0 e indica el orden en que aparecer&aacute; en el formulario.</small><p class="help-block" ng-if="frmCustomfield.order.$error.required">El n&uacute;mero de orden correlativo es obligatorio. Debe ser un n&uacute;mero mayor que 0.</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Campo Obligatorio?<br><small class="text-navy">Indica si es el campo es obligatorio.</small></label><div class="col-sm-9"><input type="checkbox" ng-model="Customfield.required" value="1"></div></div><div class="form-group"><label class="col-sm-3 control-label">Posibles Valores</label><div class="col-sm-9"><textarea rows="5" cols="100" ng-model="Customfield.values" class="form-control"></textarea> <small class="text-navy">Escriba los posibles valores separados por coma.</small></div></div><div class="form-group"><label class="col-sm-3 control-label">Formato</label><div class="col-sm-9"><input type="text" ng-model="Customfield.pattern" class="form-control"> <small class="text-navy">Escriba el formato que debe tener el valor del campo. Solo usuarios avanzados.</small></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.customfields" class="btn btn-default">Cancelar</a></div></div></form></div></div><br><br>'),e.put("components/templates/customfields/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Campos Personalizados</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li class="active">Campos Personalizados</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><i class="fa fa-sort-numeric-asc"></i></th><th width="10"><check-all></check-all></th><th>Etiqueta</th><th>Tipo de Campo</th><th>Aplica a</th><th>Obligatorio</th></tr></thead><tbody ui-sortable="sortableOptions" ng-model="data"><tr dir-paginate="sy in data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><i class="fa fa-reorder draggable"></i></td><td><input type="checkbox" class="chk" name="sy_id" value="{{ sy.id }}"></td><td><a ui-sref="catalogs.customfieldsupdate({id: sy.id})">{{ sy.label }}</a></td><td><transform-custom-field-type value="{{ sy.type }}"></transform-custom-field-type></td><td>{{ sy.persontype }}</td><td><span class="label label-primary" ng-if="sy.required">Obligatorio</span></td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/enrollment_years/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>A&ntilde;o Escolar</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.schoolyear">A&ntilde;o Escolar</a></li><li class="active">Nuevo</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>Nuevo A&ntilde;o Escolar</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmEnrollmentYear" ng-model="EnrollmentYear" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Nombre <span>*</span></label><div class="col-sm-9"><input type="text" name="name" ng-model="EnrollmentYear.name" class="form-control" required=""><p class="help-block" ng-if="frmEnrollmentYear.name.$error.required">El nombre es obligatorio</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Descripci&oacute;n</label><div class="col-sm-9"><input type="text" ng-model="EnrollmentYear.description" class="form-control"></div></div><div class="form-group"><label class="col-sm-3 control-label">A&ntilde;o activo?<br><small class="text-navy">Indica si es el a&ntilde;o escolar en curso.</small></label><div class="col-sm-9"><input type="checkbox" ng-model="EnrollmentYear.is_active"></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.schoolyear" class="btn btn-default">Cancelar</a></div></div></form></div></div>'),e.put("components/templates/enrollment_years/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>A&ntilde;o Escolar</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li class="active">A&ntilde;o Escolar</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th>Nombre</th><th>Descripci&oacute;n</th><th>Activo</th></tr></thead><tbody><tr dir-paginate="sy in sy_data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ sy.id }}"></td><td><a ui-sref="catalogs.schoolyearupdate({id: sy.id})">{{ sy.name }}</a></td><td>{{ sy.description }}</td><td><span class="label label-primary" ng-if="sy.isActive">Activo</span></td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/fees/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Planes de Pago</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.plan">Planes de Pago</a></li><li><a ui-sref="catalogs.planupdate({id: plan.id})">{{ plan.name }}</a></li><li><a ui-sref="catalogs.fee({id: plan.id})">Colegiaturas</a></li><li class="active"><strong>{{ activeTitle }} Colegiatura</strong></li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{ activeTitle }} Colegiatura</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmFee" ng-model="Fee" class="form-horizontal" novalidate=""><input type="hidden" name="payment_plan_id" ng-model="Fee.payment_plan_id"> <input type="hidden" ng-model="Fee.order" name="order" value="5000"><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Nombre <span>*</span></label><div class="col-sm-9"><input type="text" name="name" ng-model="Fee.name" class="form-control" required=""><p class="help-block" ng-if="frmFee.name.$error.required">El nombre es obligatorio</p></div></div><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Valor de la Colegiatura <span>*</span></label><div class="col-sm-9"><input type="number" name="value" ng-model="Fee.value" class="form-control" required=""><p class="help-block" ng-if="frmFee.value.$error.required">El valor de la colegiatura es obligatorio</p></div></div><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Fecha &Uacute;ltima de Pago <span>*</span></label><div class="col-sm-9"><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" readonly="" required="" name="fee_date" ng-model="Fee.fee_date" class="form-control datepicker" date-picker=""></div><p class="help-block" ng-if="frmFee.fee_date.$error.required">La fecha &uacute;ltima de pago es obligatoria</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Pago Obligatorio?<br><small class="text-navy">Indica si es el pago de esta colegiatura es obligatorio.</small></label><div class="col-sm-9"><input type="checkbox" name="is_mandatory" ng-model="Fee.is_mandatory" value="1" checked="checked"></div></div><div class="form-group"><label class="col-sm-3 control-label">Cuota por Reserva?<br><small class="text-navy">Indica si este pago representa la reserva de matr&iacute;cula.</small></label><div class="col-sm-9"><input type="checkbox" name="is_cover" ng-model="Fee.is_cover" value="1" checked="checked"></div></div><div class="form-group"><label class="col-sm-3 control-label">Cuota por Matr&iacute;cula?<br><small class="text-navy">Indica si este pago representa la matr&iacute;cula.</small></label><div class="col-sm-9"><input type="checkbox" name="is_enrollment_fee" ng-model="Fee.is_enrollment_fee" value="1" checked="checked"></div></div><div class="form-group"><label class="col-sm-3 control-label">Descripci&oacute;n</label><div class="col-sm-9"><input type="text" ng-model="Fee.description" class="form-control"></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.fee({id: plan.id})" class="btn btn-default">Cancelar</a></div></div></form></div></div><br><br><br>'),e.put("components/templates/fees/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Planes de Pago</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.plan">Planes de Pago</a></li><li><a ui-sref="catalogs.planupdate({id: plan.id})">{{ plan.name }}</a></li><li class="active"><strong>Colegiaturas</strong></li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><i class="fa fa-sort-numeric-asc"></i></th><th width="10"><check-all></check-all></th><th>Nombre</th><th>Valor</th><th>Fecha &Uacute;ltima de Pago</th><th>Obligatorio</th></tr></thead><tbody ui-sortable="sortableOptions" ng-model="fees"><tr dir-paginate="fee in fees | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><i class="fa fa-reorder draggable"></i></td><td><input type="checkbox" class="chk" name="sy_id" value="{{ fee.id }}"></td><td><a ui-sref="catalogs.feeupdate({id: plan.id, feeid: fee.id})">{{ fee.name }}</a></td><td>{{ fee.value | currency:"US $":2 }}</td><td>{{ fee.feeDate | date:"dd-MM-yyyy" }}</td><td><span class="label label-primary" ng-if="fee.isMandatory">Obligatorio</span></td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div><br><br><br>'),e.put("components/templates/modules/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>M&oacute;dulos</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.module">M&oacute;dulos</a></li><li class="active">{{ activeTitle }}</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{ activeTitle }} M&oacute;dulo</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmModule" ng-model="Module" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Nombre <span>*</span></label><div class="col-sm-9"><input type="text" name="name" ng-model="Module.name" class="form-control" required=""><p class="help-block" ng-if="frmModule.name.$error.required">El nombre es obligatorio</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Descripci&oacute;n</label><div class="col-sm-9"><input type="text" ng-model="Module.description" class="form-control"></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.module" class="btn btn-default">Cancelar</a></div></div></form></div></div>'),e.put("components/templates/modules/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>M&oacute;dulos</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li class="active">M&oacute;dulos</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th>Nombre</th><th>Descripci&oacute;n</th></tr></thead><tbody><tr dir-paginate="sy in data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ sy.id }}"></td><td><a ui-sref="catalogs.moduleupdate({id: sy.id})">{{ sy.name }}</a></td><td>{{ sy.description }}</td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/paymenttypes/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Formas de Pago</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.module">Formas de Pago</a></li><li class="active">{{ activeTitle }}</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{ activeTitle }} Formas de Pago</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmPaymentType" ng-model="PaymentType" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Nombre <span>*</span></label><div class="col-sm-9"><input type="text" name="name" ng-model="PaymentType.name" class="form-control" required=""><p class="help-block" ng-if="frmPaymentType.name.$error.required">El nombre es obligatorio</p></div></div><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Descuento <span>*</span></label><div class="col-sm-9"><input type="number" max="100" min="0" name="discount" ng-model="PaymentType.discount" class="form-control" required=""><p class="help-block" ng-if="frmPaymentType.discount.$error.min">El monto de descuento debe ser mayor &oacute; igual a 0.</p><p class="help-block" ng-if="frmPaymentType.discount.$error.max">El monto de descuento debe ser menor &oacute; igual a 100.</p><p class="help-block" ng-if="frmPaymentType.discount.$error.required">El monto de descuento es obligatorio. Escriba 0 si no aplica.</p><span class="label label-primary">El monto de descuento es un n&uacute;mero entre 0 y 100 e indica el porcentage(%) de descuento.</span></div></div><div class="form-group"><label class="col-sm-3 control-label">Forma de pago por defecto?<br><small class="text-navy">Si esta seleccionado aparecer&aacute; seleccionado en las formas de pago de colegiatura.</small></label><div class="col-sm-9"><input type="checkbox" ng-model="PaymentType.is_default"></div></div><div class="form-group"><label class="col-sm-3 control-label">Descripci&oacute;n</label><div class="col-sm-9"><input type="text" ng-model="PaymentType.description" class="form-control"></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.paymenttype" class="btn btn-default">Cancelar</a></div></div></form></div></div>'),e.put("components/templates/paymenttypes/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Formas de Pago</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li class="active">Formas de Pago</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th>Nombre</th><th>Descripci&oacute;n</th><th>Descuento</th><th>Forma de pago por defecto</th></tr></thead><tbody><tr dir-paginate="sy in data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ sy.id }}"></td><td><a ui-sref="catalogs.paymenttypeupdate({id: sy.id})">{{ sy.name }}</a></td><td>{{ sy.description }}</td><td>{{ sy.discount }}%</td><td><span ng-if="sy.isDefault" class="label label-primary">Defecto</span></td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/people/enrollment.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Alumnos</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="people">Personas</a></li><li><a ui-sref="people.students">Alumnos</a></li><li><a ui-sref="people.studentsupdate({id: Person.id})">{{ Person.firstname }} {{ Person.lastname }}</a></li><li class="active"><strong>{{ activeTitle }}</strong></li></ol></div></div><br><div class="tabs-container"><ul class="nav nav-tabs"><li><a ui-sref="people.studentsupdate({id: Person.id})">Perfil</a></li><li><a ui-sref="people.studentsrelatives({id: Person.id})" ng-if="Person.id">Familiares</a></li><li class="active"><a>Matr&iacute;cula</a></li><li><a ui-sref="people.studentspayment({id: Person.id})">Pagos</a></li><li><a ui-sref="people.expedient({id: Person.id})" ng-if="Person.id">Expediente</a></li></ul><div class="tab-content"><div class="tab-pane active" id="person"><div class="panel-body"><div app-forminfo=""></div><div app-message=""></div><form name="frmEnrollment" ng-model="Enrollment" novalidate=""><fieldset><legend><i class="fa fa-pencil"></i> Ficha</legend><div class="row"><div class="col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label>A&ntilde;o de Matr&iacute;cula <span>*</span></label><select name="enrollment_year_id" ng-model="Enrollment.enrollment_year_id" ng-options="enrollmentyear.id as enrollmentyear.name for enrollmentyear in enrollmentyears" class="form-control" ng-change="loadEnrollment();" tabindex="1" required=""></select></div></div></div><div class="row"><div class="col-sm-6 col-xs-12"><div class="form-group"><label>No. de Talonario</label> <input type="text" name="talonario" ng-model="Enrollment.talonario" class="form-control" tabindex="2"></div></div><div class="col-sm-6 col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label>Fecha de matr&iacute;cula <span>*</span></label><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" name="date_of_enrollment" ng-model="Enrollment.date_of_enrollment" date-picker="" class="form-control datepicker" tabindex="3" readonly="" required=""></div><p class="help-block" ng-if="frmEnrollment.date_of_enrollment.$error.required">La fecha de matr&iacute;cula es obligatoria</p></div></div></div><div class="row"><div class="col-sm-6 col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label>Grado <span>*</span></label><select name="year_id" ng-model="Enrollment.year_id" class="form-control" ng-options="year.id as year.name for year in years" tabindex="4" required=""></select><p class="help-block" ng-if="frmEnrollment.year_id.$error.required">El grado es obligatorio</p></div></div><div class="col-sm-6 col-xs-12"><div class="form-group"><label>Secci&oacute;n</label><select name="section_id" ng-model="Enrollment.section_id" class="form-control" ng-options="section.id as section.name for section in sections" tabindex="5"></select></div></div></div><div class="row"><div class="col-sm-12 col-xs-12"><div class="form-group"><label>Responsable</label><select name="parent_id" class="form-control" ng-model="Enrollment.parent_id" ng-options="parent.id as parent.name for parent in relatives" tabindex="6"></select></div></div></div></fieldset><div class="hr-line-dashed"></div><div class="form-group"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="people.students" class="btn btn-default">Cancelar</a></div></form></div></div></div></div><br><br><br>'),e.put("components/templates/people/expedient.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2 ng-if="isStudent">Alumnos</h2><h2 ng-if="!isStudent">Usuarios</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="people">Personas</a></li><li ng-if="isStudent"><a ui-sref="people.students">Alumnos</a></li><li ng-if="!isStudent"><a ui-sref="people.users">Usuarios</a></li><li ng-if="isStudent"><a ui-sref="people.studentsupdate({id: Person.id})">{{ activeTitle }}</a></li><li ng-if="!isStudent"><a ui-sref="people.usersupdate({id: Person.id})">{{ activeTitle }}</a></li><li class="active"><strong>Expediente</strong></li></ol></div></div><br><div class="tabs-container"><ul class="nav nav-tabs"><li ng-if="isStudent"><a ui-sref="people.studentsupdate({id: Person.id})">Perfil</a></li><li ng-if="isStudent"><a ui-sref="people.studentsrelatives({id: Person.id})">Familiares</a></li><li ng-if="isStudent"><a ui-sref="people.studentsenrollment({id: Person.id})">Matr&iacute;cula</a></li><li ng-if="isStudent"><a ui-sref="people.studentspayment({id: Person.id})">Pagos</a></li><li ng-if="!isStudent"><a ui-sref="people.usersupdate({id: Person.id})">Perfil</a></li><li class="active"><a>Expediente</a></li></ul><div class="tab-content"><div class="tab-pane active" id="relatives"><div class="panel-body"><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><fieldset><legend>Expediente</legend><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th width="15%">Fecha</th><th width="20%">Incidente</th><th width="15%">Lugar</th><th>Descripci&oacute;n</th></tr></thead><tbody><tr ng-repeat="expedient in expedients"><td><input type="checkbox" class="chk" name="sy_id" value="{{ expedient.id }}"></td><td><a ui-sref="people.expedientupdate({personId:expedient.personId, id:expedient.id})">{{ expedient.dateOfEvent | date:"dd/MM/yyyy" }}</a></td><td><a ui-sref="people.expedientupdate({personId:expedient.personId, id:expedient.id})">{{ expedient.subject }}</a></td><td>{{ expedient.location }}</td><td>{{ expedient.descriptionNoHtml | limitTo:150 }} ...</td></tr></tbody></table></div></fieldset></div></div></div></div></div></div>'),e.put("components/templates/people/expedientform.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2 ng-if="isStudent">Alumnos</h2><h2 ng-if="!isStudent">Usuarios</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="people">Personas</a></li><li ng-if="isStudent"><a ui-sref="people.students">Alumnos</a></li><li ng-if="!isStudent"><a ui-sref="people.users">Usuarios</a></li><li ng-if="isStudent"><a ui-sref="people.studentsupdate({id: Person.id})">{{ nombrePersona }}</a></li><li ng-if="!isStudent"><a ui-sref="people.usersupdate({id: Person.id})">{{ nombrePersona }}</a></li><li class="active"><strong>{{ activeTitle }}</strong></li></ol></div></div><br><div class="tabs-container"><ul class="nav nav-tabs"><li ng-if="isStudent"><a ui-sref="people.studentsupdate({id: Person.id})">Perfil</a></li><li ng-if="isStudent"><a ui-sref="people.studentsrelatives({id: Person.id})" ng-if="Person.id">Familiares</a> <a ng-if="Person.id == undefined || Person.id == null">Familiares</a></li><li ng-if="isStudent"><a ui-sref="people.studentsenrollment({id: Person.id})" ng-if="Person.id">Matr&iacute;cula</a> <a ng-if="Person.id == undefined || Person.id == null">Matr&iacute;cula</a></li><li ng-if="isStudent"><a ui-sref="people.studentspayment({id: Person.id})" ng-if="Person.id">Pagos</a> <a ng-if="Person.id == undefined || Person.id == null">Pagos</a></li><li ng-if="!isStudent"><a ui-sref="people.usersupdate({id: Person.id})">Perfil</a></li><li class="active"><a>Expediente</a></li></ul><div class="tab-content"><div class="tab-pane active" id="person"><div class="panel-body"><div app-forminfo=""></div><div app-message=""></div><form name="frmExpedient" ng-model="Expedient" novalidate=""><fieldset><legend><i class="fa fa-pencil"></i> Datos Generales</legend><div class="row"><div class="col-md-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">T&iacute;tulo <span>*</span></label> <input type="text" name="subject" ng-model="Expedient.subject" class="form-control" tabindex="1" required=""><p class="help-block" ng-if="frmExpedient.subject.$error.required">El t&iacute;tulo es obligatorio</p></div></div></div><div class="row"><div class="col-xs-6"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Lugar del Incidente <span>*</span></label> <input type="text" name="location" ng-model="Expedient.location" class="form-control" tabindex="2" required=""><p class="help-block" ng-if="frmExpedient.location.$error.required">El lugar del incidente es obligatorio</p></div></div><div class="col-xs-6"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Fecha del Incidente <span>*</span></label><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" name="date_of_event" ng-model="Expedient.date_of_event" placeholder="dd/mm/aaaa" class="form-control" tabindex="3" required=""></div><span class="label label-primary">dia/mes/a&ntilde;o</span><p class="date_of_event-error-message" style="display:none;">La fecha del incidente debe tener el formato: dia/mes/a&ntilde;o.</p><p class="help-block" ng-if="frmExpedient.date_of_event.$error.required">La fecha del incidente es obligatorio</p></div></div></div></fieldset><br><fieldset><legend><i class="fa fa-pencil"></i> Detalles del Incidente</legend><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">Descripci&oacute;n</label><summernote config="summernoteoptions" ng-model="Expedient.description"></summernote></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">Acuerdos/Observaciones</label><summernote config="summernoteoptions" ng-model="Expedient.event_result"></summernote></div></div></div></fieldset><div class="hr-line-dashed"></div><div class="form-group"><button type="button" class="btn btn-primary btn-save" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="people.expedient({id: personId})" class="btn btn-default">Cancelar</a></div></form></div></div></div></div><br><br><br>'),e.put("components/templates/people/form.html",'<style>\n.cropArea {\n    background: #E4E4E4;\n    overflow: hidden;\n    width:500px;\n    min-width: 100%;\n    height:350px;\n}\n</style><div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Alumnos</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="people">Personas</a></li><li><a ui-sref="people.students">Alumnos</a></li><li class="active"><strong>{{ activeTitle }}</strong></li></ol></div></div><br><div class="tabs-container"><ul class="nav nav-tabs"><li class="active"><a>Perfil</a></li><li><a ui-sref="people.studentsrelatives({id: Person.id})" ng-if="Person.id">Familiares</a> <a ng-if="Person.id == undefined || Person.id == null">Familiares</a></li><li><a ui-sref="people.studentsenrollment({id: Person.id})" ng-if="Person.id">Matr&iacute;cula</a> <a ng-if="Person.id == undefined || Person.id == null">Matr&iacute;cula</a></li><li><a ui-sref="people.studentspayment({id: Person.id})" ng-if="Person.id">Pagos</a> <a ng-if="Person.id == undefined || Person.id == null">Pagos</a></li><li><a ui-sref="people.expedient({id: Person.id})" ng-if="Person.id">Expediente</a> <a ng-if="Person.id == undefined || Person.id == null">Expediente</a></li></ul><div class="tab-content"><div class="tab-pane active" id="person"><div class="panel-body"><div app-forminfo=""></div><div app-message=""></div><form name="frmPerson" ng-model="Person" novalidate=""><fieldset><legend><i class="fa fa-pencil"></i> Datos Generales</legend><div class="row"><div class="col-md-3 col-sm-4 col-xs-12"><div style="width:100%; height:180px; background-color:#f1f1f1f1; display: block; text-align:center;"><img alt="100%x180" id="selectedImg" src="{{profilePicturePlaceholder}}" height="180"></div><button type="button" class="btn btn-default" style="width:100%;" ng-click="selectPicture();"><i class="fa fa-camera"></i> {{photoLabel}}</button></div><div class="col-md-9 col-sm-8 col-xs-12"><div class="row"><div class="col-md-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Apellidos <span>*</span></label> <input type="text" name="lastname" ng-model="Person.lastname" class="form-control" tabindex="1" required=""><p class="help-block" ng-if="frmPerson.lastname.$error.required">El apellido es obligatorio</p></div></div></div><div class="row"><div class="col-sm-7 col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Primer Nombre <span>*</span></label> <input type="text" name="firstname" ng-model="Person.firstname" class="form-control" tabindex="2" required=""><p class="help-block" ng-if="frmPerson.firstname.$error.required">El primer nombre es obligatorio</p></div></div><div class="col-sm-5 col-xs-12"><div class="form-group"><label class="control-label">Segundo Nombre</label> <input type="text" name="middlename" ng-model="Person.middlename" class="form-control" tabindex="3"></div></div></div><div class="row"><div class="col-sm-6 col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">G&eacute;nero <span>*</span></label><select name="gender" ng-model="Person.gender" class="form-control" tabindex="4" required=""><option value=""></option><option value="M">Masculino</option><option value="F">Femenino</option></select><p class="help-block" ng-if="frmPerson.gender.$error.required">El g&eacute;nero es obligatorio</p></div></div><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Fecha de Nacimiento</label><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" name="date_of_birth" ng-model="Person.date_of_birth" placeholder="dd/mm/aaaa" class="form-control" tabindex="5"></div><span class="label label-primary">dia/mes/a&ntilde;o</span><p class="date_of_birth-error-message" style="display:none;">La fecha de nacimiento debe tener el formato: dia/mes/a&ntilde;o.</p></div></div></div></div></div></fieldset><br><fieldset><legend><i class="fa fa-pencil"></i> Contacto</legend><div class="row"><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Ciudad</label> <input type="text" name="city" ng-model="Person.city" class="form-control" tabindex="6"></div></div><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Departamento</label><select name="state" class="form-control" ng-model="Person.state" tabindex="7"><option value=""></option><option ng-repeat="departamento in departamentos" value="{{ departamento }}">{{ departamento }}</option></select></div></div></div><div class="row"><div class="col-md-12"><div class="form-group"><label class="control-label">Direcci&oacute;n</label> <input type="text" name="address1" ng-model="Person.address1" class="form-control" tabindex="8"></div><div class="form-group"><input type="text" name="address2" ng-model="Person.address2" class="form-control" tabindex="9"></div></div></div><div class="row"><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Correo Electr&oacute;nico</label><input-email name="email" ng-model="Person.email" tabindex="10"></input-email></div></div><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Tel&eacute;fono</label><input-phone name="phone" ng-model="Person.phone" tabindex="11"></input-phone></div></div></div></fieldset><fieldset ng-if="customfields.length > 0"><legend><i class="fa fa-pencil"></i> Informaci&oacute;n Adicional</legend><div class="row" ng-repeat="input in customfields"><div class="col-md-12"><div class="form-group customfield-group" ng-class="{\'has-error\': frmPerson[input.name].$invalid && input.required}"><label class="control-label">{{ input.label }} <span ng-if="input.required">*</span></label><div ng-if="input.type == \'text\'"><input-text name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+12}}"></input-text></div><div ng-if="input.type == \'textarea\'"><input-text-long name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+12}}"></input-text-long></div><div ng-if="input.type == \'number\'"><input-number name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+12}}"></input-number></div><div ng-if="input.type == \'tel\'"><input-tel name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+12}}"></input-tel></div><div ng-if="input.type == \'date\'"><input-date name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+12}}"></input-date></div><div ng-if="input.type == \'email\'"><input-email name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+12}}"></input-email></div><div ng-if="input.type == \'url\'"><input-url name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+12}}"></input-url></div><div ng-if="input.type == \'select\'"><input-list name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" options="input.values" tabindex="{{$index+12}}"></input-list></div><div ng-if="input.type == \'checkbox\'"><input-multiple-options name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" options="input.values" tabindex="{{$index+12}}"></input-multiple-options></div><div ng-if="input.type == \'radio\'"><input-single-option name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" options="input.values" tabindex="{{$index+12}}"></input-single-option></div><span class="help-block" ng-if="input.required">Este campo es obligatorio.</span></div></div></div></fieldset><div class="hr-line-dashed"></div><div class="form-group"><button type="button" class="btn btn-primary btn-save" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="people.students" class="btn btn-default">Cancelar</a></div></form></div></div></div></div><br><br><br><div class="modal fade" tabindex="-1" role="dialog" id="myModal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Posible Duplicado</h4></div><div class="modal-body"><div class="row"><div class="col-sm-12"><div class="alert alert-info" role="alert">Se ha detectado posibles duplicados por favor confirme si desea editar un registro ya existente o desea agregar el nuevo registro. D&eacute; click en el nombre del alumno que desea editar su registro.</div></div></div><div class="row"><div class="col-sm-12"><button type="button" class="btn btn-primary" style="width: 100%;" ng-click="save(1);">FORZAR GUARDAR</button></div></div><hr><div class="row"><div class="col-sm-12"><div class="table-responsive"><table class="table table-condensed table-hover"><thead><tr><th>#</th><th>Nombre</th><th>Grado</th><th>Direcci&oacute;n</th><th>Tel&eacute;fono</th><th>Email</th></tr></thead><tbody><tr ng-repeat="item in duplicates"><td></td><td><a ui-sref="people.studentsupdate({id: item.id})" title="Actualizar Registro">{{ item.lastname }}, {{ item.firstname }} <span ng-if="item.middlename">{{ item.middlename }}</span></a></td><td>{{ item.year_name }}</td><td>{{ item.address1 }}<span ng-if="item.address2">, {{ item.address2 }}</span>, {{ item.city }}, {{ item.state }}</td><td>{{ item.phone }}</td><td>{{ item.email }}</td></tr></tbody></table></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button></div></div></div></div><div class="modal fade" tabindex="-1" role="dialog" id="myModalPicture"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Foto de Perfil</h4></div><div class="modal-body"><div class="row"><div class="col-lg-12"><div class="form-group"><label class="label-control">Seleccione una im&aacute;gen</label> <input type="file" class="form-control" id="fileInput"> <span class="label label-primary">La im&aacute;gen debe ser JPG, PNG &oacute; GIF</span></div></div></div><div class="row"><div class="col-xs-12"><div class="cropArea"><img-crop result-image-format="image/jpeg" result-image-quality="1.0" result-image="Picture.profileCroppedPicture" image="Picture.profilePicture"></img-crop></div></div></div><br><div class="row"><div class="col-xs-12"><div class="form-group"><img ng-src="{{Picture.profileCroppedPicture}}"></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button> <button type="button" class="btn btn-primary" ng-click="setPicture();">Aceptar</button></div></div></div></div>'),e.put("components/templates/people/payments.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Alumnos</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="people">Personas</a></li><li><a ui-sref="people.students">Alumnos</a></li><li><a ui-sref="people.studentsupdate({id: Person.id})">{{ Person.firstname }} {{ Person.lastname }}</a></li><li class="active"><strong>Pagos</strong></li></ol></div></div><br><div class="tabs-container"><ul class="nav nav-tabs"><li><a ui-sref="people.studentsupdate({id: Person.id})">Perfil</a></li><li><a ui-sref="people.studentsrelatives({id: Person.id})" ng-if="Person.id">Familiares</a></li><li><a ui-sref="people.studentsenrollment({id: Person.id})">Matr&iacute;cula</a></li><li class="active"><a>Pagos</a></li><li><a ui-sref="people.expedient({id: Person.id})" ng-if="Person.id">Expediente</a></li></ul><div class="tab-content"><div class="tab-pane active" id="relatives"><div class="panel-body"><div app-message=""></div><div class="row"><div class="col-lg-12"><fieldset><legend>Colegiaturas Pendientes</legend><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="35%">Colegiatura</th><th width="35%">Valor</th><th width="30%">Opci&oacute;n</th></tr></thead><tbody><tr ng-repeat="payment in pending"><td>{{ payment.name }}</td><td>{{ payment.value | currency:"USD $":2 }}</td><td><input ng-if="payment.showPaymentOpt" type="button" class="btn btn-primary" ng-click="pay(payment.id);" value="Pagar"></td></tr></tbody></table></div></fieldset></div></div><br><div class="row"><div class="col-lg-12"><fieldset><legend>Colegiaturas Pagadas</legend><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="30%">Colegiatura</th><th width="20%">Valor Cuota</th><th width="20%">Valor Cancelado</th><th width="30%">Opci&oacute;n</th></tr></thead><tbody><tr ng-repeat="payment in payed"><td>{{ payment.name }}</td><td>{{ payment.base | currency:"USD $":2 }}<br><small><em><font color="blue">({{ payment.discount }})</font></em></small></td><td><strong>{{ payment.valuePayed | currency:"USD $":2 }}</strong><br><small><em>{{ payment.dateOfPayment }}<br>{{ payment.payment_type_name }}<br><font color="red">({{ payment.penalty | currency:"USD $":2 }})</font></em></small></td><td><input ng-if="payment.showDeleteOpt" type="button" class="btn btn-danger" value="Deshacer Pago" ng-click="deletePayment(payment.paymentId)"></td></tr></tbody></table></div></fieldset></div></div></div></div></div></div><br><br><br><div class="modal fade" tabindex="-1" role="dialog" id="myModal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">{{ payment_title }}</h4></div><div class="modal-body"><form name="frmPaymentStudent" novalidate=""><input type="hidden" name="enrollment_id" ng-model="PaymentStudent.enrollment_id"> <input type="hidden" name="fee_id" ng-model="PaymentStudent.fee_id"> <input type="hidden" name="value" ng-model="PaymentStudent.value"><div class="form-group" show-errors="{showSuccess: true}"><label>Fecha de Pago <span>*</span></label><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" readonly="" required="" name="date_of_payment" ng-model="PaymentStudent.date_of_payment" class="form-control datepicker" date-picker=""></div><p class="help-block" ng-if="frmPaymentStudent.date_of_payment.$error.required">La fecha de pago es obligatoria.</p></div><div class="form-group" show-errors="{showSuccess: true}"><label>Forma de Pago <span>*</span></label><select name="payment_type_id" ng-model="PaymentStudent.payment_type_id" class="form-control" ng-options="paymenttype.id as paymenttype.name for paymenttype in paymenttypes" required=""></select><p class="help-block" ng-if="frmPaymentStudent.payment_type_id.$error.required">El tipo de pago es obligatorio.</p></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button> <button type="button" class="btn btn-success" ng-click="save(1);">Aceptar & Control de Pagos</button> <button type="button" class="btn btn-primary" ng-click="save(0);">Aceptar</button></div></div></div></div>'),e.put("components/templates/people/paymentscontrol.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Control de Pagos</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li class="active">Control de Pagos</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>Procesar pagos</h5></div><div class="ibox-content"><form><div class="row"><div class="col-xs-12"><div class="form-group"><div class="input-group"><input type="text" name="kw" id="kw" ng-model="kw" class="form-control input-lg" ng-change="cgSearch()"><div class="input-group-btn"><button class="btn btn-primary btn-lg" ng-click="search()">Buscar</button></div></div><p class="label label-default">Busque por c&oacute;digo del alumno &oacute; NPE</p></div></div></div><div class="row"><div class="col-xs-12"><div class="hr-line-dashed"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><ng-csv-import content="csv.content" header="csv.header" separator="csv.separator" result="csv.result" encoding="csv.encoding" callback="csv.callback" accept="csv.accept"></ng-csv-import><p class="label label-default">Seleccione el archivo CSV correspondiente al reporte del Banco</p></div></div></div></form><div class="row"><div class="col-xs-12"><div class="panel" style="display:none;"><div class="panel-body"><h3>No se encontraron resultados.</h3><table class="table table-striped table-condensed table-bordered"><caption style="font-size: 15px; font-weight: bold;">Resultados de la actualizaci&oacute;n de pagos</caption><thead><tr><th>Grado</th><th>Alumno</th><th>Concepto</th><th>Total Pagado</th><th>Multa</th><th>Fecha</th></tr></thead><tbody></tbody></table></div></div></div></div></div></div><div class="modal fade" tabindex="-1" role="dialog" id="dateOfPaymentModal"><div class="modal-dialog modal-sm" role="document"><div class="modal-content"><div class="modal-body"><form name="frmPayment"><div class="form-group" show-errors="{showSuccess: true}"><label>Fecha de Pago <span>*</span></label> <input type="text" readonly="" required="" name="dateofpayment" ng-model="Payment.dateofpayment" class="form-control datepicker" date-picker=""><p class="help-block" ng-if="frmPayment.payment_type_id.$error.required">La fecha de pago es obligatoria.</p></div><div class="form-group" show-errors="{showSuccess: true}"><label>Forma de Pago <span>*</span></label><select name="payment_type_id" ng-model="Payment.payment_type_id" class="form-control" ng-options="paymenttype.id as paymenttype.name for paymenttype in paymenttypes" required=""></select><p class="help-block" ng-if="frmPayment.payment_type_id.$error.required">El tipo de pago es obligatorio.</p></div><div class="form-group"><button type="button" class="btn btn-primary" ng-click="processPayment();">Aceptar</button></div></form></div></div></div></div>'),e.put("components/templates/people/relativesform.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Alumnos</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="people">Personas</a></li><li><a ui-sref="people.students">Alumnos</a></li><li><a ui-sref="people.studentsupdate({id: Linkto.id})">{{ Linkto.firstname }} {{ Linkto.lastname }}</a></li><li><a ui-sref="people.studentsrelatives({id: Linkto.id})">Familiares</a></li><li class="active"><strong>{{ title }}</strong></li></ol></div></div><br><div class="tabs-container"><ul class="nav nav-tabs"><li><a ui-sref="people.studentsupdate({id: Linkto.id})">Perfil</a></li><li class="active"><a>Familiares</a></li><li><a ui-sref="people.studentsenrollment({id: Linkto.id})">Matr&iacute;cula</a></li><li><a ui-sref="people.studentspayment({id: Linkto.id})">Pagos</a></li><li><a ui-sref="people.expedient({id: Linkto.id})">Expediente</a></li></ul><div class="tab-content"><div class="tab-pane active" id="person"><div class="panel-body"><div app-forminfo=""></div><div app-message=""></div><form name="frmPerson" ng-model="Person" novalidate=""><fieldset><legend><i class="fa fa-pencil"></i> Datos Generales</legend><div class="row"><div class="col-md-3 col-sm-4 col-xs-12"><img data-src="holder.js/100%x180" alt="100%x180" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9InllcyI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTM0IiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDEzNCAxODAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjwhLS0KU291cmNlIFVSTDogaG9sZGVyLmpzLzEwMCV4MTgwCkNyZWF0ZWQgd2l0aCBIb2xkZXIuanMgMi42LjAuCkxlYXJuIG1vcmUgYXQgaHR0cDovL2hvbGRlcmpzLmNvbQooYykgMjAxMi0yMDE1IEl2YW4gTWFsb3BpbnNreSAtIGh0dHA6Ly9pbXNreS5jbwotLT48ZGVmcz48c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWyNob2xkZXJfMTUzZWYxMDJkNjMgdGV4dCB7IGZpbGw6I0FBQUFBQTtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5OkFyaWFsLCBIZWx2ZXRpY2EsIE9wZW4gU2Fucywgc2Fucy1zZXJpZiwgbW9ub3NwYWNlO2ZvbnQtc2l6ZToxMHB0IH0gXV0+PC9zdHlsZT48L2RlZnM+PGcgaWQ9ImhvbGRlcl8xNTNlZjEwMmQ2MyI+PHJlY3Qgd2lkdGg9IjEzNCIgaGVpZ2h0PSIxODAiIGZpbGw9IiNFRUVFRUUiLz48Zz48dGV4dCB4PSI0MS4wNTQ2ODc1IiB5PSI5NC41Ij4xMzR4MTgwPC90ZXh0PjwvZz48L2c+PC9zdmc+" data-holder-rendered="true" style="height: 180px; width: 100%; display: block;"></div><div class="col-md-9 col-sm-8 col-xs-12"><div class="row"><div class="col-md-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Parentesco <span>*</span></label><select class="form-control" name="relationshiptype" ng-model="relationship_type_id" ng-options="type.id as type.name for type in types" tabindex="1" required=""></select><p class="help-block" ng-if="frmPerson.relationship_type_id.$error.required">El parentesco es obligatorio</p></div></div></div><div class="row"><div class="col-sm-7 col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Primer Nombre <span>*</span></label> <input type="text" name="firstname" ng-model="Person.firstname" class="form-control" tabindex="2" required=""><p class="help-block" ng-if="frmPerson.firstname.$error.required">El primer nombre es obligatorio</p></div></div><div class="col-sm-5 col-xs-12"><div class="form-group"><label class="control-label">Segundo Nombre</label> <input type="text" name="middlename" ng-model="Person.middlename" class="form-control" tabindex="3"></div></div></div><div class="row"><div class="col-md-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Apellidos <span>*</span></label> <input type="text" name="lastname" ng-model="Person.lastname" class="form-control" tabindex="4" required=""><p class="help-block" ng-if="frmPerson.lastname.$error.required">El apellido es obligatorio</p></div></div></div><div class="row"><div class="col-sm-6 col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">G&eacute;nero <span>*</span></label><select name="gender" ng-model="Person.gender" class="form-control" tabindex="5" required=""><option value=""></option><option value="M">Masculino</option><option value="F">Femenino</option></select><p class="help-block" ng-if="frmPerson.gender.$error.required">El g&eacute;nero es obligatorio</p></div></div><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Fecha de Nacimiento</label><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" name="date_of_birth" ng-model="Person.date_of_birth" placeholder="dd/mm/aaaa" class="form-control" tabindex="6"></div><span class="label label-primary">dia/mes/a&ntilde;o</span><p class="date_of_birth-error-message" style="display:none;">La fecha de nacimiento debe tener el formato: dia/mes/a&ntilde;o.</p></div></div></div></div></div></fieldset><fieldset><legend><i class="fa fa-pencil"></i> Contacto</legend><div class="row"><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Ciudad</label> <input type="text" name="city" ng-model="Person.city" class="form-control" tabindex="7"></div></div><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Departamento</label><select name="state" class="form-control" ng-model="Person.state" tabindex="8"><option value=""></option><option ng-repeat="departamento in departamentos" value="{{ departamento }}">{{ departamento }}</option></select></div></div></div><div class="row"><div class="col-md-12"><div class="form-group"><label class="control-label">Direcci&oacute;n</label> <input type="text" name="address1" ng-model="Person.address1" class="form-control" tabindex="9"></div><div class="form-group"><input type="text" name="address2" ng-model="Person.address2" class="form-control" tabindex="10"></div></div></div><div class="row"><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Correo Electr&oacute;nico</label><input-email name="email" ng-model="Person.email" tabindex="11"></input-email></div></div><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Tel&eacute;fono</label><input-phone name="phone" ng-model="Person.phone" tabindex="12"></input-phone></div></div></div></fieldset><fieldset><legend><i class="fa fa-pencil"></i> Informaci&oacute;n Adicional</legend><div class="row" ng-repeat="input in customfields"><div class="col-md-12"><div class="form-group customfield-group" ng-class="{\'has-error\': frmPerson[input.name].$invalid && input.required}"><label class="control-label">{{ input.label }} <span ng-if="input.required">*</span></label><div ng-if="input.type == \'text\'"><input-text name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" format="{{ input.pattern }}" tabindex="{{$index+13}}"></input-text></div><div ng-if="input.type == \'textarea\'"><input-text-long name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+13}}"></input-text-long></div><div ng-if="input.type == \'number\'"><input-number name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+13}}"></input-number></div><div ng-if="input.type == \'tel\'"><input-phone name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+13}}"></input-phone></div><div ng-if="input.type == \'date\'"><input-date name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+13}}"></input-date></div><div ng-if="input.type == \'email\'"><input-email name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+13}}"></input-email></div><div ng-if="input.type == \'url\'"><input-url name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" tabindex="{{$index+13}}"></input-url></div><div ng-if="input.type == \'select\'"><input-list name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" options="input.values" tabindex="{{$index+13}}"></input-list></div><div ng-if="input.type == \'checkbox\'"><input-multiple-options name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" options="input.values" tabindex="{{$index+13}}"></input-multiple-options></div><div ng-if="input.type == \'radio\'"><input-single-option name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" options="input.values" tabindex="{{$index+13}}"></input-single-option></div><p class="help-block" ng-if="frmPerson[input.name].$error.required">El g&eacute;nero es obligatorio</p></div></div></div></fieldset><div class="hr-line-dashed"></div><div class="form-group"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="people.studentsrelatives({id: Linkto.id})" class="btn btn-default">Cancelar</a></div></form></div></div></div></div><br><br><br><div class="modal fade" tabindex="-1" role="dialog" id="myModal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Posible Duplicado</h4></div><div class="modal-body"><div class="row"><div class="col-sm-12"><div class="alert alert-info" role="alert">Se ha detectado posibles duplicados por favor confirme si desea vincular al alumno uno de los registros ya existentes o desea agregar el nuevo registro. D&eacute; click en el nombre del registro que desea vincular al alumno.</div></div></div><div class="row"><div class="col-sm-12"><button type="button" class="btn btn-primary" style="width: 100%;" ng-click="save(1);">FORZAR GUARDAR</button></div></div><hr><div class="row"><div class="col-sm-12"><div class="table-responsive"><table class="table table-condensed table-hover"><thead><tr><th width="10%"></th><th width="20%">Nombre</th><th width="30%">Direcci&oacute;n</th><th width="40%">Informaci&oacute;n Adicional</th></tr></thead><tbody><tr ng-repeat="item in duplicates"><td><input type="button" value="Vincular" class="btn btn-default" ng-click="addRelative(item.id);"></td><td>{{ item.firstname }} <span ng-if="item.middlename">{{ item.middlename }}</span> {{ item.lastname }}</td><td>{{ item.address1 }}<span ng-if="item.address2">, {{ item.address2 }}</span>, {{ item.city }}, {{ item.state }}</td><td><ul><li ng-repeat="customfield in item.customfields">{{ customfield.label }}: {{ customfield.value }}</li><li>Tel&eacute;fono: {{ item.phone }}</li><li>Email: {{ item.email }}</li></ul></td></tr></tbody></table></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button></div></div></div></div>'),e.put("components/templates/people/relativesindex.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Alumnos</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="people">Personas</a></li><li><a ui-sref="people.students">Alumnos</a></li><li><a ui-sref="people.studentsupdate({id: Person.id})">{{ activeTitle }}</a></li><li class="active"><strong>Familiares</strong></li></ol></div></div><br><div class="tabs-container"><ul class="nav nav-tabs"><li><a ui-sref="people.studentsupdate({id: Person.id})">Perfil</a></li><li class="active"><a>Familiares</a></li><li><a ui-sref="people.studentsenrollment({id: Person.id})">Matr&iacute;cula</a></li><li><a ui-sref="people.studentspayment({id: Person.id})">Pagos</a></li><li><a ui-sref="people.expedient({id: Person.id})" ng-if="Person.id">Expediente</a></li></ul><div class="tab-content"><div class="tab-pane active" id="relatives"><div class="panel-body"><div class="row"><div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 visible-xs"><div class="btn-group" role="group"><button type="button" class="btn btn-primary" ng-click="addNew();"><i class="fa fa-plus"></i></button> <button type="button" class="btn btn-default" ng-click="openModal();"><i class="fa fa-group"></i></button> <button type="button" class="btn btn-default" ng-click="toPrint();"><i class="fa fa-print"></i></button> <button type="button" class="btn btn-default" ng-click="toTrash();"><i class="fa fa-trash"></i></button></div></div><div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 hidden-xs"><div class="btn-group" role="group"><button type="button" class="btn btn-primary" ng-click="addNew();"><i class="fa fa-plus"></i> Nuevo</button> <button type="button" class="btn btn-default" ng-click="openModal();"><i class="fa fa-user-plus"></i> Hermanos</button> <button type="button" class="btn btn-default" ng-click="toPrint();"><i class="fa fa-print"></i> Imprimir</button> <button type="button" class="btn btn-default" ng-click="toTrash();"><i class="fa fa-trash"></i> Eliminar</button></div></div><div class="col-lg-6 col-md-6 col-sm-6 col-xs-6"><form><div class="input-group"><input type="text" name="keywords" id="keywords" class="form-control" value="" placeholder="buscar..."><div class="input-group-btn"><button class="btn btn-default hidden-xs" ng-click="search();">Buscar</button> <button class="btn btn-default visible-xs" ng-click="search();"><i class="fa fa-search"></i></button></div></div></form></div></div><br><div app-message=""></div><div class="row"><div class="col-lg-12"><fieldset><legend>Familiares</legend><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th width="15%">C&oacute;digo</th><th width="20%">Nombre</th><th>Parentesco</th><th>Tel&eacute;fono</th><th>Direcci&oacute;n</th></tr></thead><tbody><tr dir-paginate="relative in Relatives | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ relative.relationship_id }}"></td><td><a ui-sref="people.studentsrelativesupdate({referral_id: relative.id, id: Person.id})">{{relative.code}}</a></td><td><a ui-sref="people.studentsrelativesupdate({referral_id: relative.id, id: Person.id})">{{ relative.firstname }} <span ng-if="relative.middlename.length > 0">{{ relative.middlename }}</span> {{ relative.lastname }}</a></td><td>{{ relative.relationship_name }}</td><td>{{ relative.phone }}</td><td>{{ relative.address1 }}<span ng-if="relative.address2.length > 0">{{ relative.address2 }}</span>, {{ relative.city }}, {{ relative.state }}</td></tr></tbody></table></div></fieldset></div></div><div class="row" ng-if="Siblings.length > 0"><div class="col-lg-12"><fieldset><legend>Hermanos</legend><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"></th><th width="15%">C&oacute;digo</th><th width="20%">Nombre</th><th>Grado</th><th>Secci&oacute;n</th><th>Tel&eacute;fono</th></tr></thead><tbody><tr ng-repeat="sibling in Siblings"><td>&nbsp;</td><td><a ui-sref="people.studentspayment({id: sibling.id})">{{ sibling.code }}</a></td><td><a ui-sref="people.studentspayment({id: sibling.id})">{{ sibling.lastname }}, {{ sibling.firstname }} <span ng-if="sibling.middlename.length > 0">{{ sibling.middlename }}</span></a></td><td>{{sibling.year_name}}</td><td>{{sibling.section_name}}</td><td>{{sibling.phone}}</td></tr></tbody></table></div></fieldset></div></div></div></div></div></div><br><br><br><div class="modal fade" tabindex="-1" role="dialog" id="myModal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Buscar Hermanos</h4></div><div class="modal-body"><div class="row"><div class="col-sm-12"><form><div class="input-group"><input type="text" name="kw" id="kw" class="form-control" value="" placeholder="buscar..."><div class="input-group-btn"><button class="btn btn-default" ng-click="searchStudent();">Buscar</button></div></div></form></div></div><hr><div class="row"><div class="col-sm-12"><div class="table-responsive"><table class="table table-condensed table-hover"><thead><tr><th width="20%"></th><th width="15%">C&oacute;digo</th><th width="50%">Nombre</th><th width="15%">Grado</th></tr></thead><tbody><tr ng-repeat="item in siblings"><td><button type="button" class="btn btn-success" ng-click="getRelativesByStudent(item.id);">Vincular</button></td><td>{{ item.code }}</td><td>{{ item.lastname }}, {{ item.firstname }} <span ng-if="item.middlename">{{ item.middlename }}</span></td><td>{{ item.year_name }}</td></tr></tbody></table></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button></div></div></div></div>'),e.put("components/templates/persontypes/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Tipo de Personas</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.persontype">Tipo de Personas</a></li><li class="active">{{ activeTitle }}</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{ activeTitle }} Tipo de Personas</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmPersonType" ng-model="PersonType" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Nombre <span>*</span></label><div class="col-sm-9"><input type="text" name="name" ng-model="PersonType.name" class="form-control" required=""><p class="help-block" ng-if="frmPersonType.name.$error.required">El nombre es obligatorio</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Descripci&oacute;n</label><div class="col-sm-9"><input type="text" ng-model="PersonType.description" class="form-control"></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.persontype" class="btn btn-default">Cancelar</a></div></div></form></div></div>'),e.put("components/templates/persontypes/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Tipo de Personas</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li class="active">Tipo de Personas</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th>Nombre</th><th>Descripci&oacute;n</th></tr></thead><tbody><tr dir-paginate="sy in data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ sy.id }}"></td><td><a ui-sref="catalogs.persontypeupdate({id: sy.id})">{{ sy.name }}</a></td><td>{{ sy.description }}</td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/plans/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Planes de Pago</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.plan">Planes de Pago</a></li><li class="active">{{ activeTitle }}</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{ activeTitle }} Plan de Pago</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmPaymentPlan" ng-model="PaymentPlan" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">A&ntilde;o Escolar <span>*</span></label><div class="col-sm-9"><select name="enrollment_year_id" ng-model="PaymentPlan.enrollment_year_id" class="form-control" ng-options="option.id as option.name for option in schoolyears" required=""></select><p class="help-block" ng-if="frmPaymentPlan.enrollment_year_id.$error.required">El A&ntilde;o escolar es obligatorio</p></div></div><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">C&oacute;digo <span>*</span></label><div class="col-sm-9"><input type="text" name="code" ng-model="PaymentPlan.code" class="form-control" required=""><p class="help-block" ng-if="frmPaymentPlan.code.$error.required">El c&oacute;digo es obligatorio</p></div></div><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Nombre <span>*</span></label><div class="col-sm-9"><input type="text" name="name" ng-model="PaymentPlan.name" class="form-control" required=""><p class="help-block" ng-if="frmPaymentPlan.name.$error.required">El nombre es obligatorio</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Valor de la Matr&iacute;cula</label><div class="col-sm-9"><input type="number" ng-model="PaymentPlan.enrollment_fee" class="form-control"></div></div><div class="form-group"><label class="col-sm-3 control-label">Valor de la Reserva</label><div class="col-sm-9"><input type="number" ng-model="PaymentPlan.cover" class="form-control"></div></div><div class="form-group"><label class="col-sm-3 control-label">Descripci&oacute;n</label><div class="col-sm-9"><input type="text" ng-model="PaymentPlan.description" class="form-control"></div></div><div class="form-group"><label class="col-sm-3 control-label">Grados que aplica el plan <span>*</span></label><div class="col-sm-9"><select chosen="" multiple="" name="years" class="form-control" ng-model="PaymentPlan.years" ng-options="option.id as option.name for option in syears" required=""></select><p class="help-block" ng-if="frmPaymentPlan.years.$error.required">Seleccione al menos uno.</p></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.plan" class="btn btn-default">Cancelar</a></div></div></form></div></div><br><br><br>'),e.put("components/templates/plans/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Planes de Pago</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li class="active">Planes de Pago</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><form><div class="row"><div class="col-sm-4"><div class="form-group"><label class="control-label">Filtrar por A&ntilde;o Escolar:</label><select name="schoolyear" class="form-control" ng-model="schoolyear" ng-change="get(1);" ng-options="option.id as option.name for option in schoolyears"></select></div></div></div></form><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th width="10%"></th><th>C&oacute;digo</th><th>Nombre</th><th>Descripci&oacute;n</th><th>Grados</th></tr></thead><tbody><tr dir-paginate="sy in plans | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ sy.id }}"></td><td><a ui-sref="catalogs.fee({id: sy.id})" class="btn btn-sm btn-default">Colegiaturas</a></td><td><a ui-sref="catalogs.planupdate({id: sy.id})">{{ sy.code }}</a></td><td><a ui-sref="catalogs.planupdate({id: sy.id})">{{ sy.name }}</a></td><td>{{ sy.description }}</td><td><span ng-repeat="year in sy.years">{{ year.name }},</span></td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/relationshiptypes/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Tipos de Relaci&oacute;n Familiar</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.relationshiptype">Tipos de Relaci&oacute;n Familiar</a></li><li class="active">{{ activeTitle }}</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{ activeTitle }} Tipo de Relaci&oacute;n Familiar</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmRelationshipType" ng-model="RelationshipType" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Nombre <span>*</span></label><div class="col-sm-9"><input type="text" name="name" ng-model="RelationshipType.name" class="form-control" required=""><p class="help-block" ng-if="frmRelationshipType.name.$error.required">El nombre es obligatorio</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Descripci&oacute;n</label><div class="col-sm-9"><input type="text" ng-model="RelationshipType.description" class="form-control"></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.relationshiptype" class="btn btn-default">Cancelar</a></div></div></form></div></div>'),e.put("components/templates/relationshiptypes/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Tipos de Relaci&oacute;n Familiar</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li class="active">Tipos de Relaci&oacute;n Familiar</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th>Nombre</th><th>Descripci&oacute;n</th></tr></thead><tbody><tr dir-paginate="sy in data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ sy.id }}"></td><td><a ui-sref="catalogs.relationshiptypeupdate({id: sy.id})">{{ sy.name }}</a></td><td>{{ sy.description }}</td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/reports/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Reportes</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Reportes</a></li><li class="active"><strong>{{ title }}</strong></li></ol></div></div><br><form name="frmReport" ng-model="Report" novalidate=""><div class="ibox float-e-margins"><div class="ibox-title"><h5>Opciones Generales</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-6"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">A&ntilde;o escolar <span>*</span></label><select name="schoolyear" ng-model="Report.schoolyear" class="form-control" ng-options="option.id as option.name for option in schoolyears" required=""></select><p class="help-block" ng-if="frmReport.schoolyear.$error.required">El a&ntilde;o escolar es obligatorio</p></div></div><div class="col-sm-6"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Nombre del reporte <span>*</span></label> <input type="text" name="name" ng-model="Report.name" class="form-control" required=""><p class="help-block" ng-if="frmReport.name.$error.required">El nombre del reporte es obligatorio</p></div></div></div><div class="row"><div class="col-sm-12"><div class="form-group"><label class="control-label">Descripci&oacute;n</label> <textarea name="description" ng-model="Report.description" class="form-control" rows="2" style="resize: none;"></textarea></div></div></div><div class="row"><div class="col-sm-4"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Tipo de reporte <span>*</span></label><select name="type" ng-model="Report.type" class="form-control" ng-change="setUpColumns();" ng-options="option.value as option.text for option in categories" required=""></select><p class="help-block" ng-if="frmReport.type.$error.required">El tipo de reporte es obligatorio</p></div></div><div class="col-sm-4"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Formato del reporte <span>*</span></label><select name="display" ng-model="Report.display" class="form-control" ng-options="option.value as option.text for option in types" required=""></select><p class="help-block" ng-if="frmReport.display.$error.required">El formato del reporte es obligatorio</p></div></div><div class="col-sm-4"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Orientaci&oacute;n del reporte <span>*</span></label><select name="layout" ng-model="Report.layout" class="form-control" ng-options="option.value as option.text for option in layout" required=""></select><p class="help-block" ng-if="frmReport.layout.$error.required">La orientaci&oacute;n del reporte es obligatoria</p></div></div></div></div></div><div class="ibox float-e-margins"><div class="ibox-title"><h5>Campos</h5></div><div class="ibox-content"><div class="row"><div class="col-xs-6 col-sm-6 col-md-6" style="text-align: right;"><label>Campos disponibles:</label></div><div class="col-xs-6 col-sm-6 col-md-6" style="text-align: left;"><label>Campos selecionados:</label></div></div><div class="row"><div class="col-xs-6 col-sm-6 col-md-6" style="text-align: right;"><div ui-sortable="sortableOptions" class="apps-container screen pull-right" style="max-height: 360px; overflow-x: auto;" ng-model="availableColumns"><div class="app" ng-repeat="field in availableColumns">{{field.text}}</div></div></div><div class="col-xs-6 col-sm-6 col-md-6" style="text-align: left;"><div ui-sortable="sortableOptions" class="apps-container screen pull-left" ng-model="Report.selectedColumns"><div class="app" ng-repeat="field in Report.selectedColumns">{{field.text}}</div></div></div></div></div></div><div class="ibox float-e-margins"><div class="ibox-title"><h5>Filtros</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Criterio para los filtros <span>*</span></label><select name="filtertype" ng-model="Report.filtertype" class="form-control" ng-options="option.value as option.text for option in filtertypes" required=""></select><p class="help-block" ng-if="frmReport.filtertype.$error.required">El criterio para los filtros del reporte es obligatorio</p></div></div></div><div class="row" ng-repeat="reportfilter in Report.filters"><div class="col-sm-1"><div class="form-group"><label>Borrar</label> <button type="button" class="btn btn-danger" ng-click="removeFilter($index);" title="Eliminar filtro"><i class="fa fa-trash"></i></button></div></div><div class="col-sm-3"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Filtro <span>*</span></label><select class="form-control" name="filter[{{ index }}]" ng-model="Report.filters[$index].filter" ng-options="option.value as option.text for option in filters" required=""></select><p class="help-block" ng-if="frmReport.filter[$index].$error.required">El tipo de filtro es obligatorio</p></div></div><div class="col-sm-2" ng-if="Report.filters[$index].filter.length > 0"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Condici&oacute;n <span>*</span></label><select class="form-control" name="condition[{{ index }}]" ng-model="Report.filters[$index].condition" ng-options="option.value as option.text for option in filtervalues[Report.filters[$index].filter].conditions" required=""></select><p class="help-block" ng-if="frmReport.condition[$index].$error.required">La condici&oacute;n es obligatoria</p></div></div><div class="col-sm-6" ng-if="Report.filters[$index].filter.length > 0"><div ng-if="Report.filters[$index].filter == \'paymenttype_id\' || Report.filters[$index].filter == \'year_id\' || Report.filters[$index].filter == \'section_id\' || Report.filters[$index].filter == \'fee_date\'"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Valor Buscado <span>*</span></label><select chosen="" multiple="" class="form-control" name="value[{{ index }}]" ng-model="Report.filters[$index].value" ng-options="option.id as option.name for option in filtervalues[Report.filters[$index].filter].value" required=""></select></div></div><div ng-if="Report.filters[$index].filter == \'student_id\'"><div class="col-xs-4"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Grado <span>*</span></label><select class="form-control" name="selector[{{ index }}]" ng-model="Report.filters[$index].selector" ng-change="getStudents(Report.filters[$index].selector);" ng-options="option.id as option.name for option in filtervalues[Report.filters[$index].filter].value" required=""></select></div></div><div class="col-xs-8"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Valor Buscado <span>*</span></label><select chosen="" multiple="" class="form-control" name="value[{{ index }}]" ng-model="Report.filters[$index].value" ng-options="option.id as option.name for option in students" required=""></select></div></div></div><div ng-if="Report.filters[$index].filter == \'payment_penalty\' || Report.filters[$index].filter == \'gender\' || Report.filters[$index].filter == \'payment_ontime\'"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Valor Buscado <span>*</span></label><select class="form-control" name="value[{{ index }}]" ng-model="Report.filters[$index].value" ng-options="option.value as option.text for option in filtervalues[Report.filters[$index].filter].value" required=""></select></div></div><div ng-if="Report.filters[$index].filter == \'date_of_birth\'"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Valor Buscado <span>*</span></label><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" class="form-control yearpicker" year-picker="" name="value[{{ index }}]" ng-model="Report.filters[$index].value" required="" readonly=""></div></div></div><div ng-if="Report.filters[$index].filter == \'city\' || Report.filters[$index].filter == \'state\'"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Valor Buscado <span>*</span></label><select chosen="" multiple="" class="form-control" name="value[{{ index }}]" ng-model="Report.filters[$index].value" required=""><option ng-repeat="option in filtervalues[Report.filters[$index].filter].value" value="{{ option }}">{{ option }}</option></select></div></div><p class="help-block" ng-if="frmReport.value[$index].$error.required">El valor buscado es obligatorio</p></div></div><div class="row"><div class="col-sm-1 col-xs-12"><button type="button" class="btn btn-success" ng-click="addFilter();">Agregar Filtro</button></div></div></div></div><div class="ibox float-e-margins"><div class="ibox-title"><h5>Ordenar por</h5></div><div class="ibox-content"><div class="row" ng-repeat="reportsorting in Report.sorting"><div class="col-sm-1"><div class="form-group"><label>Borrar</label> <button type="button" class="btn btn-danger" ng-click="removeSorting($index);" title="Eliminar criterio de ordenamiento"><i class="fa fa-trash"></i></button></div></div><div class="col-sm-3"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Campo <span>*</span></label><select class="form-control" name="sortBy[{{ index }}]" ng-model="Report.sorting[$index].sortBy" ng-options="option.value as option.text for option in Report.selectedColumns" required=""></select><p class="help-block" ng-if="frmReport.sortBy[$index].$error.required">El campo de ordenamiento es obligatorio</p></div></div><div class="col-sm-3"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Criterio <span>*</span></label><select class="form-control" name="sortOrder[{{ index }}]" ng-model="Report.sorting[$index].sortOrder" ng-options="option.value as option.text for option in sorting" required=""></select><p class="help-block" ng-if="frmReport.sortOrder[$index].$error.required">El criterio de ordenamiento es obligatorio</p></div></div></div><div class="row"><div class="col-sm-1 col-xs-12"><button type="button" class="btn btn-success" ng-click="addSorting();">Agregar Criterio</button></div></div></div></div><div class="ibox float-e-margins"><div class="ibox-title"><h5>Agrupar por</h5></div><div class="ibox-content"><div class="row"><div class="col-sm-12"><div class="form-group"><label class="control-label">Campo(s) <span>*</span></label><select placeholdertextmultiple="Seleccione alguna opcion" chosen="" multiple="" class="form-control" name="groupBy[{{ index }}]" ng-model="Report.groupby" ng-options="option.value as option.text for option in Report.selectedColumns"></select></div></div></div><div class="row"><div class="col-sm-12"><div class="hr-line-dashed"></div><div class="form-group"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="reports.listparams({year_id: Report.schoolyear, report_id: reportId})" class="btn btn-success"><i class="fa fa-eye"></i> Ver Reporte</a> <a ui-sref="reports.list" class="btn btn-default">Cancelar</a></div></div></div></div></div></form><br><br>'),e.put("components/templates/reports/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Reportes</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li class="active"><strong>Reportes</strong></li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>Reportes</h5></div><div class="ibox-content"><div class="row"><div class="col-xs-12 col-sm-3"><div class="form-group"><label>A&ntilde;o Escolar</label><select chosen="" class="form-control" name="schoolyear" ng-model="schoolyear" ng-change="listReports()" ng-options="option.id as option.name for option in schoolyears"></select></div></div><div class="col-xs-12 col-sm-8"><div class="form-group"><label>Reporte</label><select chosen="" class="form-control" name="selectedReport" ng-model="selectedReport" ng-change="display()" ng-options="option.id as option.name for option in reports"></select></div></div><div class="col-xs-12 col-sm-1"><div class="form-group"><label>&nbsp;</label><br><button class="btn btn-primary" type="button" ng-click="editReport();" title="Editar Reporte"><i class="fa fa-pencil"></i></button></div></div></div><div class="row"><div class="col-sm-12"><div class="hr-line-dashed"></div></div></div><div class="row"><div class="col-xs-6 col-xs-offset-6" style="text-align: right;"><div class="btn-group btn-group-sm" role="group"><button type="button" class="btn btn-primary" ng-click="getExcel()"><i class="fa fa-file-excel-o"></i> Exportar a Excel</button> <button type="button" class="btn btn-default" ng-click="display()"><i class="fa fa-refresh"></i> Refrescar</button></div></div></div><div class="row"><div class="col-xs-12"><h2>{{ Report.report.name }}</h2></div></div><div class="row"><div class="col-xs-12"><div class="table-responsive table-content"><table class="table table-condensed table-bordered table-hover table-striped"><thead ng-if="Report.report.layout == \'portrait\'"><tr><th ng-repeat="header in Report.report.columns" width="{{ table[header].width }}px">{{ table[header].text }}</th><th ng-if="Report.report.format == \'chart\'" ng-repeat="header in Report.report.groupingFields" width="{{ table[header].width }}px">{{ table[header].text }}</th></tr></thead><thead ng-if="Report.report.layout == \'landscape\'"><tr><th ng-repeat="header in Report.report.columns" width="{{ table[header].width }}px">{{ table[header].text }}</th><th ng-repeat="header in Report.report.groupingFields" width="35px" style="word-wrap: break-word;">{{ header }}</th></tr></thead><tbody ng-if="grouped && Report.report.format == \'grid\' && Report.report.layout == \'portrait\'" ng-repeat="record in data"><tr><th colspan="{{ colspan }}"><span ng-repeat="group in Report.report.groupingFields">{{ record[group] }}<span ng-if="!$last">/</span></span></th></tr><tr ng-repeat="d in record.data"><td ng-repeat="column in Report.report.columns"><span ng-if="table[column].type == \'currency\'" class="pull-right">{{ d[column] | currency:"$ ":2 }}</span> <span ng-if="table[column].type == \'date\'" class="text-center">{{ d[column] | date:\'dd-MM-yyyy\' }}</span> <span ng-if="table[column].type != \'currency\' && table[column].type != \'date\'">{{ d[column] }}</span></td></tr></tbody><tbody ng-if="!grouped && Report.report.format == \'grid\' && Report.report.layout == \'portrait\'"><tr ng-repeat="d in data"><td ng-repeat="column in Report.report.columns"><span ng-if="table[column].type == \'currency\'" class="pull-right">{{ d[column] | currency:"$ ":2 }}</span> <span ng-if="table[column].type == \'date\'" class="text-center">{{ d[column] | date:\'dd-MM-yyyy\' }}</span> <span ng-if="table[column].type != \'currency\' && table[column].type != \'date\'">{{ d[column] }}</span></td></tr></tbody><tbody ng-if="Report.report.format == \'chart\' && Report.report.layout == \'portrait\'" ng-repeat="d in data"><tr ng-repeat="dd in d.data"><td ng-repeat="column in Report.report.columns"><span ng-if="table[column].type == \'currency\'" class="pull-right">{{ dd[column] | currency:"$ ":2 }}</span> <span ng-if="table[column].type == \'date\'" class="text-center">{{ dd[column] | date:\'dd-MM-yyyy\' }}</span> <span ng-if="table[column].type != \'currency\' && table[column].type != \'date\'">{{ dd[column] }}</span></td><td rowspan="{{ colspan }}" ng-repeat="column in Report.report.groupingFields"><span ng-if="table[column].type == \'currency\'" class="pull-right">{{ d[column] | currency:"$ ":2 }}</span> <span ng-if="table[column].type == \'date\'" class="text-center">{{ d[column] | date:\'dd-MM-yyyy\' }}</span> <span ng-if="table[column].type != \'currency\' && table[column].type != \'date\'">{{ d[column] }}</span></td></tr></tbody><tbody ng-if="Report.report.layout == \'landscape\'"><tr ng-repeat="dd in data"><td ng-repeat="column in Report.report.columns"><span ng-if="table[column].type == \'currency\'" class="pull-right">{{ dd[column] | currency:"$ ":2 }}</span> <span ng-if="table[column].type == \'date\'" class="text-center">{{ dd[column] | date:\'dd-MM-yyyy\' }}</span> <span ng-if="table[column].type != \'currency\' && table[column].type != \'date\'">{{ dd[column] }}</span></td><td ng-repeat="column in Report.report.groupingFields" ng-class="{\'filled-cell\': dd.group[column]}"></td></tr></tbody></table></div><div class="progress progress-striped active"><div style="width: 100%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="100" role="progressbar" class="progress-bar progress-bar-primary">Cargando....</div></div></div></div></div></div><br>'),e.put("components/templates/reports/jslist.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Reportes</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li class="active"><strong>Reportes</strong></li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>Reportes</h5></div><div class="ibox-content"><form name="frmReport" ng-model="JSReports" novalidate=""><div class="row"><div class="col-xs-12"><div class="form-group"><label>Reporte <span>*</span></label><select class="form-control" name="reportUri" ng-model="JSReports.reportUri" ng-change="getReportParams()" ng-options="option.uri as option.label for option in reportList" required=""></select><p class="help-block" ng-if="frmReport.reportUri.$error.required">Por favor seleccione el reporte que desea generar.</p></div></div></div><div class="row"><div class="col-sm-12"><div class="hr-line-dashed"></div></div></div><div class="row" ng-if="JSReports.hasOwnProperty(\'ENROLLMENT_YEAR_ID\')"><div class="col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label>A&ntilde;o Escolar <span>*</span></label><select class="form-control" name="ENROLLMENT_YEAR_ID" ng-model="JSReports.ENROLLMENT_YEAR_ID" ng-options="option.id as option.name for option in filters.ENROLLMENT_YEAR_ID" required=""></select><p class="help-block" ng-if="frmReport.ENROLLMENT_YEAR_ID.$error.required">El a&ntilde;o escolar es obligatorio</p></div></div></div><div class="row" ng-if="JSReports.hasOwnProperty(\'YEAR_ID\')"><div class="col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label>Grado <span>*</span></label><select class="form-control" name="YEAR_ID" ng-model="JSReports.YEAR_ID" ng-options="option.id as option.name for option in filters.YEAR_ID" ng-change="getFees();" required=""></select><p class="help-block" ng-if="frmReport.YEAR_ID.$error.required">El grado es obligatorio</p></div></div></div><div class="row" ng-if="JSReports.hasOwnProperty(\'SECTION_ID\')"><div class="col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label>Secci&oacute;n <span>*</span></label><select class="form-control" name="SECTION_ID" ng-model="JSReports.SECTION_ID" ng-options="option.id as option.name for option in filters.SECTION_ID" required=""></select><p class="help-block" ng-if="frmReport.SECTION_ID.$error.required">La secci&oacute;n es obligatoria</p></div></div></div><div class="row" ng-if="JSReports.hasOwnProperty(\'FEE_ID\')"><div class="col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label>Colegiatura <span>*</span></label><select class="form-control" name="FEE_ID" ng-model="JSReports.FEE_ID" ng-options="option.id as option.name for option in filters.FEE_ID" required=""></select><p class="help-block" ng-if="frmReport.FEE_ID.$error.required">La colegiatura es obligatoria</p></div></div></div><div class="row" ng-if="JSReports.hasOwnProperty(\'FEE_DATE\')"><div class="col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label>Colegiatura <span>*</span></label><select class="form-control" name="FEE_DATE" ng-model="JSReports.FEE_DATE" ng-options="option.fee_date as option.name for option in filters.FEE_DATE" required=""></select><p class="help-block" ng-if="frmReport.FEE_DATE.$error.required">La colegiatura es obligatoria</p></div></div></div><div class="row" ng-if="JSReports.hasOwnProperty(\'PAYMENT_TYPE_ID\')"><div class="col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label>Tipo de Pago <span>*</span></label><select chosen="" multiple="" class="form-control" name="PAYMENT_TYPE_ID" ng-model="JSReports.PAYMENT_TYPE_ID" ng-options="option.id as option.name for option in filters.PAYMENT_TYPE_ID" required=""></select><p class="help-block" ng-if="frmReport.PAYMENT_TYPE_ID.$error.required">El tipo de pago es obligatorio</p></div></div></div><div class="row"><div class="col-xs-12 col-sm-6" ng-if="JSReports.hasOwnProperty(\'START_DATE\')"><div class="form-group" show-errors="{showSuccess: true}"><label>Fecha Desde <span>*</span></label><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" name="START_DATE" ng-model="JSReports.START_DATE" placeholder="dd/mm/aaaa" class="form-control" tabindex="5" required=""></div><span class="label label-primary">dia/mes/a&ntilde;o</span><p class="help-block" ng-if="frmReport.START_DATE.$error.required">La fecha de inicio de per&iacute;odo es obligatorio</p></div></div><div class="col-xs-12 col-sm-6" ng-if="JSReports.hasOwnProperty(\'END_DATE\')"><div class="form-group" show-errors="{showSuccess: true}"><label>Fecha Hasta <span>*</span></label><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" name="END_DATE" ng-model="JSReports.END_DATE" placeholder="dd/mm/aaaa" class="form-control" tabindex="5" required=""></div><span class="label label-primary">dia/mes/a&ntilde;o</span><p class="help-block" ng-if="frmReport.END_DATE.$error.required">La fecha de fin de per&iacute;odo es obligatorio</p></div></div><div class="col-xs-12" ng-if="JSReports.hasOwnProperty(\'FECHA_DE_PAGO\')"><div class="form-group" show-errors="{showSuccess: true}"><label>Fecha de Pago <span>*</span></label><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" name="FECHA_DE_PAGO" ng-model="JSReports.FECHA_DE_PAGO" placeholder="dd/mm/aaaa" class="form-control" tabindex="5" required=""></div><span class="label label-primary">dia/mes/a&ntilde;o</span><p class="help-block" ng-if="frmReport.FECHA_DE_PAGO.$error.required">La fecha de pago es obligatoria</p></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label>Formato del Reporte <span>*</span></label><select class="form-control" name="extension" ng-model="JSReports.extension" ng-options="option.id as option.name for option in extensions"></select><p class="help-block" ng-if="frmReport.extension.$error.required">El formato del reporte es obligatorio</p></div></div></div><div class="hr-line-dashed"></div><div class="row"><div class="col-xs-12"><div class="form-group"><button type="button" class="btn btn-primary btn-save" ng-click="askForReport();"><i class="fa fa-play"></i> Generar</button></div></div></div></form></div></div><br>'),e.put("components/templates/reports/list.html",'<select chosen="" class="form-control" name="selectedReport" ng-model="selectedReport" ng-options="option.id as option.name for option in reports" required=""></select>'),e.put("components/templates/reports/profile.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Reportes</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Reportes</a></li><li class="active"><strong>{{ title }}</strong></li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>Reporte de Perfil</h5></div><div class="ibox-content"><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><div class="table-responsive"><table class="table"><thead><tr><th colspan="2">Datos Generales</th></tr></thead><tbody><tr><td rowspan="3" width="150px" align="center"><img ng-if="!person.profilePicture" src="assets/images/logocca.png" width="125px" class="img-thumbnail" alt="image"> <img ng-if="person.profilePicture" ng-src="{{ person.profilePicture }}" width="125px" class="img-thumbnail" alt="image"></td><td><p><strong>{{ person.firstname }}<span ng-if="person.middlename">{{ person.middlename }}</span> {{ person.lastname }}</strong> <small><em>({{ person.code }})</em></small></p></td></tr><tr><td><p>{{ person.address1 }}<span ng-if="person.address2">, {{ person.address2 }}</span>,</p><p>{{ person.city }}, {{person.state}}</p><p>Tel. <strong>{{ person.phone }}</strong></p><p ng-if="person.email">{{ person.email }}</p></td></tr><tr><td><ul><li ng-repeat="customfield in person.customfields" style="list-style: square; margin-left: 0px;"><p style="margin: 0px;">{{ customfield.value }}</p><p style="margin: 0 0 5px 0;"><small><em>{{ customfield.label }}</em></small></p></li></ul></td></tr></tbody></table></div><hr class="hidden-xs"><div class="table-responsive"><table class="table"><thead><tr><th>Matricula</th></tr></thead><tbody><tr><td>{{ enrollment.enrollmentYear }}, <strong>{{ enrollment.year_name }}</strong><span ng-if="enrollment.section_name">, {{ enrollment.section_name }}</span></td></tr><tr><td><p>Padre Responsable: {{ enrollment.parent.firstname }} {{ enrollment.parent.lastname }}</p><p ng-if="enrollment.parent.phone || enrollment.parent.email"><span ng-if="enrollment.parent.phone">Tel. {{ enrollment.parent.phone }}</span><span ng-if="enrollment.parent.email"><a href="mailto:{{ enrollment.parent.email }}">{{enrollment.parent.email}}</a></span></p></td></tr></tbody></table></div><hr><div class="table-responsive"><table class="table"><thead><tr><th>Familiares</th></tr></thead><tbody><tr><td>Cell 1</td></tr><tr><td>Cell 3</td></tr></tbody></table></div></div></div></div></div><br>'),e.put("components/templates/roles/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Roles</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.rol">Roles</a></li><li class="active">{{ activeTitle }}</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{ activeTitle }} Rol</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmRol" ng-model="Rol" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Nombre <span>*</span></label><div class="col-sm-9"><input type="text" name="name" ng-model="Rol.name" class="form-control" required=""><p class="help-block" ng-if="frmRol.name.$error.required">El nombre es obligatorio</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Acceso a m&oacute;dulos <span>*</span></label><div class="col-sm-9"><select name="ModuleRol" ng-model="ModuleRol" chosen="" multiple="" ng-options="option.id as option.name for option in Modules" required=""></select><p class="help-block" ng-if="frmRol.ModuleRol.$error.required">Por favor seleccione por lo menos un m&oacute;dulo.</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Descripci&oacute;n</label><div class="col-sm-9"><input type="text" ng-model="Rol.description" class="form-control"></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.rol" class="btn btn-default">Cancelar</a></div></div></form></div></div>'),e.put("components/templates/roles/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Roles</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li class="active">Roles</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th>Nombre</th><th>Descripci&oacute;n</th></tr></thead><tbody><tr dir-paginate="sy in data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ sy.id }}"></td><td><a ui-sref="catalogs.rolupdate({id: sy.id})">{{ sy.name }}</a></td><td>{{ sy.description }}</td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/sections/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Secciones</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.section">Secciones</a></li><li class="active">{{ activeTitle }}</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{ activeTitle }} Secci&oacute;n</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmSection" ng-model="Section" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Nombre <span>*</span></label><div class="col-sm-9"><input type="text" name="name" ng-model="Section.name" class="form-control" required=""><p class="help-block" ng-if="frmSection.name.$error.required">El nombre es obligatorio</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Descripci&oacute;n</label><div class="col-sm-9"><input type="text" ng-model="Section.description" class="form-control"></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.section" class="btn btn-default">Cancelar</a></div></div></form></div></div>'),e.put("components/templates/sections/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Secciones</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li class="active">Secciones</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th>Nombre</th><th>Descripci&oacute;n</th></tr></thead><tbody><tr dir-paginate="sy in data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ sy.id }}"></td><td><a ui-sref="catalogs.sectionupdate({id: sy.id})">{{ sy.name }}</a></td><td>{{ sy.description }}</td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/session/login.html",'<div id="wrapper"><br><br><div class="container-fluid"><div class="row"><div class="col-sm-6 col-sm-offset-3 col-xs-12"><div class="well login-box"><form name="frmLogin" ng-model="Login" novalidate=""><div style="text-align:center;"><img src="/assets/images/logocca.png" width="100" align="center"></div><legend style="font-family: \'Lobster\', cursive; font-size: 3rem; text-align: center; text-shadow: 0px 0px 3px rgba(150, 150, 150, 2); color: #0064a4;">Colegio Centroam&eacute;rica</legend><div class="hidden-xs"><div app-forminfo=""></div></div><div app-message=""></div><div class="form-group" show-errors="{showSuccess: true}"><label class="hidden-xs">Usuario <span>*</span></label><div class="input-group"><span class="input-group-addon"><i class="fa fa-user"></i></span> <input name="username" ng-model="Login.username" placeholder="usuario" type="text" class="form-control" ng-keypress="keypressLogin($event);" required=""></div><p class="help-block" ng-if="frmLogin.username.$error.required">El usuario es obligatorio</p></div><div class="form-group" show-errors="{showSuccess: true}"><label class="hidden-xs">Contrase&ntilde;a <span>*</span></label><div class="input-group"><span class="input-group-addon"><i class="fa fa-unlock-alt"></i></span> <input name="password" ng-model="Login.password" type="password" placeholder="contrase&ntilde;a" class="form-control" ng-keypress="keypressLogin($event);" required=""></div><p class="help-block" ng-if="frmLogin.password.$error.required">La contrase&ntilde;a es obligatoria</p></div><div class="form-group"><button type="button" class="btn btn-primary" style="width: 100%;" ng-click="login();">LOGIN</button></div><div class="form-group text-right"><a>Olvid&oacute; su contrase&ntilde;a?</a></div></form></div></div></div></div></div>'),e.put("components/templates/settings/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Configuraci&oacute;n</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li class="active">Configuraci&oacute;n</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>Actualizar Configuraci&oacute;n</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmSetting" ng-model="Setting" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Registros por p&aacute;gina <span>*</span></label><div class="col-sm-9">{{ frmSetting.per_page }}<input-number name="per_page" ng-model="Setting.per_page" min="10" max="50" required=""></input-number><p class="help-block" ng-if="frmSetting.per_page.$error.required">El n&uacute;mero de registros por p&aacute;gina es obligatorio</p><p class="help-block" ng-if="frmSetting.per_page.$error.min">El n&uacute;mero de registros por p&aacute;gina debe ser mayor &oacute; igual a 10</p><p class="help-block" ng-if="frmSetting.per_page.$error.max">El n&uacute;mero de registros por p&aacute;gina debe ser menor &oacute; igual a 50</p><p>El n&uacute;mero de registros por p&aacute;gina debe ser mayor &oacute; igual a 10 y menor &oacute; igual a 50</p></div></div><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Porcentage por sobrecargo <span>*</span></label><div class="col-sm-9"><input-float name="overdue_percentage" ng-model="Setting.overdue_percentage" min="0" max="100" class="form-control" required=""></input-float><p class="help-block" ng-if="frmSetting.overdue_percentage.$error.required">El porcentage por sobrecargo es obligatorio</p><p class="help-block" ng-if="frmSetting.overdue_percentage.$error.min">El porcentage debe ser mayor &oacute; igual a 0</p><p class="help-block" ng-if="frmSetting.overdue_percentage.$error.max">El porcentage debe ser menor &oacute; igual a 100</p><p>El porcentage debe ser mayor &oacute; igual a 0 y menor o &oacute; igual a 100</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Campos para b&uacute;squeda en control de pagos</label><div class="col-sm-9"><select chosen="" multiple="" name="search_fields" ng-model="Setting.search_fields" class="form-control" ng-options="option.name as option.label for option in Customfields"></select><p>Estos campos ser&aacute;n utilizados adicionalmente al c&oacute;digo del alumno para b&uacute;squeda en el control de pagos.</p></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="people.settings" class="btn btn-default">Cancelar</a></div></div></form></div></div>'),e.put("components/templates/students/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Alumnos</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Personas</a></li><li class="active">Alumnos</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><form><div class="row"><div class="col-sm-4"><div class="form-group"><label class="control-label">Filtrar por A&ntilde;o Escolar:</label><select name="schoolyear" class="form-control" ng-model="schoolyear" ng-change="get(1);" ng-options="option.id as option.name for option in schoolyears"></select></div></div><div class="col-sm-4"><div class="form-group"><label class="control-label">Filtrar por grado:</label><select name="year" class="form-control" ng-model="year" ng-change="get(1);"><option value=""></option><option ng-repeat="option in years" value="{{ option.id }}">{{ option.name }}</option></select></div></div><div class="col-sm-4"><div class="form-group"><label class="control-label">Filtrar por secci&oacute;n:</label><select name="section_id" class="form-control" ng-model="section_id" ng-change="get(1);"><option value=""></option><option ng-repeat="option in sections" value="{{ option.id }}">{{ option.name }}</option></select></div></div></div></form><br><div class="row"><div class="col-lg-12"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th width="13">C&oacute;digo</th><th width="47">Nombre</th><th width="10">Grado</th><th width="10">Secci&oacute;n</th><th width="10">Tel&eacute;fono</th></tr></thead><tbody><tr dir-paginate="al in data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ al.enrollment_id }}"></td><td><a ui-sref="people.studentsupdate({id: al.id})">{{ al.code }}</a></td><td><a ui-sref="people.studentsupdate({id: al.id})">{{ al.lastname }}, {{ al.firstname }} <span ng-if="al.middlename.length > 0">{{ al.middlename }}</span></a></td><td>{{ al.year_name }}</td><td>{{ al.section_name }}</td><td>{{ al.phone }}</td></tr></tbody></table></div></div></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/subjects/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Materias</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.section">Materias</a></li><li class="active">{{ activeTitle }}</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{ activeTitle }} Materia</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmSubject" ng-model="Subject" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Nombre <span>*</span></label><div class="col-sm-9"><input type="text" name="name" ng-model="Subject.name" class="form-control" required=""><p class="help-block" ng-if="frmSubject.name.$error.required">El nombre es obligatorio</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Descripci&oacute;n</label><div class="col-sm-9"><input type="text" ng-model="Subject.description" class="form-control"></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.subject" class="btn btn-default">Cancelar</a></div></div></form></div></div>'),e.put("components/templates/subjects/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Materias</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li class="active">Materias</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th>Nombre</th><th>Descripci&oacute;n</th></tr></thead><tbody><tr dir-paginate="sy in data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ sy.id }}"></td><td><a ui-sref="catalogs.subjectupdate({id: sy.id})">{{ sy.name }}</a></td><td>{{ sy.description }}</td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/tools/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Herramientas</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li class="active">Herramientas</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>Promoci&oacute;n Autom&aacute;tica</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmPromotion" ng-model="Promotion" class="form-horizontal" novalidate=""><div class="form-group"><label class="col-sm-3 control-label">Seleccione los elementos a promocionar <span>*</span></label><div class="col-sm-9"><div class="checkbox"><label><input type="checkbox" value="students" name="students" ng-model="Promotion.students" tabindex="1"> Alumnos</label></div><div class="checkbox"><label><input type="checkbox" value="students" name="paymentplans" ng-model="Promotion.paymentplans" tabindex="2"> Planes de Pago</label></div><br><p>Seleccione al menos un elemento a promocionar.<br>Los alumnos que ya estén matriculados en el a&ntilde;o de promoci&oacute;n ser&aacute;n ignorados.</p></div></div><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">A&ntilde;o a promocionar <span>*</span></label><div class="col-sm-9"><select name="enrollment_year_id" ng-model="Promotion.enrollment_year_id" ng-options="enrollmentyear.id as enrollmentyear.name for enrollmentyear in enrollmentyears" class="form-control" tabindex="3" required=""></select><p class="help-block" ng-if="frmPromotion.enrollment_year_id.$error.required">El a&ntilde;o escolar a promocionar es obligatorio</p><p>Seleccione el a&ntilde;o escolar de promoci&oacute;n, este debe ser superior al a&ntilde;o en curso.</p></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-success" ng-click="save();"><i class="fa fa-save"></i> Promocionar</button></div></div></form></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>Generar Talonarios</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmTalonarios" ng-model="Talonarios" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">A&ntilde;o escolar que desea generar talonarios <span>*</span></label><div class="col-sm-9"><select name="enrollment_year_id" ng-model="Talonarios.enrollment_year_id" ng-options="enrollmentyear.id as enrollmentyear.name for enrollmentyear in enrollmentyears" class="form-control" tabindex="3" required=""></select><p class="help-block" ng-if="frmTalonarios.enrollment_year_id.$error.required">El a&ntilde;o escolar para el que desea generar talonarios es obligatorio</p><p>Seleccione el a&ntilde;o escolar para el que desea generar los talonarios.</p></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-success" ng-click="generarTalonarios();"><i class="fa fa-save"></i> Generar Talonarios</button> <button type="button" class="btn btn-primary" ng-click="getExcel();"><i class="fa fa-file-excel-o"></i> Reporte de Talonarios</button></div></div></form></div></div><br><br>'),e.put("components/templates/users/form.html",'<style>\n.cropArea {\n    background: #E4E4E4;\n    overflow: hidden;\n    width:500px;\n    min-width: 100%;\n    height:350px;\n}\n</style><div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Usuarios</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="people">Personas</a></li><li><a ui-sref="people.users">Usuarios</a></li><li ng-if="Person.id">{{ Person.firstname }} {{ Person.lastname }}</li><li class="active"><strong>{{ activeTitle }} Usuario</strong></li></ol></div></div><br><div class="tabs-container"><ul class="nav nav-tabs"><li class="active"><a>Perfil</a></li><li><a ui-sref="people.expedient({id: Person.id})">Expediente</a></li></ul><div class="tab-content"><div class="tab-pane active" id="person"><div class="panel-body"><div app-forminfo=""></div><div app-message=""></div><form name="frmPerson" ng-model="Person" novalidate=""><fieldset><legend><i class="fa fa-pencil"></i> Datos Generales</legend><div class="row"><div class="col-md-3 col-sm-4 col-xs-12"><div style="width:100%; height:180px; background-color:#f1f1f1f1; display: block; text-align:center;"><img alt="100%x180" id="selectedImg" src="{{ profilePicturePlaceholder }}" height="180"></div><button type="button" class="btn btn-default" style="width:100%;" ng-click="selectPicture();"><i class="fa fa-camera"></i> {{photoLabel}}</button></div><div class="col-md-9 col-sm-8 col-xs-12"><div class="row"><div class="col-md-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Tipo de Usuario <span>*</span></label><select class="form-control" name="person_type_id" ng-model="Person.person_type_id" ng-change="getCustomFields()" ng-options="type.id as type.name for type in persontypes" required=""></select><p class="help-block" ng-if="frmPerson.person_type_id.$error.required">El tipo de usuario es obligatorio</p></div></div></div><div class="row"><div class="col-sm-7 col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Primer Nombre <span>*</span></label> <input type="text" name="firstname" ng-model="Person.firstname" class="form-control" required=""><p class="help-block" ng-if="frmPerson.firstname.$error.required">El primer nombre es obligatorio</p></div></div><div class="col-sm-5 col-xs-12"><div class="form-group"><label class="control-label">Segundo Nombre</label> <input type="text" name="middlename" ng-model="Person.middlename" class="form-control"></div></div></div><div class="row"><div class="col-md-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Apellidos <span>*</span></label> <input type="text" name="lastname" ng-model="Person.lastname" class="form-control" required=""><p class="help-block" ng-if="frmPerson.lastname.$error.required">El apellido es obligatorio</p></div></div></div><div class="row"><div class="col-sm-6 col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">G&eacute;nero <span>*</span></label><select name="gender" ng-model="Person.gender" class="form-control" required=""><option value=""></option><option value="M">Masculino</option><option value="F">Femenino</option></select><p class="help-block" ng-if="frmPerson.gender.$error.required">El g&eacute;nero es obligatorio</p></div></div><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Fecha de Nacimiento</label><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" name="date_of_birth" ng-model="Person.date_of_birth" placeholder="dd/mm/aaaa" class="form-control"></div><span class="label label-primary">dia/mes/a&ntilde;o</span><p class="date_of_birth-error-message" style="display:none;">La fecha de nacimiento debe tener el formato: dia/mes/a&ntilde;o.</p></div></div></div></div></div></fieldset><fieldset><legend><i class="fa fa-pencil"></i> Contacto</legend><div class="row"><div class="col-sm-6 col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Ciudad <span>*</span></label> <input type="text" name="city" ng-model="Person.city" class="form-control" required=""><p class="help-block" ng-if="frmPerson.city.$error.required">La ciudad es obligatoria</p></div></div><div class="col-sm-6 col-xs-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Departamento <span>*</span></label><select name="state" class="form-control" ng-model="Person.state" required=""><option value=""></option><option ng-repeat="departamento in departamentos" value="{{ departamento }}">{{ departamento }}</option></select><p class="help-block" ng-if="frmPerson.state.$error.required">El departamento es obligatorio</p></div></div></div><div class="row"><div class="col-md-12"><div class="form-group" show-errors="{showSuccess: true}"><label class="control-label">Direcci&oacute;n<span>*</span></label> <input type="text" name="address1" ng-model="Person.address1" class="form-control" required=""><p class="help-block" ng-if="frmPerson.address1.$error.required">La direcci&oacute;n es obligatoria</p></div><div class="form-group"><input type="text" name="address2" ng-model="Person.address2" class="form-control"></div></div></div><div class="row"><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Correo Electr&oacute;nico</label> <input type="email" name="email" ng-model="Person.email" class="form-control"><p class="help-block" ng-if="frmPerson.email.$error.email">El correo electr&oacute;nico no es v&aacute;lido</p></div></div><div class="col-sm-6 col-xs-12"><div class="form-group"><label class="control-label">Tel&eacute;fono</label><input-phone name="phone" ng-model="Person.phone"></input-phone></div></div></div></fieldset><fieldset><legend><i class="fa fa-pencil"></i> Informaci&oacute;n Adicional</legend><div class="row" ng-repeat="input in customfields"><div class="col-md-12"><div class="form-group customfield-group" ng-class="{\'has-error\': frmPerson[input.name].$invalid && input.required}"><label class="control-label">{{ input.label }} <span ng-if="input.required">*</span></label><div ng-if="input.type == \'text\'"><input-text name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" format="{{ input.pattern }}"></input-text></div><div ng-if="input.type == \'textarea\'"><input-text-long name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required"></input-text-long></div><div ng-if="input.type == \'number\'"><input-number name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required"></input-number></div><div ng-if="input.type == \'tel\'"><input-phone name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required"></input-phone></div><div ng-if="input.type == \'date\'"><div class="input-group"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span> <input type="text" input-type="date" name="{{ input.name }}" ng-model="CustomFields[input.name]" placeholder="dd/mm/aaaa" class="form-control" ng-required="input.required"></div><span class="label label-primary">dia/mes/a&ntilde;o</span></div><div ng-if="input.type == \'email\'"><input-email name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required"></input-email></div><div ng-if="input.type == \'url\'"><input-url name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required"></input-url></div><div ng-if="input.type == \'select\'"><input-list name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" options="input.values"></input-list></div><div ng-if="input.type == \'checkbox\'"><input-multiple-options name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" options="input.values"></input-multiple-options></div><div ng-if="input.type == \'radio\'"><input-single-option name="{{ input.name }}" ng-model="CustomFields[input.name]" ng-required="input.required" options="input.values"></input-single-option></div><p class="help-block" ng-if="frmPerson[input.name].$error.required">El g&eacute;nero es obligatorio</p></div></div></div></fieldset><div class="row"><div class="col-md-12"><div class="checkbox"><label class="control-label"><input type="checkbox" value="1" ng-model="createuser" name="createuser"> <strong ng-if="User.rol_id == undefined">Crear usuario con acceso al sistema</strong> <strong ng-if="User.rol_id">Cambiar contrase&ntilde;a</strong></label></div></div></div><fieldset ng-if="createuser == 1"><legend><i class="fa fa-pencil"></i> Credenciales</legend><div class="row"><div class="col-md-12"><div class="form-group"><label class="control-label">Rol <span>*</span></label><select class="form-control" name="rol_id" ng-model="User.rol_id" ng-change="validateRol()" ng-options="type.id as type.name for type in roles"></select><p class="help-block" ng-if="invalid_rol == 1">El rol es obligatorio</p></div></div></div><div class="row"><div class="col-md-12"><div class="form-group"><label class="control-label">Contrase&ntilde;a <span>*</span></label> <input type="password" name="password" ng-model="User.password" ng-change="validatePass()" class="form-control"><p class="help-block" ng-if="invalid_pass == 1">La contrase&ntilde;a es obligatoria.</p></div></div></div><div class="row"><div class="col-md-12"><div class="form-group"><label class="control-label">Repetir Contrase&ntilde;a <span>*</span></label> <input type="password" name="password2" ng-model="User.password2" ng-change="validatePass()" class="form-control"><p class="help-block" ng-if="invalid_pass == 1">La contrase&ntilde;a no coincide.</p><p>La contrase&ntilde;a debe contener n&uacute;meros y letras. Si no desea que este usuario tenga acceso al sistema deje la contrase&ntilde;a en blanco.</p></div></div></div></fieldset><div class="hr-line-dashed"></div><div class="form-group"><button type="button" class="btn btn-primary btn-save" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="people.users" class="btn btn-default">Cancelar</a></div></form></div></div></div></div><br><br><br><div class="modal fade" tabindex="-1" role="dialog" id="myModal"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Posible Duplicado</h4></div><div class="modal-body"><div class="row"><div class="col-sm-12"><div class="alert alert-info" role="alert">Se ha detectado posibles duplicados por favor confirme si desea vincular al alumno uno de los registros ya existentes o desea agregar el nuevo registro. D&eacute; click en el nombre del registro que desea vincular al alumno.</div></div></div><div class="row"><div class="col-sm-12"><button type="button" class="btn btn-primary" style="width: 100%;" ng-click="save(1);">FORZAR GUARDAR</button></div></div><hr><div class="row"><div class="col-sm-12"><div class="table-responsive"><table class="table table-condensed table-hover"><thead><tr><th width="10%"></th><th width="20%">Nombre</th><th width="30%">Direcci&oacute;n</th><th width="40%">Informaci&oacute;n Adicional</th></tr></thead><tbody><tr ng-repeat="item in duplicates"><td><input type="button" value="Vincular" class="btn btn-default" ng-click="addRelative(item.id);"></td><td>{{ item.firstname }} <span ng-if="item.middlename">{{ item.middlename }}</span> {{ item.lastname }}</td><td>{{ item.address1 }}<span ng-if="item.address2">, {{ item.address2 }}</span>, {{ item.city }}, {{ item.state }}</td><td><ul><li ng-repeat="customfield in item.customfields">{{ customfield.label }}: {{ customfield.value }}</li><li>Tel&eacute;fono: {{ item.phone }}</li><li>Email: {{ item.email }}</li></ul></td></tr></tbody></table></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button></div></div></div></div><div class="modal fade" tabindex="-1" role="dialog" id="myModalPicture"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Foto de Perfil</h4></div><div class="modal-body"><div class="row"><div class="col-lg-12"><div class="form-group"><label class="label-control">Seleccione una im&aacute;gen</label> <input type="file" class="form-control" id="fileInput"> <span class="label label-primary">La im&aacute;gen debe ser JPG, PNG &oacute; GIF</span></div></div></div><div class="row"><div class="col-xs-12"><div class="cropArea"><img-crop result-image-format="image/jpeg" result-image-quality="1.0" result-image="Picture.profileCroppedPicture" image="Picture.profilePicture"></img-crop></div></div></div><br><div class="row"><div class="col-xs-12"><div class="form-group"><img ng-src="{{Picture.profileCroppedPicture}}"></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button> <button type="button" class="btn btn-primary" ng-click="setPicture();">Aceptar</button></div></div></div></div>'),e.put("components/templates/users/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Usuarios</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="people">Personas</a></li><li class="active">Usuarios</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="row"><div class="col-lg-12"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><check-all></check-all></th><th width="15%">C&oacute;digo</th><th width="30%">Nombre</th><th width="10">Tel&eacute;fono</th><th width="10">Email</th></tr></thead><tbody><tr dir-paginate="al in data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><input type="checkbox" class="chk" name="sy_id" value="{{ al.id }}"></td><td><a ui-sref="people.usersupdate({id: al.id})">{{ al.code }}</a></td><td><a ui-sref="people.usersupdate({id: al.id})">{{ al.firstname }} <span ng-if="al.middlename.length > 0">{{ al.middlename }}</span> {{ al.lastname }}</a></td><td>{{ al.phone }}</td><td>{{ al.email }}</td></tr></tbody></table></div></div></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>'),e.put("components/templates/years/form.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Grados</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a ui-sref="catalogs">Cat&aacute;logos</a></li><li><a ui-sref="catalogs.year">Grados</a></li><li class="active">{{ activeTitle }}</li></ol></div></div><br><div class="ibox float-e-margins"><div class="ibox-title"><h5>{{ activeTitle }} Grado</h5></div><div class="ibox-content"><div app-forminfo=""></div><div app-message=""></div><form name="frmYear" ng-model="Year" class="form-horizontal" novalidate=""><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Nombre <span>*</span></label><div class="col-sm-9"><input type="text" name="name" ng-model="Year.name" class="form-control" required=""><p class="help-block" ng-if="frmYear.name.$error.required">El nombre es obligatorio</p></div></div><div class="form-group" show-errors="{showSuccess: true}"><label class="col-sm-3 control-label">Orden Correlativo <span>*</span></label><div class="col-sm-9"><input-number name="order" ng-model="Year.order" required=""></input-number><small class="text-navy">Es un n&uacute;mero mayor que 0 e indica el orden en que aparecer&aacute; en el formulario.</small><p class="help-block" ng-if="frmYear.order.$error.required">El n&uacute;mero de orden correlativo es obligatorio. Debe ser un n&uacute;mero mayor que 0.</p></div></div><div class="form-group"><label class="col-sm-3 control-label">Descripci&oacute;n</label><div class="col-sm-9"><input type="text" ng-model="Year.description" class="form-control"></div></div><div class="hr-line-dashed"></div><div class="form-group"><div class="col-sm-9 col-sm-offset-3"><button type="button" class="btn btn-primary" ng-click="save();"><i class="fa fa-save"></i> Guardar</button> <a ui-sref="catalogs.year" class="btn btn-default">Cancelar</a></div></div></form></div></div>'),e.put("components/templates/years/index.html",'<div class="row wrapper border-bottom white-bg page-heading"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><h2>Grados</h2><ol class="breadcrumb"><li><a href="/"><span><i class="fa fa-home"></i></span></a></li><li><a href="/catalogs">Cat&aacute;logos</a></li><li class="active">Grados</li></ol></div></div><br><action-buttons></action-buttons><div app-message=""></div><div class="row"><div class="col-md-12"><div class="alert alert-info"><p><strong>Instrucciones:</strong> Arrastre y suelte el &iacute;cono <i class="fa fa-reorder"></i> para ordenar los grados de acuerdo al orden acad&eacute;mico.</p></div></div></div><div class="row"><div class="col-lg-12"><div class="ibox float-e-margins"><div class="ibox-content"><div class="table-responsive"><table class="table table-striped"><thead><tr><th width="10"><i class="fa fa-sort-numeric-asc"></i></th><th width="10"><check-all></check-all></th><th>Nombre</th><th>Descripci&oacute;n</th></tr></thead><tbody ui-sortable="sortableOptions" ng-model="y_data"><tr dir-paginate="y in y_data | itemsPerPage: per_page" total-items="pagination.total" current-page="pagination.current_page"><td><i class="fa fa-reorder draggable"></i></td><td><input type="checkbox" class="chk" name="y_id" value="{{ y.id }}"></td><td><a ui-sref="catalogs.yearupdate({id: y.id})">{{ y.name }}</a></td><td>{{ y.description }}</td></tr></tbody></table></div></div><div class="row"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><dir-pagination-controls on-page-change="get(newPageNumber)"></dir-pagination-controls></div></div></div></div></div>')
}]);